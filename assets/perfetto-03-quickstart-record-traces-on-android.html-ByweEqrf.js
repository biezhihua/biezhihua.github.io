import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{e as a,f as n,o as l}from"./app-BC9YFojH.js";const e={};function p(t,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h1 id="perfetto-03-quickstart-record-traces-on-android" tabindex="-1"><a class="header-anchor" href="#perfetto-03-quickstart-record-traces-on-android"><span>Perfetto - 03 - Quickstart: Record traces on Android</span></a></h1><p>Perfetto允许你从各种数据源（例如通过ftrace记录内核调度信息，通过atrace记录用户空间的数据）收集Android设备的系统级性能跟踪数据。</p><h2 id="starting-the-tracing-services" tabindex="-1"><a class="header-anchor" href="#starting-the-tracing-services"><span>Starting the tracing services</span></a></h2><p>Perfetto基于Android 9（P）之后可用的平台服务构建，但默认情况下仅在Android 11（R）之后启用。在Android 9（P）和10（Q）上，您需要执行以下操作以确保在开始之前启用跟踪服务：</p><p>＃仅在非Pixel手机上的Android 9（P）和10（Q）上需要。 adb shell setprop persist.traced.enable 1</p><p>如果您运行的Android版本早于P，则仍然可以使用record_android_trace脚本使用Perfetto捕获跟踪。请参见下面的通过cmdline记录跟踪的说明。</p><h2 id="recording-a-trace" tabindex="-1"><a class="header-anchor" href="#recording-a-trace"><span>Recording a trace</span></a></h2><h2 id="recording-a-trace-recording-a-trace-through-the-perfetto-ui" tabindex="-1"><a class="header-anchor" href="#recording-a-trace-recording-a-trace-through-the-perfetto-ui"><span>Recording a trace - Recording a trace through the Perfetto UI</span></a></h2><h3 id="default" tabindex="-1"><a class="header-anchor" href="#default"><span>Default</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 7168</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 1024</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cpu" tabindex="-1"><a class="header-anchor" href="#cpu"><span>CPU</span></a></h3><h4 id="cpu-coarse-cpu-usage-counter-粗略的cpu使用计数器" tabindex="-1"><a class="header-anchor" href="#cpu-coarse-cpu-usage-counter-粗略的cpu使用计数器"><span>CPU Coarse CPU usage counter 粗略的CPU使用计数器</span></a></h4><p>Lightweight polling of CPU usage counters via /proc/stat. Allows to periodically monitor CPU usage.</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.sys_stats&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        sys_stats_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            stat_period_ms: 1000</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            stat_counters: STAT_CPU_TIMES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            stat_counters: STAT_FORK_COUNT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="scheduling-details" tabindex="-1"><a class="header-anchor" href="#scheduling-details"><span>Scheduling details</span></a></h4><p>https://perfetto.dev/docs/data-sources/cpu-scheduling</p><p>Enables high-detailed tracking of scheduling events</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.process_stats&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        target_buffer: 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        process_stats_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            scan_all_processes_on_start: true</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sched/sched_switch&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;power/suspend_resume&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sched/sched_wakeup&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sched/sched_wakeup_new&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sched/sched_waking&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sched/sched_process_exit&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sched/sched_process_free&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;task/task_newtask&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;task/task_rename&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cpu-frequency-and-idle-states" tabindex="-1"><a class="header-anchor" href="#cpu-frequency-and-idle-states"><span>CPU frequency and idle states</span></a></h4><p>Records cpu frequency and idle state changes via ftrace and sysfs</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.sys_stats&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        sys_stats_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            cpufreq_period_ms: 1000</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;power/cpu_frequency&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;power/cpu_idle&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;power/suspend_resume&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="syscalls" tabindex="-1"><a class="header-anchor" href="#syscalls"><span>Syscalls</span></a></h4><p>Tracks the enter and exit of all syscalls. On Android requires a userdebug or eng build.</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;raw_syscalls/sys_enter&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;raw_syscalls/sys_exit&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="gpu" tabindex="-1"><a class="header-anchor" href="#gpu"><span>GPU</span></a></h3><h4 id="gpu-frequency" tabindex="-1"><a class="header-anchor" href="#gpu-frequency"><span>GPU frequency</span></a></h4><p>Records gpu frequency via ftrace</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;power/gpu_frequency&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="gpu-memory" tabindex="-1"><a class="header-anchor" href="#gpu-memory"><span>GPU memory</span></a></h4><p>Allows to track per process and global total GPU memory usages. (Available on recent Android 12+ kernels)</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;android.gpu.memory&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;gpu_mem/gpu_mem_total&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="power" tabindex="-1"><a class="header-anchor" href="#power"><span>Power</span></a></h3><h4 id="battery-drain-power-rails" tabindex="-1"><a class="header-anchor" href="#battery-drain-power-rails"><span>Battery drain &amp; power rails</span></a></h4><p>Polls charge counters and instantaneous power draw from the battery power management IC and the power rails from the PowerStats HAL</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;android.power&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        android_power_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            battery_poll_ms: 1000</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            battery_counters: BATTERY_COUNTER_CAPACITY_PERCENT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            battery_counters: BATTERY_COUNTER_CHARGE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            battery_counters: BATTERY_COUNTER_CURRENT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            collect_power_rails: true</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="board-voltages-frequencies" tabindex="-1"><a class="header-anchor" href="#board-voltages-frequencies"><span>Board voltages &amp; frequencies</span></a></h4><p>Tracks voltage and frequency changes from board sensors</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;regulator/regulator_set_voltage&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;regulator/regulator_set_voltage_complete&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;power/clock_enable&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;power/clock_disable&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;power/clock_set_rate&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;power/suspend_resume&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="memory" tabindex="-1"><a class="header-anchor" href="#memory"><span>Memory</span></a></h3><h4 id="native-heap-profiling" tabindex="-1"><a class="header-anchor" href="#native-heap-profiling"><span>Native heap profiling</span></a></h4><p>Track native heap allocations &amp; deallocations of an Android process. (Available on Android 10+)</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;android.heapprofd&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        target_buffer: 0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        heapprofd_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            sampling_interval_bytes: 4096</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            shmem_size_bytes: 8388608</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            block_client: true</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="java-heap-dumps" tabindex="-1"><a class="header-anchor" href="#java-heap-dumps"><span>Java heap dumps</span></a></h4><p>Dump information about the Java object graph of an Android app. (Available on Android 11+)</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;android.java_hprof&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        target_buffer: 0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        java_hprof_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            continuous_dump_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                dump_interval_ms: 1000</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="kernel-meminfo" tabindex="-1"><a class="header-anchor" href="#kernel-meminfo"><span>Kernel meminfo</span></a></h4><p>Polling of /proc/meminfo</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.sys_stats&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        sys_stats_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_period_ms: 1000</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_ACTIVE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_ACTIVE_ANON</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_ACTIVE_FILE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_ANON_PAGES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_BUFFERS</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_CACHED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_CMA_FREE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_CMA_TOTAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_COMMIT_LIMIT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_COMMITED_AS</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_DIRTY</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_INACTIVE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_INACTIVE_ANON</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_INACTIVE_FILE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_KERNEL_STACK</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_MAPPED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_MEM_AVAILABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_MEM_FREE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_MEM_TOTAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_MLOCKED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_PAGE_TABLES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_SHMEM</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_SLAB</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_SLAB_RECLAIMABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_SLAB_UNRECLAIMABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_SWAP_CACHED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_SWAP_FREE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_SWAP_TOTAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_UNEVICTABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_VMALLOC_CHUNK</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_VMALLOC_TOTAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_VMALLOC_USED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            meminfo_counters: MEMINFO_WRITEBACK</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="high-frequency-memory-events" tabindex="-1"><a class="header-anchor" href="#high-frequency-memory-events"><span>High-frequency memory events</span></a></h4><p>Allows to track short memory spikes and transitories through ftrace&#39;s mm_event, rss_stat and ion events. Available only on recent Android Q+ kernels</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.process_stats&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        target_buffer: 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        process_stats_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            scan_all_processes_on_start: true</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;mm_event/mm_event_record&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;kmem/rss_stat&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;ion/ion_stat&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;dmabuf_heap/dma_heap_stat&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;kmem/ion_heap_grow&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;kmem/ion_heap_shrink&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sched/sched_process_exit&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sched/sched_process_free&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;task/task_newtask&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;task/task_rename&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="low-memory-killer" tabindex="-1"><a class="header-anchor" href="#low-memory-killer"><span>Low memory killer</span></a></h4><p>Record LMK events. Works both with the old in-kernel LMK and the newer userspace lmkd. It also tracks OOM score adjustments.</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.process_stats&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        target_buffer: 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        process_stats_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            scan_all_processes_on_start: true</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;lowmemorykiller/lowmemory_kill&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;oom/oom_score_adj_update&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;ftrace/print&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_apps: &quot;lmkd&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="per-process-stats" tabindex="-1"><a class="header-anchor" href="#per-process-stats"><span>Per process stats</span></a></h4><p>Periodically samples all processes in the system tracking: their thread list, memory counters (RSS, swap and other /proc/status counters) and oom_score_adj.</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.process_stats&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        target_buffer: 1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        process_stats_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            proc_stats_poll_ms: 1000</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="virtual-memory-stats" tabindex="-1"><a class="header-anchor" href="#virtual-memory-stats"><span>Virtual memory stats</span></a></h4><p>Periodically polls virtual memory stats from /proc/vmstat. Allows to gather statistics about swap, eviction, compression and pagecache efficiency</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.sys_stats&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        sys_stats_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_period_ms: 1000</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_ALLOCSTALL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_ALLOCSTALL_DMA</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_ALLOCSTALL_MOVABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_ALLOCSTALL_NORMAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_COMPACT_DAEMON_FREE_SCANNED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_COMPACT_DAEMON_MIGRATE_SCANNED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_COMPACT_DAEMON_WAKE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_COMPACT_FAIL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_COMPACT_FREE_SCANNED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_COMPACT_ISOLATED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_COMPACT_MIGRATE_SCANNED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_COMPACT_STALL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_COMPACT_SUCCESS</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_DROP_PAGECACHE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_DROP_SLAB</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_KSWAPD_HIGH_WMARK_HIT_QUICKLY</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_KSWAPD_INODESTEAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_KSWAPD_LOW_WMARK_HIT_QUICKLY</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ACTIVE_ANON</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ACTIVE_FILE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ALLOC_BATCH</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ANON_PAGES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ANON_TRANSPARENT_HUGEPAGES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_BOUNCE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_DIRTIED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_DIRTY</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_DIRTY_BACKGROUND_THRESHOLD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_DIRTY_THRESHOLD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_FASTRPC</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_FILE_PAGES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_FREE_CMA</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_FREE_PAGES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_GPU_HEAP</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_INACTIVE_ANON</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_INACTIVE_FILE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_INDIRECTLY_RECLAIMABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ION_HEAP</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ION_HEAP_POOL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ISOLATED_ANON</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ISOLATED_FILE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_KERNEL_MISC_RECLAIMABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_KERNEL_STACK</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_MAPPED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_MLOCK</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_OVERHEAD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_PAGE_TABLE_PAGES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_PAGES_SCANNED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_SHADOW_CALL_STACK_BYTES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_SHMEM</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_SHMEM_HUGEPAGES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_SHMEM_PMDMAPPED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_SLAB_RECLAIMABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_SLAB_UNRECLAIMABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_SWAPCACHE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_UNEVICTABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_UNRECLAIMABLE_PAGES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_UNSTABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_VMSCAN_IMMEDIATE_RECLAIM</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_VMSCAN_WRITE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_WRITEBACK</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_WRITEBACK_TEMP</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_WRITTEN</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ZONE_ACTIVE_ANON</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ZONE_ACTIVE_FILE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ZONE_INACTIVE_ANON</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ZONE_INACTIVE_FILE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ZONE_UNEVICTABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ZONE_WRITE_PENDING</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_NR_ZSPAGES</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_OOM_KILL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PAGEOUTRUN</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGACTIVATE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGALLOC_DMA</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGALLOC_MOVABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGALLOC_NORMAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGDEACTIVATE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGFAULT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGFREE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGINODESTEAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGLAZYFREE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGLAZYFREED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGMAJFAULT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGMIGRATE_FAIL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGMIGRATE_SUCCESS</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGPGIN</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGPGOUT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGPGOUTCLEAN</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGREFILL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGREFILL_DMA</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGREFILL_MOVABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGREFILL_NORMAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGROTATED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSCAN_DIRECT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSCAN_DIRECT_DMA</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSCAN_DIRECT_MOVABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSCAN_DIRECT_NORMAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSCAN_DIRECT_THROTTLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSCAN_KSWAPD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSCAN_KSWAPD_DMA</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSCAN_KSWAPD_MOVABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSCAN_KSWAPD_NORMAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSKIP_DMA</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSKIP_MOVABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSKIP_NORMAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSTEAL_DIRECT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSTEAL_DIRECT_DMA</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSTEAL_DIRECT_MOVABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSTEAL_DIRECT_NORMAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSTEAL_KSWAPD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSTEAL_KSWAPD_DMA</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSTEAL_KSWAPD_MOVABLE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PGSTEAL_KSWAPD_NORMAL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PSWPIN</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_PSWPOUT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_SLABS_SCANNED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_SWAP_RA</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_SWAP_RA_HIT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_UNEVICTABLE_PGS_CLEARED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_UNEVICTABLE_PGS_CULLED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_UNEVICTABLE_PGS_MLOCKED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_UNEVICTABLE_PGS_MUNLOCKED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_UNEVICTABLE_PGS_RESCUED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_UNEVICTABLE_PGS_SCANNED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_UNEVICTABLE_PGS_STRANDED</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_WORKINGSET_ACTIVATE</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_WORKINGSET_NODERECLAIM</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            vmstat_counters: VMSTAT_WORKINGSET_REFAULT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="android-apps-svcs" tabindex="-1"><a class="header-anchor" href="#android-apps-svcs"><span>Android apps &amp; svcs</span></a></h3><h4 id="atrace-userspace-annotations-enables-c-java-codebase-annotations-atrace-begin-os-trace" tabindex="-1"><a class="header-anchor" href="#atrace-userspace-annotations-enables-c-java-codebase-annotations-atrace-begin-os-trace"><span>Atrace userspace annotations: Enables C++ / Java codebase annotations (ATRACE_BEGIN() / os.Trace())</span></a></h4><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 7168</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 1024</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;ftrace/print&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_apps: &quot;*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 7168</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 1024</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;ftrace/print&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;am&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;adb&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;aidl&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;dalvik&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;audio&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;binder_lock&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;binder_driver&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;bionic&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;camera&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;database&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;gfx&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;hal&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;input&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;network&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;nnapi&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;pm&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;power&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;rs&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;res&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;rro&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;sm&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;ss&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;vibrator&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;video&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;view&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_categories: &quot;webview&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            atrace_apps: &quot;*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="event-log-logcat" tabindex="-1"><a class="header-anchor" href="#event-log-logcat"><span>Event log (logcat)</span></a></h4><p>Streams the event log into the trace. If no buffer filter is specified, all buffers are selected.</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 7168</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 1024</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;android.log&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        android_log_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            log_ids: LID_EVENTS</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            log_ids: LID_CRASH</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            log_ids: LID_KERNEL</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            log_ids: LID_DEFAULT</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            log_ids: LID_RADIO</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            log_ids: LID_SECURITY</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            log_ids: LID_STATS</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            log_ids: LID_SYSTEM</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="frame-timeline" tabindex="-1"><a class="header-anchor" href="#frame-timeline"><span>Frame timeline</span></a></h4><p>Records expected/actual frame timings from surface_flinger. Requires Android 12 (S) or above.</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;android.surfaceflinger.frametimeline&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="game-intervention-list" tabindex="-1"><a class="header-anchor" href="#game-intervention-list"><span>Game intervention list</span></a></h4><p>List game modes and interventions. Requires Android 13 (T) or above.</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;android.game_interventions&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="advanced-settings" tabindex="-1"><a class="header-anchor" href="#advanced-settings"><span>Advanced settings</span></a></h3><h4 id="advanced-ftrace-config" tabindex="-1"><a class="header-anchor" href="#advanced-ftrace-config"><span>Advanced ftrace config</span></a></h4><p>Enable individual events and tune the kernel-tracing (ftrace) module. The events enabled here are in addition to those from enabled by other probes.</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> perfetto</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --txt</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/misc/perfetto-traces/trace</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 63488</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buffers: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    size_kb: 2048</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fill_policy: DISCARD</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">data_sources: {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        ftrace_config {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;binder/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;block/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;clk/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;ext4/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;f2fs/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;fastrpc/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;i2c/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;irq/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;kmem/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;memory_bus/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;mmc/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;oom/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;power/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;regulator/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sched/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sync/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;task/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;vmscan/*&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ftrace_events: &quot;sched/sched_blocked_reason&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            buffer_size_kb: 512</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            drain_period_ms: 100</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            symbolize_ksyms: true</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">duration_ms: 10000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="recording-a-trace-recording-a-trace-through-the-cmdline" tabindex="-1"><a class="header-anchor" href="#recording-a-trace-recording-a-trace-through-the-cmdline"><span>Recording a trace - Recording a trace through the cmdline</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>curl -O https://raw.githubusercontent.com/google/perfetto/master/tools/record_android_trace</span></span>
<span class="line"><span>python3 record_android_trace -o trace_file.perfetto-trace -t 10s -b 32mb sched freq idle am wm gfx view binder_driver hal dalvik camera input res memory</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"></span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # python3 .\\record_android_trace --list</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         gfx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Graphics</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       input</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Input</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        view</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> View</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> System</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     webview</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WebView</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          wm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Window</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Manager</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          am</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Activity</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Manager</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          sm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Sync</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Manager</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       audio</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Audio</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       video</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Video</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      camera</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Camera</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         hal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Hardware</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Modules</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         res</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Resource</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Loading</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      dalvik</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Dalvik</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VM</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          rs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RenderScript</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      bionic</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Bionic</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Library</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       power</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Power</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Management</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          pm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Package</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Manager</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          ss</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> System</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    database</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Database</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Network</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ADB</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    vibrator</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Vibrator</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        aidl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> AIDL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> calls</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       nnapi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NNAPI</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         rro</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Runtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Resource</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Overlay</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         pdx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PDX</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> services</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       sched</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Scheduling</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         irq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IRQ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Events</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         i2c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> I2C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Events</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        freq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Frequency</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        idle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Idle</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> I/O</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        sync</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Synchronization</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">       workq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Workqueues</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  memreclaim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Reclaim</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  regulators</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Voltage</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Current</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Regulators</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  binder_driver</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Binder</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> driver</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  binder_lock</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Binder</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> global</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lock</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> trace</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   pagecache</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Page</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cache</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Memory</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     thermal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Thermal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> event</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         gfx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Graphics</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (HAL)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">         ion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ION</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> allocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (HAL)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">full</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">python3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> record_android_trace</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> trace_file.perfetto-trace</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 128mb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gfx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> input</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> view</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> webview</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> am</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> audio</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> video</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> camera</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> res</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dalvik</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bionic</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> power</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> database</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vibrator</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> aidl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nnapi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rro</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pdx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sched</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> irq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> i2c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> freq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> idle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sync</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> workq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> memreclaim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> regulators</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> binder_driver</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> binder_lock</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pagecache</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> thermal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gfx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ion</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">commmon</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">python3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> record_android_trace</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> trace_file.perfetto-trace</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 32mb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sched</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> freq</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> idle</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> am</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gfx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> view</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> binder_driver</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dalvik</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> camera</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> input</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> res</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> memory</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-config line-numbers-mode" data-highlighter="shiki" data-ext="config" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>buffers {</span></span>
<span class="line"><span>  size_kb: 102400</span></span>
<span class="line"><span>  fill_policy: RING_BUFFER</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>data_sources {</span></span>
<span class="line"><span>  config {</span></span>
<span class="line"><span>    name: &quot;linux.ftrace&quot;</span></span>
<span class="line"><span>    ftrace_config {</span></span>
<span class="line"><span>      # Enables specific system events tags.</span></span>
<span class="line"><span>      atrace_categories: &quot;am&quot;</span></span>
<span class="line"><span>      atrace_categories: &quot;pm&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      # Enables events for a specific app.</span></span>
<span class="line"><span>      atrace_apps: &quot;com.google.android.apps.docs&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>      # Enables all events for all apps.</span></span>
<span class="line"><span>      atrace_apps: &quot;*&quot;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./record_android_trace</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config.pbtx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> trace_file.perfetto-trace</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h1 id="reference" tabindex="-1"><a class="header-anchor" href="#reference"><span>Reference</span></a></h1><ul><li>https://juejin.cn/post/7119764025210044423</li><li>https://docs.kernel.org/trace/ftrace.html</li><li>https://perfetto.dev/docs/quickstart/android-tracing</li><li>https://perfetto.dev/docs/concepts/service-model</li><li>https://perfetto.dev/docs/reference/perfetto-cli</li><li>https://developer.android.com/studio/releases/platform-tools</li><li>https://perfetto.dev/docs/concepts/config</li></ul>`,86)]))}const d=i(e,[["render",p],["__file","perfetto-03-quickstart-record-traces-on-android.html.vue"]]),r=JSON.parse('{"path":"/learn-android/perfetto/perfetto-03-quickstart-record-traces-on-android.html","title":"Perfetto - 03 - Quickstart: Record traces on Android","lang":"zh-CN","frontmatter":{"article":false,"description":"Perfetto - 03 - Quickstart: Record traces on Android Perfetto允许你从各种数据源（例如通过ftrace记录内核调度信息，通过atrace记录用户空间的数据）收集Android设备的系统级性能跟踪数据。 Starting the tracing services Perfetto基于Androi...","head":[["meta",{"property":"og:url","content":"https://github.com/biezhihua/learn-android/perfetto/perfetto-03-quickstart-record-traces-on-android.html"}],["meta",{"property":"og:site_name","content":"biezhihua的日常"}],["meta",{"property":"og:title","content":"Perfetto - 03 - Quickstart: Record traces on Android"}],["meta",{"property":"og:description","content":"Perfetto - 03 - Quickstart: Record traces on Android Perfetto允许你从各种数据源（例如通过ftrace记录内核调度信息，通过atrace记录用户空间的数据）收集Android设备的系统级性能跟踪数据。 Starting the tracing services Perfetto基于Androi..."}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-08T14:25:34.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-08T14:25:34.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"Perfetto - 03 - Quickstart: Record traces on Android\\",\\"description\\":\\"Perfetto - 03 - Quickstart: Record traces on Android Perfetto允许你从各种数据源（例如通过ftrace记录内核调度信息，通过atrace记录用户空间的数据）收集Android设备的系统级性能跟踪数据。 Starting the tracing services Perfetto基于Androi...\\"}"]]},"git":{"createdTime":1679327669000,"updatedTime":1741443934000,"contributors":[{"name":"biezhihua","username":"biezhihua","email":"biezhihua@gmail.com","commits":7,"url":"https://github.com/biezhihua"}]},"readingTime":{"minutes":6.91,"words":2074},"filePathRelative":"learn-android/perfetto/perfetto-03-quickstart-record-traces-on-android.md","localizedDate":"2023年3月20日","excerpt":"","autoDesc":true}');export{d as comp,r as data};
