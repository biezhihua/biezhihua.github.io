import{_ as s,Y as e,Z as n,a2 as a}from"./framework-301d0703.js";const i={},l=a(`<h1 id="solution-install-diesel-cli-for-rust-in-windwos-11" tabindex="-1"><a class="header-anchor" href="#solution-install-diesel-cli-for-rust-in-windwos-11" aria-hidden="true">#</a> Solution | Install Diesel-Cli For Rust In Windwos 11</h1><h2 id="install-mysql-for-windows-11" tabindex="-1"><a class="header-anchor" href="#install-mysql-for-windows-11" aria-hidden="true">#</a> Install MySQL for Windows 11</h2><p>install exe: https://dev.mysql.com/downloads/installer/</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>setx MYSQLCLIENT_LIB_DIR <span class="token string">&quot;C:\\Program Files\\MySQL\\MySQL Server 8.0\\lib&quot;</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="install-postgresql-for-windows-11" tabindex="-1"><a class="header-anchor" href="#install-postgresql-for-windows-11" aria-hidden="true">#</a> Install PostgreSQL for Windows 11</h2><p>install exe: https://www.postgresql.org/download/windows/</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>setx PQ_LIB_DIR <span class="token string">&quot;C:\\Program Files\\PostgreSQL<span class="token entity" title="\\15">\\15</span>\\lib&quot;</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="install-sqlite-for-windwos-11" tabindex="-1"><a class="header-anchor" href="#install-sqlite-for-windwos-11" aria-hidden="true">#</a> Install Sqlite for Windwos 11</h2><p>install: https://www.sqlite.org/download.html</p><ul><li>https://www.c-sharpcorner.com/article/how-to-install-sqlite-on-windows-11/</li></ul><h2 id="install-diesel-cli" tabindex="-1"><a class="header-anchor" href="#install-diesel-cli" aria-hidden="true">#</a> Install Diesel-Cli</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cargo</span> <span class="token function">install</span> diesel_cli   
<span class="token punctuation">..</span><span class="token punctuation">..</span>

Finished release <span class="token punctuation">[</span>optimized<span class="token punctuation">]</span> target<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">20</span>.59s
Replacing C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>biezhihua<span class="token punctuation">\\</span>.cargo<span class="token punctuation">\\</span>bin<span class="token punctuation">\\</span>diesel.exe
Replaced package <span class="token variable"><span class="token variable">\`</span>diesel_cli v2.1.0<span class="token variable">\`</span></span> with <span class="token variable"><span class="token variable">\`</span>diesel_cli v2.1.0<span class="token variable">\`</span></span> <span class="token punctuation">(</span>executable <span class="token variable"><span class="token variable">\`</span>diesel.exe<span class="token variable">\`</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="how-to-fix-link-fatal-error-lnk1181-cannot-open-input-file-sqlite3-lib" tabindex="-1"><a class="header-anchor" href="#how-to-fix-link-fatal-error-lnk1181-cannot-open-input-file-sqlite3-lib" aria-hidden="true">#</a> How to fix - LINK : fatal error LNK1181: cannot open input file &#39;sqlite3.lib&#39;</h2><h3 id="build-sqlite3-lib" tabindex="-1"><a class="header-anchor" href="#build-sqlite3-lib" aria-hidden="true">#</a> build sqlite3.lib</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>How to build SQLite3 .lib file on Windows 10

Download source from source (https://www.sqlite.org/download.html)

For example: source https://www.sqlite.org/2020/sqlite-amalgamation-3310100.zip

Download binary from binary

For example: binary https://www.sqlite.org/2020/sqlite-dll-win64-x64-3310100.zip

Extract both archives to the same directory

Open Developer Command Prompt for VS 2017 by typing Developer Command in Windows Search

Go to directory where you&#39;ve extracted source code and binary files (via opened cmd)

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Run</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>lib /DEF:sqlite3.def /OUT:sqlite3.lib /MACHINE:x64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="set-global-sqlite3-lib-dir" tabindex="-1"><a class="header-anchor" href="#set-global-sqlite3-lib-dir" aria-hidden="true">#</a> set global SQLITE3_LIB_DIR</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>setx SQLITE3_LIB_DIR <span class="token string">&quot;D:\\App\\sqlite3&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Run</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>C:/Users/biezhihua/.cargo/bin/cargo.exe build <span class="token parameter variable">--color</span><span class="token operator">=</span>always --message-format<span class="token operator">=</span>json-diagnostic-rendered-ansi <span class="token parameter variable">--package</span> diesel_demo_step_1_sqlite <span class="token parameter variable">--bin</span> show_posts
   Compiling proc-macro2 v1.0.66
   Compiling unicode-ident v1.0.11
   Compiling pkg-config v0.3.27
   Compiling <span class="token function">vcpkg</span> v0.2.15
   Compiling dotenvy v0.15.7
   Compiling libsqlite3-sys v0.26.0
   Compiling quote v1.0.32
   Compiling syn v2.0.28
   Compiling diesel_table_macro_syntax v0.1.0
   Compiling diesel_derives v2.1.0
   Compiling diesel v2.1.0
   Compiling diesel_demo_step_1_sqlite v0.1.0 <span class="token punctuation">(</span>D:<span class="token punctuation">\\</span>Projects<span class="token punctuation">\\</span>github<span class="token punctuation">\\</span>diesel<span class="token punctuation">\\</span>examples<span class="token punctuation">\\</span>sqlite<span class="token punctuation">\\</span>getting_started_step_1<span class="token punctuation">)</span>
    Finished dev <span class="token punctuation">[</span>unoptimized + debuginfo<span class="token punctuation">]</span> target<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">10</span>.76s
Process finished with <span class="token builtin class-name">exit</span> code <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>https://github.com/dlang-community/d2sqlite3/issues/49</li><li>https://stackoverflow.com/questions/76349657/what-is-the-missing-sqlite3-lib-file-when-trying-to-run-rustqlite-with-precomp</li><li>https://blog.itdevwu.com/post/915/</li></ul><h2 id="how-to-fix-exit-code-0xc0000135-status-dll-not-found" tabindex="-1"><a class="header-anchor" href="#how-to-fix-exit-code-0xc0000135-status-dll-not-found" aria-hidden="true">#</a> How to fix - exit code: 0xc0000135, STATUS_DLL_NOT_FOUND</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/examples/sqlite/getting_started_step_1 ❯ <span class="token builtin class-name">echo</span> <span class="token variable">$LASTEXITCODE</span>
<span class="token parameter variable">-1073741515</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/examples/postgres/getting_started_step_1 ❯ <span class="token function">cargo</span> run
    Finished dev <span class="token punctuation">[</span>unoptimized + debuginfo<span class="token punctuation">]</span> target<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token number">0</span>.01s
     Running <span class="token variable"><span class="token variable">\`</span>target<span class="token punctuation">\\</span>debug<span class="token punctuation">\\</span>show_posts.exe<span class="token variable">\`</span></span>
error: process didn&#39;t <span class="token builtin class-name">exit</span> successfully: <span class="token variable"><span class="token variable">\`</span>target<span class="token punctuation">\\</span>debug<span class="token punctuation">\\</span>show_posts.exe<span class="token variable">\`</span></span> <span class="token punctuation">(</span>exit code: 0xc0000135, STATUS_DLL_NOT_FOUND<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="solution-1" tabindex="-1"><a class="header-anchor" href="#solution-1" aria-hidden="true">#</a> Solution 1</h3><p>copy libiconv-2.dll libintl-9.dll sqlite3.dll sqlite3.lib to your project root directory.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/examples/sqlite/getting_started_step_1 ❯ diesel setup                     <span class="token number">26</span>% <span class="token number">18</span>/68GB
Creating database: db.sqlite3
Running migration 20170124012402_create_posts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Download gettext0.21-iconv1.16-shared-64 from http://mlocati.github.io/articles/gettext-iconv-windows.html
Extract the ZIP. It will contain, inter alia, libintl-8.dll which is newer than libintl-9.dll
Rename libintl-8.dll to libintl-9.dll
Place your new libintl-9.dll in the same directory as your executable (e.g., target\\debug) to get the fixed libintl to link correctly. If you just copy it and don&#39;t rename it, it will link to the broken libintl-9.dll in the Postgres install directory.
I asked if we could expect a non-broken libintl DLL in upcoming versions (after they figure out the performance regression). I don&#39;t know yet, but at least we have a fix.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="solution-2" tabindex="-1"><a class="header-anchor" href="#solution-2" aria-hidden="true">#</a> Solution 2</h3><ul><li>Add <code>D:\\App\\sqlite3</code> and <code>D:\\App\\gettext0.21-iconv1.16-shared-64\\bin</code> to your PATH.</li><li>Restart your PowerShell</li><li>Build your project</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>PowerShell <span class="token number">7.3</span>.6
 <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/examples/sqlite/getting_started_step_1 ❯ diesel setup
 <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/examples/sqlite/getting_started_step_1 ❯ diesel setup                     <span class="token number">26</span>% <span class="token number">18</span>/68GB
Creating migrations directory at: D:<span class="token punctuation">\\</span>Projects<span class="token punctuation">\\</span>github<span class="token punctuation">\\</span>examples<span class="token punctuation">\\</span>sqlite<span class="token punctuation">\\</span>getting_started_step_1<span class="token punctuation">\\</span>migrations
Creating database: db.sqlite3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="references" tabindex="-1"><a class="header-anchor" href="#references" aria-hidden="true">#</a> References</h3><ul><li>https://github.com/diesel-rs/diesel/issues/2015#issuecomment-474172079</li><li>https://github.com/diesel-rs/diesel/discussions/2947</li></ul><h2 id="how-to-fix-unsupported-type-serial" tabindex="-1"><a class="header-anchor" href="#how-to-fix-unsupported-type-serial" aria-hidden="true">#</a> How to fix - Unsupported type: serial</h2><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code># sqlite
CREATE TABLE posts (
id INTEGER PRIMARY KEY,
title VARCHAR NOT NULL,
body TEXT NOT NULL,
published BOOLEAN NOT NULL DEFAULT FALSE
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code># postgreSQL
CREATE TABLE posts (
id SERIAL PRIMARY KEY,
title VARCHAR NOT NULL,
body TEXT NOT NULL,
published BOOLEAN NOT NULL DEFAULT FALSE
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>https://github.com/diesel-rs/diesel/issues/427</li></ul><h2 id="demo" tabindex="-1"><a class="header-anchor" href="#demo" aria-hidden="true">#</a> Demo</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># create database sqlite</span>
 <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/diesel_demo on master ≢  ?3 ❯ diesel setup
Creating migrations directory at: D:<span class="token punctuation">\\</span>Projects<span class="token punctuation">\\</span>github<span class="token punctuation">\\</span>diesel_demo<span class="token punctuation">\\</span>migrations
Creating database: db.sqlite3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/diesel_demo on master ≢  ?7 ❯ diesel migration generate create_posts    <span class="token number">23</span>% <span class="token number">15</span>/68GB
Creating migrations<span class="token punctuation">\\</span><span class="token number">2023</span>-08-10-081601_create_posts<span class="token punctuation">\\</span>up.sql
Creating migrations<span class="token punctuation">\\</span><span class="token number">2023</span>-08-10-081601_create_posts<span class="token punctuation">\\</span>down.sql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># create tables in sqlite3</span>
<span class="token comment"># create schema</span>
 <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/diesel_demo on master ≢  ?7 ❯ diesel migration run                      <span class="token number">28</span>% <span class="token number">19</span>/68GB
Running migration <span class="token number">2023</span>-08-10-081601_create_posts
 <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/diesel_demo on master ≢  ?8 ❯ diesel migration run                      <span class="token number">28</span>% <span class="token number">19</span>/68GB
 <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/diesel_demo on master ≢  ?8 ❯      

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token variable">$biezhihua</span><span class="token builtin class-name">:</span> D:/Projects/github/diesel_demo on master ≢  ?8 ❯ diesel migration redo                     <span class="token number">28</span>% <span class="token number">19</span>/68GB
Rolling back migration <span class="token number">2023</span>-08-10-081601_create_posts
Running migration <span class="token number">2023</span>-08-10-081601_create_posts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="other" tabindex="-1"><a class="header-anchor" href="#other" aria-hidden="true">#</a> Other</h2><h3 id="what-is-setx-in-poweshell" tabindex="-1"><a class="header-anchor" href="#what-is-setx-in-poweshell" aria-hidden="true">#</a> what is setx in poweshell</h3><p>The Setx command is a PowerShell command used to set the value of an environment variable in the Windows operating system. It is similar to the set command in Windows Command Prompt but with the added capability of setting environment variables permanently.</p><p>When you set an environment variable using Setx, it will persist even after you close the PowerShell window. This is because the value is stored in the Windows registry. This can be useful for setting variables that are used by multiple applications or scripts.</p><p>Here is the basic syntax of the Setx command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Setx variable value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>For example, to set the JAVA_HOME environment variable to the path C:\\Program Files\\Java\\jdk1.8.0_111, you would use the following command:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Setx JAVA_HOME <span class="token string">&quot;C:\\Program Files\\Java\\jdk1.8.0_111&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>After running this command, the JAVA_HOME environment variable will be set permanently, and you can access it from any PowerShell or Command Prompt window on the system.</p>`,52),t=[l];function d(o,r){return e(),n("div",null,t)}const p=s(i,[["render",d],["__file","solution-rust-diesel-install-in-windows.html.vue"]]);export{p as default};
