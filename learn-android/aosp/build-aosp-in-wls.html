<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.74" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://github.com/biezhihua/learn-android/aosp/build-aosp-in-wls.html"><meta property="og:site_name" content="biezhihua的日常"><meta property="og:title" content="Android | AOSP | build aosp and run image to emulator in windows11"><meta property="og:description" content="Android | AOSP | build aosp and run image to emulator in windows11 environment 警告 注意：AOSP代码必须存放在WLS2内部，否则在Windows上会产生很多未保存文件，影响分支切换，代码更新。 wsl2 is migrated to another hard disk 可..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-03-08T14:25:34.000Z"><meta property="article:tag" content="android"><meta property="article:tag" content="aosp"><meta property="article:modified_time" content="2025-03-08T14:25:34.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Android | AOSP | build aosp and run image to emulator in windows11","image":[""],"dateModified":"2025-03-08T14:25:34.000Z","author":[{"@type":"Person","name":"别志华","url":"https://github.com/biezhihua"}]}</script><title>Android | AOSP | build aosp and run image to emulator in windows11 | biezhihua的日常</title><meta name="description" content="Android | AOSP | build aosp and run image to emulator in windows11 environment 警告 注意：AOSP代码必须存放在WLS2内部，否则在Windows上会产生很多未保存文件，影响分支切换，代码更新。 wsl2 is migrated to another hard disk 可...">
    <link rel="preload" href="/assets/style-Dh4i2S4S.css" as="style"><link rel="stylesheet" href="/assets/style-Dh4i2S4S.css">
    <link rel="modulepreload" href="/assets/app-D4ZtVCQo.js"><link rel="modulepreload" href="/assets/build-aosp-in-wls.html-DGFAEPtM.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-C4zV9WLq.js" as="script"><link rel="prefetch" href="/assets/about-me.html-Cf4h8-oS.js" as="script"><link rel="prefetch" href="/assets/index.html-DSoLJvLv.js" as="script"><link rel="prefetch" href="/assets/index.html-BdJmG5lO.js" as="script"><link rel="prefetch" href="/assets/difficult-sentence.html-BUWmaLKI.js" as="script"><link rel="prefetch" href="/assets/index.html-C0x6_oDj.js" as="script"><link rel="prefetch" href="/assets/Algorithms-analysis.html-DFFjCGnF.js" as="script"><link rel="prefetch" href="/assets/Algorithms-apply.html-Ca3rKdlm.js" as="script"><link rel="prefetch" href="/assets/Algorithms-math-base.html-Bp2qlH0J.js" as="script"><link rel="prefetch" href="/assets/Algorithms-thinking.html-CnGVX6s-.js" as="script"><link rel="prefetch" href="/assets/Algorithms.html-tS2QeMdZ.js" as="script"><link rel="prefetch" href="/assets/Data-structure.html-i7kM0SU4.js" as="script"><link rel="prefetch" href="/assets/index.html-Ba9BbidO.js" as="script"><link rel="prefetch" href="/assets/algorithms-graph.html-hIE3mu4G.js" as="script"><link rel="prefetch" href="/assets/android-逆向学习.html-EbakVp3T.js" as="script"><link rel="prefetch" href="/assets/滴水三期.html-vPRszmLL.js" as="script"><link rel="prefetch" href="/assets/计算机组成原理.html-Be6CFSqF.js" as="script"><link rel="prefetch" href="/assets/google-android-atrace.html-DqJRsoEz.js" as="script"><link rel="prefetch" href="/assets/google-android-graphics.html-XBVMB1gH.js" as="script"><link rel="prefetch" href="/assets/google-android-performance-overview.html-DdlMZTui.js" as="script"><link rel="prefetch" href="/assets/google-android-profiler.html-CNPt4zZD.js" as="script"><link rel="prefetch" href="/assets/google-android-system.html-Bc73HhZp.js" as="script"><link rel="prefetch" href="/assets/Assembly-Language-4th-Edition-Wang-Shuang.html-DGYFdekO.js" as="script"><link rel="prefetch" href="/assets/Learn-Reverse-Engineering.html-Dkhm6knZ.js" as="script"><link rel="prefetch" href="/assets/SELinux.html-JuvSx1EK.js" as="script"><link rel="prefetch" href="/assets/The-Self-cultivation-of-Programmers-Linking-Loading-and-Libraries.html-CV9Pnkw6.js" as="script"><link rel="prefetch" href="/assets/The-core-principles-of-reverse-engineering.html-C_XiPcYF.js" as="script"><link rel="prefetch" href="/assets/andorid-kernel.html-vOwDzy7_.js" as="script"><link rel="prefetch" href="/assets/android-aar-maven.html-CQQYJNdq.js" as="script"><link rel="prefetch" href="/assets/android-immersive.html-DKkAaWcv.js" as="script"><link rel="prefetch" href="/assets/android-ndk-r18b-toolchains.html-BZwiwNsp.js" as="script"><link rel="prefetch" href="/assets/android-notification-listener-service.html-DBI3rb2D.js" as="script"><link rel="prefetch" href="/assets/android-scrcpy.html-CrGriXxe.js" as="script"><link rel="prefetch" href="/assets/binary-and-hexadecimal-conversion-rules.html-geMoNnFi.js" as="script"><link rel="prefetch" href="/assets/color-difference-calculation.html-DlS36qSx.js" as="script"><link rel="prefetch" href="/assets/color.html-BcDmnFkU.js" as="script"><link rel="prefetch" href="/assets/gradle-commonh-command.html-CvGwNaoe.js" as="script"><link rel="prefetch" href="/assets/how-to-call-rust-function-from-harmony.html-PJYNLFBK.js" as="script"><link rel="prefetch" href="/assets/how-to-extension-method-for-option-in-rust.html-DsOL0Zvp.js" as="script"><link rel="prefetch" href="/assets/how-to-fix-waiting-for-file-lock-on-package-cache.html-Biw15_Zc.js" as="script"><link rel="prefetch" href="/assets/how-to-get-multi-option-value.html-B7jR-ZEU.js" as="script"><link rel="prefetch" href="/assets/how-to-ignore-warning-info-in-rust.html-CIGMzXEM.js" as="script"><link rel="prefetch" href="/assets/how-to-mount-remote-disk-to-local.html-BDCop1IG.js" as="script"><link rel="prefetch" href="/assets/how-to-process-common-error.html-D0YJEBTN.js" as="script"><link rel="prefetch" href="/assets/how-to-read-config-file-of-lib-project-in-rust.html-ClfWU_VA.js" as="script"><link rel="prefetch" href="/assets/how-to-use-result-process-option-in-rust.html-maX0lJxR.js" as="script"><link rel="prefetch" href="/assets/hypervisor.html-C8yic_v-.js" as="script"><link rel="prefetch" href="/assets/learn-compilers.html-B2yXhS-t.js" as="script"><link rel="prefetch" href="/assets/learn-ida.html-Cy82ndNB.js" as="script"><link rel="prefetch" href="/assets/learn-rust.html-TE61EtSZ.js" as="script"><link rel="prefetch" href="/assets/learn-stable-diffusion.html-CRgFCCXi.js" as="script"><link rel="prefetch" href="/assets/learn-ui-design-UI设计必修课-交互-架构-视觉UI设计教程.html-D2QZJkjj.js" as="script"><link rel="prefetch" href="/assets/learn-windows-linux.html-C0fBrFE5.js" as="script"><link rel="prefetch" href="/assets/lr1-detail.html-bsP3QLhm.js" as="script"><link rel="prefetch" href="/assets/lr1-detail2.html-BxtISUFv.js" as="script"><link rel="prefetch" href="/assets/lr1-detail3.html-DrXYHlcf.js" as="script"><link rel="prefetch" href="/assets/lr1-detail4.html-BDjJK3f2.js" as="script"><link rel="prefetch" href="/assets/lr1-产生式是如何定义的.html-VahRyyY2.js" as="script"><link rel="prefetch" href="/assets/lr1.html-DlAQqHPA.js" as="script"><link rel="prefetch" href="/assets/math-lerp.html-DTsniZLi.js" as="script"><link rel="prefetch" href="/assets/mhxy-navgiate-mode.html-CGBqsZow.js" as="script"><link rel="prefetch" href="/assets/mhxy-script.html-CAcRaXRB.js" as="script"><link rel="prefetch" href="/assets/pc-platform-arch-info.html-dWTGFuqe.js" as="script"><link rel="prefetch" href="/assets/pyhont-callable.html-CXTsTlRR.js" as="script"><link rel="prefetch" href="/assets/python-async-await-threading.html-OCXdxKis.js" as="script"><link rel="prefetch" href="/assets/python-async-await.html-Bmyou2nn.js" as="script"><link rel="prefetch" href="/assets/python-async-block-unblock.html-CKOvW4Et.js" as="script"><link rel="prefetch" href="/assets/python-async.html-B4bcvaiZ.js" as="script"><link rel="prefetch" href="/assets/python-dict.html-B9bziZKO.js" as="script"><link rel="prefetch" href="/assets/python-singleton-decorator.html-gBJ5dWhZ.js" as="script"><link rel="prefetch" href="/assets/python-singleton.html-DonymG_8.js" as="script"><link rel="prefetch" href="/assets/pythopn-opencv-hist.html-DMxy53Si.js" as="script"><link rel="prefetch" href="/assets/quickjs-eval-flags.html-CV57cvGS.js" as="script"><link rel="prefetch" href="/assets/quickjs-eval.html-BT1rju12.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-1.html-CIoIV4xA.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-2.html-Dp-m5wTC.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-3.html-C5s3afM8.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-windows-1.html-BWGplWHV.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-windows-2.html-C0MRgCQE.js" as="script"><link rel="prefetch" href="/assets/root-magisk-xposed-lsposed.html-BwZGiI27.js" as="script"><link rel="prefetch" href="/assets/solution-rust-diesel-install-in-windows.html-z3HOtLCm.js" as="script"><link rel="prefetch" href="/assets/using-opencv-4-surf-algorithm-feature-detection-quoc-bao-nguyen.html-Bw8aKlfB.js" as="script"><link rel="prefetch" href="/assets/vm1.html-HQDrQOug.js" as="script"><link rel="prefetch" href="/assets/vm2.html-CLS-jYkA.js" as="script"><link rel="prefetch" href="/assets/vm3.html-CVWCWpKv.js" as="script"><link rel="prefetch" href="/assets/vm4.html-TKm6E-Qj.js" as="script"><link rel="prefetch" href="/assets/vmx.html-F8tqsiOW.js" as="script"><link rel="prefetch" href="/assets/what-is-the-COM-in-windows.html-CnO3Ibwj.js" as="script"><link rel="prefetch" href="/assets/what-is-the-epoll.html-DI_wVGpX.js" as="script"><link rel="prefetch" href="/assets/what-is-the-file-descriptor.html-BRERWEeW.js" as="script"><link rel="prefetch" href="/assets/what-is-the-meaning-of-__no_mangle_.html-B_P_vw_p.js" as="script"><link rel="prefetch" href="/assets/what-is-the-meaning-of-__repr(C)_.html-DUVHPnRT.js" as="script"><link rel="prefetch" href="/assets/what-is-the-varargs-in-python.html-DkGHyf08.js" as="script"><link rel="prefetch" href="/assets/what-the-different-self-and-Self-in-Rust.html-BUQhz4B8.js" as="script"><link rel="prefetch" href="/assets/windows-SystemFirmwareTable.html-lPKJmx1N.js" as="script"><link rel="prefetch" href="/assets/windows-dev.html-pZmjLgoA.js" as="script"><link rel="prefetch" href="/assets/app-launch.html-B2uiSRu3.js" as="script"><link rel="prefetch" href="/assets/extend.html-Bhb3cDLF.js" as="script"><link rel="prefetch" href="/assets/surfaceflinger-init.html-BslSBihM.js" as="script"><link rel="prefetch" href="/assets/surfaceflinger-vsync.html-BwCPt-F2.js" as="script"><link rel="prefetch" href="/assets/zygote.html-Bl8-8maX.js" as="script"><link rel="prefetch" href="/assets/perfetto-00-outline.html-hzvcH96z.js" as="script"><link rel="prefetch" href="/assets/perfetto-01-overview.html-CdpIp4kG.js" as="script"><link rel="prefetch" href="/assets/perfetto-02-tracing-101.html-Brj2xwGg.js" as="script"><link rel="prefetch" href="/assets/perfetto-03-quickstart-record-traces-on-android.html-VeOAsvu1.js" as="script"><link rel="prefetch" href="/assets/perfetto-06-quickstart-sql-analysis-and-metrics copy.html-D_JciCmg.js" as="script"><link rel="prefetch" href="/assets/perfetto-07-quickstart-trace-conversion copy.html-C8tBiL-K.js" as="script"><link rel="prefetch" href="/assets/perfetto-08-quickstart-heap-profiling copy.html-QJr-bM3A.js" as="script"><link rel="prefetch" href="/assets/perfetto-09-quickstart-callstack-sampling-on-android copy.html-D9i1rg8U.js" as="script"><link rel="prefetch" href="/assets/perfetto-10-faq.html-BhxYDDVK.js" as="script"><link rel="prefetch" href="/assets/perfetto-11-case-stuides-android-boot-tracing.html-CkjSLP-_.js" as="script"><link rel="prefetch" href="/assets/perfetto-12-data-sources-debugging-memory-usage.html-DJ62Ii5z.js" as="script"><link rel="prefetch" href="/assets/perfetto-13-data-sources-memory-counter-and-events.html-BzGFd-f6.js" as="script"><link rel="prefetch" href="/assets/perfetto-14-data-sources-memory-heap-profiler.html-D_7S8bH-.js" as="script"><link rel="prefetch" href="/assets/perfetto-15-data-sources-java-heap-dumps.html-Bzff_pzf.js" as="script"><link rel="prefetch" href="/assets/perfetto-16-data-sources-cpu-scheduling-events.html-P42wxRp-.js" as="script"><link rel="prefetch" href="/assets/perfetto-17-data-sources-system-calls.html-B7GNWg5J.js" as="script"><link rel="prefetch" href="/assets/perfetto-18-data-sources-cpu-frequency-scaling.html-fRfoZFFt.js" as="script"><link rel="prefetch" href="/assets/perfetto-21-android-system-android-game-intervention-list.html-B58U3uVN.js" as="script"><link rel="prefetch" href="/assets/perfetto-22-data-sources-android-system-atrace-instrumentation.html-CWnpcZq8.js" as="script"><link rel="prefetch" href="/assets/perfetto-23-data-sources-android-system-android-log.html-j1OmiyjF.js" as="script"><link rel="prefetch" href="/assets/perfetto-24-data-sources-android-system-android-jank.html-DzQo45XX.js" as="script"><link rel="prefetch" href="/assets/perfetto-25-app-instrumentation-tracing-sdk.html-6zlcqJyF.js" as="script"><link rel="prefetch" href="/assets/perfetto-28-trace-analysis-trace-processor.html-DVad_rJN.js" as="script"><link rel="prefetch" href="/assets/perfetto-41-core-concepts-trace-configuration.html-B1WV4IGd.js" as="script"><link rel="prefetch" href="/assets/perfetto-42-core-concepts-buffers-and-dataflow.html-26b83XEG.js" as="script"><link rel="prefetch" href="/assets/perfetto-43-core-concepts-service-model.html-Dh8rF9pR.js" as="script"><link rel="prefetch" href="/assets/fluency-00-outline.html-9v9sLsZ8.js" as="script"><link rel="prefetch" href="/assets/fluency-01-overview.html-D18RvKql.js" as="script"><link rel="prefetch" href="/assets/fluency-02-fps.html-DqrXg_fw.js" as="script"><link rel="prefetch" href="/assets/fluency-03-observability-technology.html-BCQ6eBBD.js" as="script"><link rel="prefetch" href="/assets/fluency-04-tracing.html-BxBqkKs3.js" as="script"><link rel="prefetch" href="/assets/fluency-05-tools-perfetto.html-B-lGDNfr.js" as="script"><link rel="prefetch" href="/assets/fluency-06-tools-android-profiler.html-CFGSLilW.js" as="script"><link rel="prefetch" href="/assets/fluency-07-perfetto-android-overview.html-Bd8tk33b.js" as="script"><link rel="prefetch" href="/assets/fluency-08-perfetto-android-graphics-vsync.html-DZABqd5i.js" as="script"><link rel="prefetch" href="/assets/index.html-DutdUir0.js" as="script"><link rel="prefetch" href="/assets/native-crash.html-BmBhpMy2.js" as="script"><link rel="prefetch" href="/assets/overview.html-Dlvuir73.js" as="script"><link rel="prefetch" href="/assets/index.html-CNlFo6UT.js" as="script"><link rel="prefetch" href="/assets/6.006 Introduction To Algorithms.html-B3-nDJM-.js" as="script"><link rel="prefetch" href="/assets/6.042J Undergraduate Mathematics For Computer Science.html-BBcdsZ4L.js" as="script"><link rel="prefetch" href="/assets/6.046J Design And Analysis Of Algorithms.html-CQjMZs1E.js" as="script"><link rel="prefetch" href="/assets/6.828 Operating System Engineering.html-CWVZX5x2.js" as="script"><link rel="prefetch" href="/assets/6.851 Advanced Data Structures.html-Cx138J4U.js" as="script"><link rel="prefetch" href="/assets/6.854J Advanced Alorithms.html-DCkTgsc7.js" as="script"><link rel="prefetch" href="/assets/Lesson-01-A-private-conversation.html-CbRb8Rbd.js" as="script"><link rel="prefetch" href="/assets/Lesson-02-Breakfast-or-lunch.html-DbhUBok2.js" as="script"><link rel="prefetch" href="/assets/Lesson-03-Please-send-me-a-card.html-BJT5zzOQ.js" as="script"><link rel="prefetch" href="/assets/Lesson-04-An-exciting-trip.html-DhdFB_Ex.js" as="script"><link rel="prefetch" href="/assets/Lesson-05-No-Wrong-Numbers.html-BMJhHvd8.js" as="script"><link rel="prefetch" href="/assets/Lesson-06-Percy-Buttons.html-BCqndwar.js" as="script"><link rel="prefetch" href="/assets/Lesson-07-Too-late.html-XwbdL2oh.js" as="script"><link rel="prefetch" href="/assets/Lesson-08-The-best-and-the-worst.html-wkMJ2NW6.js" as="script"><link rel="prefetch" href="/assets/Lesson-09-A-cold-welcome.html-racwImmH.js" as="script"><link rel="prefetch" href="/assets/Lesson-10-Not-For-Jazz.html-BPYp2pbJ.js" as="script"><link rel="prefetch" href="/assets/Lesson-11-One-good-turn-deserves-another.html-ChoWMjP6.js" as="script"><link rel="prefetch" href="/assets/Lesson-12-Goodbye-and-good-luck.html-BM9Ipo0T.js" as="script"><link rel="prefetch" href="/assets/Lesson-13-The-Greenwood-Boys.html-41cUxrRn.js" as="script"><link rel="prefetch" href="/assets/Lesson-14-Do-you-speak-English.html-DZuyxMdf.js" as="script"><link rel="prefetch" href="/assets/Lesson-15-Good-news.html-BHAf66Kt.js" as="script"><link rel="prefetch" href="/assets/Lesson-16-A-polite-request.html-Cd7qpU7o.js" as="script"><link rel="prefetch" href="/assets/Lesson-17-Always-young.html-D4szTRp3.js" as="script"><link rel="prefetch" href="/assets/Lesson-18-He-often-does-this.html-B1dpmok4.js" as="script"><link rel="prefetch" href="/assets/Lesson-19-Sold-out.html-B-Hlhfb9.js" as="script"><link rel="prefetch" href="/assets/Lesson-20-One-man-in-a-boat.html-DihEj2YW.js" as="script"><link rel="prefetch" href="/assets/Lesson-21-Mad-or-not.html-BioUhRPe.js" as="script"><link rel="prefetch" href="/assets/Lesson-22-A-glass-envelope.html-0a1Acuiw.js" as="script"><link rel="prefetch" href="/assets/Lesson-23-A-new-house.html-YCmTTP1F.js" as="script"><link rel="prefetch" href="/assets/Lesson-24-If-could-be-worse.html-BPnk4Oj3.js" as="script"><link rel="prefetch" href="/assets/Lesson-25-Do-the-English-speak-English.html-DyNCBMjZ.js" as="script"><link rel="prefetch" href="/assets/Lesson-26-The-best-art-critics.html-BsiIqzR0.js" as="script"><link rel="prefetch" href="/assets/Lesson-27-A-wet-night.html-EfTiBh_R.js" as="script"><link rel="prefetch" href="/assets/Lesson-28-No-parking.html-DeoApbSf.js" as="script"><link rel="prefetch" href="/assets/Lesson-29-Taxi.html-CLRc52dF.js" as="script"><link rel="prefetch" href="/assets/Lesson-30-Football-or-polo.html-CtdmgM9e.js" as="script"><link rel="prefetch" href="/assets/Lesson-31-Success-story.html-DdPzJ2OY.js" as="script"><link rel="prefetch" href="/assets/Lesson-32-Shopping-make-easy.html-HJnOc7oC.js" as="script"><link rel="prefetch" href="/assets/Lesson-33-Out-of-the-darkness.html-BK2jZRQC.js" as="script"><link rel="prefetch" href="/assets/Lesson-34-Quick-work.html-CGTAFNkt.js" as="script"><link rel="prefetch" href="/assets/Lesson-35-Stop-thief.html-CIOyVBWt.js" as="script"><link rel="prefetch" href="/assets/Lesson-36-Across-the-Channel.html-DbCuFgkE.js" as="script"><link rel="prefetch" href="/assets/Lesson-37-The-Olympic-Games.html-D0OwY9oV.js" as="script"><link rel="prefetch" href="/assets/Lesson-38-Everything-except-the-weather.html-BsBA04K5.js" as="script"><link rel="prefetch" href="/assets/Lesson-39-Am-I-all-right.html-D5IpEe9x.js" as="script"><link rel="prefetch" href="/assets/Lesson-40-Food-and-talk.html-DloN_l-H.js" as="script"><link rel="prefetch" href="/assets/Lesson-41-Do-you-call-that-a-hat.html-C-ees3FI.js" as="script"><link rel="prefetch" href="/assets/Lesson-42-Not-very-musical.html-CLhHj1fg.js" as="script"><link rel="prefetch" href="/assets/Lesson-43-Over-the-South-Pole.html-NRLKx5xv.js" as="script"><link rel="prefetch" href="/assets/Lesson-44-Through-the-forest.html-DBpLf4Bz.js" as="script"><link rel="prefetch" href="/assets/Lesson-45-A-clear-conscience.html-BrQ2OQKA.js" as="script"><link rel="prefetch" href="/assets/Lesson-46-Expensive-and-uncomfortable.html-GyKrF5la.js" as="script"><link rel="prefetch" href="/assets/Lesson-47-A-thirsty-ghost.html-q7p1v1P4.js" as="script"><link rel="prefetch" href="/assets/Lesson-48-Did-you-want-to-tell-me-something.html-D5fAVaYw.js" as="script"><link rel="prefetch" href="/assets/Lesson-49-The-end-of-a-dream.html-JzlingEk.js" as="script"><link rel="prefetch" href="/assets/Lesson-50-Taken-for-a-ride.html-BI5k08Fy.js" as="script"><link rel="prefetch" href="/assets/Lesson-51-Reward-for-virtue.html-Dky9uUSN.js" as="script"><link rel="prefetch" href="/assets/Lesson-52-A-pretty-carpet.html-DC_-4koU.js" as="script"><link rel="prefetch" href="/assets/Lesson-53-Hot-snake.html-DqhR4mX-.js" as="script"><link rel="prefetch" href="/assets/Lesson-54-Sticky-fingers.html-dbKFz6Sw.js" as="script"><link rel="prefetch" href="/assets/Lesson-55-Not-a-gold-mine.html-BZlenJQr.js" as="script"><link rel="prefetch" href="/assets/Lesson-56-Faster-than-sound.html-Cs4BhQrZ.js" as="script"><link rel="prefetch" href="/assets/Lesson-57-Can-I-help-you_-madam.html-njtsf09Z.js" as="script"><link rel="prefetch" href="/assets/Lesson-58-A-blessing-in-disguise.html-Bw4nrES4.js" as="script"><link rel="prefetch" href="/assets/Lesson-59-In-or-out.html-CB9E11b1.js" as="script"><link rel="prefetch" href="/assets/Lesson-60-The-future.html-BwpwTlxL.js" as="script"><link rel="prefetch" href="/assets/Lesson-61-Trouble-with-the-Hubble.html-BlF03bWg.js" as="script"><link rel="prefetch" href="/assets/Lesson-62-After-the-fire.html-BGaFpsoE.js" as="script"><link rel="prefetch" href="/assets/Lesson-63-She-was-not-amused.html-CcHmoVfS.js" as="script"><link rel="prefetch" href="/assets/Lesson-64-The-Channel-Tunnel.html-B8AZRZ8H.js" as="script"><link rel="prefetch" href="/assets/Lesson-65-Jumbo-versus-the-police.html-7z_8Qpr6.js" as="script"><link rel="prefetch" href="/assets/Lesson-66-Sweet-as-honey.html-DtfCewhX.js" as="script"><link rel="prefetch" href="/assets/Lesson-67-Volcanoes.html-BW5z7NAm.js" as="script"><link rel="prefetch" href="/assets/Lesson-68-Persistent.html-fxjdhzE5.js" as="script"><link rel="prefetch" href="/assets/Lesson-69-But-not-murder.html-DCs2t3Fh.js" as="script"><link rel="prefetch" href="/assets/Lesson-70-Red-for-danger.html-D1VgPpR4.js" as="script"><link rel="prefetch" href="/assets/Lesson-71-A-famous-clock.html-Bjv4R_D0.js" as="script"><link rel="prefetch" href="/assets/Lesson-72-A-car-called-bluebird.html-b-fkH2pT.js" as="script"><link rel="prefetch" href="/assets/Lesson-73-The-record-holder.html-D3eKIQZr.js" as="script"><link rel="prefetch" href="/assets/Lesson-74-Out-of-the-limelight.html-BKY6_SjK.js" as="script"><link rel="prefetch" href="/assets/Lesson-75-SOS.html-5pGy-I08.js" as="script"><link rel="prefetch" href="/assets/Lesson-76-April-Fools-Day.html-B0hqT1U7.js" as="script"><link rel="prefetch" href="/assets/Lesson-77-Successful-operation.html-Cz7uJ2iD.js" as="script"><link rel="prefetch" href="/assets/Lesson-78-The-last-one.html-BYk49aJP.js" as="script"><link rel="prefetch" href="/assets/Lesson-79-By-air.html-BuLS-RuA.js" as="script"><link rel="prefetch" href="/assets/Lesson-80-The-Crystal-Palace.html-BIQh0b4-.js" as="script"><link rel="prefetch" href="/assets/Lesson-81-Escape.html-2YTj5Cqj.js" as="script"><link rel="prefetch" href="/assets/Lesson-82-Monster-or-fish.html-CafQpG8J.js" as="script"><link rel="prefetch" href="/assets/Lesson-83-After-the-elections.html-mzEI6dGM.js" as="script"><link rel="prefetch" href="/assets/Lesson-84-On-strike.html-DxXiFTUn.js" as="script"><link rel="prefetch" href="/assets/Lesson-85-Never-too-old-to-learn.html-qaqFK0ms.js" as="script"><link rel="prefetch" href="/assets/Lesson-86-Out-of-control.html-BhFkG9cq.js" as="script"><link rel="prefetch" href="/assets/Lesson-87-A-perfect-alibi.html-qjTwayhM.js" as="script"><link rel="prefetch" href="/assets/Lesson-88-Trapped-in-a-mine.html-D8EwMneE.js" as="script"><link rel="prefetch" href="/assets/Lesson-89-A-slip-of-the-tongue.html-D2Pa035-.js" as="script"><link rel="prefetch" href="/assets/Lesson-90-What-is-for-supper.html-2NR3wbMs.js" as="script"><link rel="prefetch" href="/assets/Lesson-91-Three-men-in-a-basket.html-B1wetG0G.js" as="script"><link rel="prefetch" href="/assets/Lesson-92-Asking-for-trouble.html-Cina1di1.js" as="script"><link rel="prefetch" href="/assets/Lesson-93-A-noble-gift.html-DwrHXxDo.js" as="script"><link rel="prefetch" href="/assets/Lesson-94-Future-champions.html-DBOYowka.js" as="script"><link rel="prefetch" href="/assets/Lesson-95-A-fantasy.html-BOfgOaan.js" as="script"><link rel="prefetch" href="/assets/Lesson-96-The-dead-return.html-BiaaVZYe.js" as="script"><link rel="prefetch" href="/assets/404.html-B31wzwOT.js" as="script"><link rel="prefetch" href="/assets/index.html-VHE6FLl6.js" as="script"><link rel="prefetch" href="/assets/index.html-D8TC0pRL.js" as="script"><link rel="prefetch" href="/assets/index.html-D4olCJ5i.js" as="script"><link rel="prefetch" href="/assets/index.html-DDI9Smw8.js" as="script"><link rel="prefetch" href="/assets/index.html-CamaCKp9.js" as="script"><link rel="prefetch" href="/assets/index.html-zUSHmJFo.js" as="script"><link rel="prefetch" href="/assets/index.html-BZ_WOyFF.js" as="script"><link rel="prefetch" href="/assets/index.html-DRE-DOHc.js" as="script"><link rel="prefetch" href="/assets/index.html-A0RrQaja.js" as="script"><link rel="prefetch" href="/assets/index.html-D1BapVIZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BVi462kd.js" as="script"><link rel="prefetch" href="/assets/index.html-By9XNdH1.js" as="script"><link rel="prefetch" href="/assets/index.html-DGsafpwZ.js" as="script"><link rel="prefetch" href="/assets/index.html-aM9Wz1Ts.js" as="script"><link rel="prefetch" href="/assets/index.html-DVUMXMTH.js" as="script"><link rel="prefetch" href="/assets/index.html-5ojDc-tG.js" as="script"><link rel="prefetch" href="/assets/index.html-B-6DwDJC.js" as="script"><link rel="prefetch" href="/assets/index.html-0h-pQqie.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-QXEOFQJV-CqhvpUNn.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container no-sidebar external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><img class="vp-nav-logo" src="/images/favicon-32x32.png" alt><!----><span class="vp-site-name hide-in-pad">biezhihua的日常</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="LeetCode"><!--[--><!---->LeetCode<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/learn-leetcode/" aria-label="学习大纲" iconsizing="both"><!---->学习大纲<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/learn-leetcode/Algorithms-analysis.html" aria-label="算法分析" iconsizing="both"><!---->算法分析<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/learn-leetcode/Algorithms-thinking.html" aria-label="算法思想" iconsizing="both"><!---->算法思想<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/learn-leetcode/Algorithms.html" aria-label="算法" iconsizing="both"><!---->算法<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/learn-leetcode/Data-structure.html" aria-label="数据结构" iconsizing="both"><!---->数据结构<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/learn-leetcode/Algorithms-math-base.html" aria-label="数学基础" iconsizing="both"><!---->数学基础<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/learn-leetcode/Algorithms-apply.html" aria-label="算法应用" iconsizing="both"><!---->算法应用<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="English"><!--[--><!---->English<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/learn-english/" aria-label="学习大纲" iconsizing="both"><!---->学习大纲<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/learn-english/NCE/" aria-label="新概念" iconsizing="both"><!---->新概念<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/learn-english/difficult-sentence.html" aria-label="疑难句分析" iconsizing="both"><!---->疑难句分析<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/about-me.html" aria-label="AboutMe" iconsizing="height"><!---->AboutMe<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Android | AOSP | build aosp and run image to emulator in windows11</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/biezhihua" target="_blank" rel="noopener noreferrer">别志华</a></span><span property="author" content="别志华"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2023年3月14日</span><meta property="datePublished" content="2023-03-14T05:02:56.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 18 分钟</span><meta property="timeRequired" content="PT18M"></span><!----><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color3" role>android</span><span class="page-tag-item color4" role>aosp</span><!--]--><meta property="keywords" content="android,aosp"></span></div><hr></div><!----><!----><div class="theme-hope-content" vp-content><h1 id="android-aosp-build-aosp-and-run-image-to-emulator-in-windows11" tabindex="-1"><a class="header-anchor" href="#android-aosp-build-aosp-and-run-image-to-emulator-in-windows11"><span>Android | AOSP | build aosp and run image to emulator in windows11</span></a></h1><h2 id="environment" tabindex="-1"><a class="header-anchor" href="#environment"><span>environment</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>// 宿主系统</span></span>
<span class="line"><span>Windows11</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 编译aosp系统</span></span>
<span class="line"><span>WSL2 - Ubuntu-18.04</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// aosp分支</span></span>
<span class="line"><span>android-13.0.0_r41</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container caution"><p class="hint-container-title">警告</p><p>注意：AOSP代码必须存放在WLS2内部，否则在Windows上会产生很多未保存文件，影响分支切换，代码更新。</p></div><h2 id="wsl2-is-migrated-to-another-hard-disk" tabindex="-1"><a class="header-anchor" href="#wsl2-is-migrated-to-another-hard-disk"><span>wsl2 is migrated to another hard disk</span></a></h2><p>可以通过以下步骤将 WSL2 迁移至其他硬盘：</p><ol><li>关闭 WSL2</li></ol><p>首先需要关闭正在运行的 WSL2，可以在 PowerShell 或 CMD 中输入以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --shutdown</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>导出 WSL2 镜像</li></ol><p>使用以下命令导出 WSL2 镜像，其中 <code>&lt;distribution&gt;</code> 是要导出的发行版的名称，<code>&lt;file&gt;</code> 是导出的文件名和路径：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --export</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">distributio</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">n&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">fil</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>删除旧的 WSL2 镜像</li></ol><p>在导出镜像之前，需要删除原来的 WSL2 镜像。可以通过以下命令列出已安装的 WSL2 发行版：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --list</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --verbose</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后通过以下命令删除指定的 WSL2 发行版：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --unregister</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">distributio</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">n&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="4"><li>导入 WSL2 镜像</li></ol><p>使用以下命令导入 WSL2 镜像，其中 <code>&lt;distribution&gt;</code> 是要导入的发行版的名称，<code>&lt;file&gt;</code> 是导出的文件名和路径：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">distributio</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">n&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">director</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">y&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">fil</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中 <code>&lt;directory&gt;</code> 是新的 WSL2 镜像目录的路径。</p><ol start="5"><li>启动新的 WSL2</li></ol><p>通过以下命令启动新的 WSL2：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">distributio</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">n&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中 <code>&lt;distribution&gt;</code> 是要启动的发行版的名称。</p><p>注意：在进行上述操作时，请确保备份重要数据并了解风险。</p><ul><li><a href="https://blog.csdn.net/zyb418/article/details/124114683" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/zyb418/article/details/124114683</a></li></ul><h2 id="wls2-expand-the-capacity-of-ubuntu-18-04" tabindex="-1"><a class="header-anchor" href="#wls2-expand-the-capacity-of-ubuntu-18-04"><span>wls2 expand the capacity of ubuntu-18.04</span></a></h2><ul><li><a href="https://learn.microsoft.com/zh-cn/windows/wsl/disk-space" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/windows/wsl/disk-space</a></li><li><a href="https://www.jianshu.com/p/2348dc7e9aef" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/2348dc7e9aef</a></li><li><a href="https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/expand-vdisk" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/expand-vdisk</a></li></ul><h2 id="如何给wls2-ubuntu18-0-4-扩充磁盘容量" tabindex="-1"><a class="header-anchor" href="#如何给wls2-ubuntu18-0-4-扩充磁盘容量"><span>如何给WLS2-Ubuntu18.0.4 扩充磁盘容量</span></a></h2><p>在 WSL2 (Windows Subsystem for Linux 2) 中，Ubuntu 18.04 默认会将磁盘存储为一个 VHDX 文件。要扩展 WSL2 Ubuntu 18.04 的磁盘容量，请按照以下步骤操作：</p><p><strong>步骤 1</strong>：关闭 WSL2 实例。在 Windows PowerShell 或命令提示符中运行以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --shutdown</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>步骤 2</strong>：找到 VHDX 文件。WSL2 实例的 VHDX 文件通常位于 <code>C:\Users\&lt;YourUsername&gt;\AppData\Local\Packages\</code> 目录下。然后进入一个名为 <code>CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc</code>（这个名字可能略有不同）的文件夹。接下来，进入 <code>LocalState</code> 文件夹。在此文件夹中，您应该可以找到名为 <code>ext4.vhdx</code> 的文件。</p><p><strong>步骤 3</strong>：扩展 VHDX 文件。首先，打开 Windows PowerShell 或命令提示符以管理员身份运行。然后，使用 <code>Resize-VHD</code> 命令扩展 VHDX 文件。将 <code>&lt;YourPath&gt;</code> 替换为实际的 VHDX 文件路径，并将 <code>&lt;NewSize&gt;</code> 替换为您要扩展到的新大小（以 GB 为单位）。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resize-VHD</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Path</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">YourPat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">xt4.vhdx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -SizeBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NewSiz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">GB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>例如，如果 VHDX 文件位于 <code>C:\Users\example\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc\LocalState\ext4.vhdx</code>，并且您希望将其扩展到 50GB，则应运行以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Resize-VHD</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Path</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;C:\Users\example\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc\LocalState\ext4.vhdx&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -SizeBytes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 50GB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>步骤 4</strong>：启动 WSL2 实例。在 Windows PowerShell 或命令提示符中运行以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>步骤 5</strong>：现在，您需要在 WSL2 Ubuntu 18.04 内部调整文件系统。运行以下命令，将 <code>&lt;NewSize&gt;</code> 替换为实际的新大小（以 GB 为单位）：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> resize2fs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">NewSiz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">G</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>例如，如果您将 VHDX 文件扩展到 50GB，则应运行以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> resize2fs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 50G</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>完成这些步骤后，WSL2 Ubuntu 18.04 的磁盘容量应已成功扩展。您可以使用 <code>df -h</code> 命令检查新的磁盘空间。</p><h2 id="wls2-install-android-studio-clion" tabindex="-1"><a class="header-anchor" href="#wls2-install-android-studio-clion"><span>wls2 install android-studio &amp;&amp; clion</span></a></h2><p><a href="https://learn.microsoft.com/zh-cn/windows/wsl/tutorials/gui-apps" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/windows/wsl/tutorials/gui-apps</a></p><h2 id="aosp-install-repo" tabindex="-1"><a class="header-anchor" href="#aosp-install-repo"><span>aosp install repo</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> repo</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> upgrade</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> repo</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .repo/repo/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pull</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/biezhihua/projects/aosp/.repo/repo/repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin/repo</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a+rx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin/repo</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sync</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j8</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://source.android.com/docs/setup/download" target="_blank" rel="noopener noreferrer">https://source.android.com/docs/setup/download</a></li><li><a href="https://gerrit.googlesource.com/git-repo/+/refs/heads/master/README.md" target="_blank" rel="noopener noreferrer">https://gerrit.googlesource.com/git-repo/+/refs/heads/master/README.md</a></li></ul><h2 id="aosp-simple-download-and-build" tabindex="-1"><a class="header-anchor" href="#aosp-simple-download-and-build"><span>aosp simple download and build</span></a></h2><p>要下载AOSP（Android Open Source Project），请按照以下步骤操作：</p><ol><li><p>安装Git：要从AOSP代码仓库中下载源代码，您需要先在计算机上安装Git。您可以从Git官网下载安装程序并按照说明进行安装。</p></li><li><p>获取AOSP代码：打开终端或命令行窗口，在命令行中输入以下命令，以下载AOSP代码：</p></li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> aosp</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> aosp</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://android.googlesource.com/platform/manifest</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">branc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">h&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sync</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中，<code>&lt;branch&gt;</code> 表示您要下载的AOSP版本的分支名称。例如，要下载Android 12（代码名称为S），请使用以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://android.googlesource.com/platform/manifest</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> android-12.0.0_r1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>此命令将初始化repo工具，并使用指定的分支从AOSP代码仓库中获取源代码。然后，使用 <code>repo sync</code> 命令将所有源代码下载到本地计算机上。</p><ol start="3"><li>构建AOSP：下载完AOSP源代码后，可以使用以下命令构建AOSP：</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build/envsetup.sh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lunch</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j4</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中，<code>source build/envsetup.sh</code> 命令将设置必要的环境变量，<code>lunch</code> 命令将提示您选择要构建的目标设备类型和版本，而 <code>make -j4</code> 命令将开始构建过程。请注意，这个过程可能需要一些时间和大量的磁盘空间。</p><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/" target="_blank" rel="noopener noreferrer">https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/</a></li><li><a href="https://juejin.cn/post/7038543675109933070" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7038543675109933070</a></li></ul><h2 id="aosp-checkout-branch" tabindex="-1"><a class="header-anchor" href="#aosp-checkout-branch"><span>aosp checkout branch</span></a></h2><p>切换分支需要先进入到你本地的AOSP代码目录中，然后使用以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">branch-nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sync</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>其中<code>&lt;branch-name&gt;</code>指定你要切换到的分支名，例如切换到Android 13的分支，则可以使用以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> android-13.0.0_r41</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sync</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>执行完以上命令后，AOSP代码就会被同步到对应的分支。注意，切换分支可能会导致一些代码库的版本变化，需要谨慎操作。</p><h2 id="repo-clean-all-unsaved-files" tabindex="-1"><a class="header-anchor" href="#repo-clean-all-unsaved-files"><span>repo clean all unsaved files</span></a></h2><p>Repo工具是Git工具的扩展，用于管理多个Git代码仓库。与Git类似，Repo也不会在本地仓库中保存未提交的更改。因此，您需要使用文本编辑器或其他适当的工具来保存您的更改。如果您已经对某些文件进行了更改，但还没有提交它们，您可以使用以下方法来清除这些更改：</p><ol><li>如果您只想清除单个Git仓库中的文件更改，请使用以下命令：</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> forall</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">projec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;git checkout -- file-name&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中 <code>&lt;project&gt;</code> 是您要清除更改的Git仓库的名称，<code>file-name</code> 是要清除更改的文件名。该命令将覆盖本地的更改，并还原文件为最后一次提交的状态。</p><ol start="2"><li>如果您想清除所有Git仓库中的未提交更改，请使用以下命令：</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> forall</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;git reset --hard&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>该命令将重置所有Git仓库的本地仓库到最后一次提交的状态，并清除所有未提交的更改。请注意，这将不可逆地删除所有未提交的更改，因此请谨慎使用。</p><p>无论您使用哪种方法，都要确保在清除更改之前，将重要的更改保存到其他文件或备份中。</p><h2 id="replace-source" tabindex="-1"><a class="header-anchor" href="#replace-source"><span>replace source</span></a></h2><p>如果你之前已经通过某种途径获得了 AOSP 的源码(或者你只是 init 这一步完成后)， 你希望以后通过 TUNA 同步 AOSP 部分的代码，只需要修改 .repo/manifests.git/config，将</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>url = https://android.googlesource.com/platform/manifest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>更改为</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>url = https://mirrors.tuna.tsinghua.edu.cn/git/AOSP/platform/manifest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或者可以不修改文件，而执行</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>git config --global url.https://mirrors.tuna.tsinghua.edu.cn/git/AOSP/.insteadof https://android.googlesource.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/" target="_blank" rel="noopener noreferrer">https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/</a></li></ul><h2 id="prepare-build-environment-of-wls2-ubuntu-18-04" tabindex="-1"><a class="header-anchor" href="#prepare-build-environment-of-wls2-ubuntu-18-04"><span>prepare build environment of wls2 - Ubuntu-18.04</span></a></h2><p><a href="https://source.android.com/docs/setup/start/initializing#installing-required-packages-ubuntu-1804" target="_blank" rel="noopener noreferrer">https://source.android.com/docs/setup/start/initializing#installing-required-packages-ubuntu-1804</a></p><h2 id="build-aosp" tabindex="-1"><a class="header-anchor" href="#build-aosp"><span>build aosp</span></a></h2><p>查看CPU核心数量：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;core id&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /proc/cpuinfo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sort</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><a href="https://juejin.cn/post/7043063280704684063" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7043063280704684063</a></li><li><a href="https://blog.csdn.net/nei504293736/article/details/109628378" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/nei504293736/article/details/109628378</a></li><li><a href="https://luyaoming.com/2021/06/23/wsl2%E4%B8%8B%E4%B8%8B%E8%BD%BD%E4%B8%8E%E7%BC%96%E8%AF%91AOSP/" target="_blank" rel="noopener noreferrer">https://luyaoming.com/2021/06/23/wsl2下下载与编译AOSP/</a></li></ul><h2 id="wls2-set-the-fixed-ip-address-set-the-read-and-write-capability-of-the-smb-directory" tabindex="-1"><a class="header-anchor" href="#wls2-set-the-fixed-ip-address-set-the-read-and-write-capability-of-the-smb-directory"><span>wls2 set the fixed IP address &amp; set the read and write capability of the SMB directory</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[share]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   comment</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> share</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   path</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/biezhihua/projects/aosp</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   force</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   writeable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   browseable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   public</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mask</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0644</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   directory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mask</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0755</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> smbd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><a href="https://zhuanlan.zhihu.com/p/380779630" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/380779630</a></li><li><a href="https://github.com/MicrosoftDocs/WSL/issues/418#issuecomment-648570865" target="_blank" rel="noopener noreferrer">https://github.com/MicrosoftDocs/WSL/issues/418#issuecomment-648570865</a></li><li><a href="https://blog.csdn.net/weixin_41301508/article/details/108939520" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_41301508/article/details/108939520</a></li><li><a href="https://unix.stackexchange.com/questions/206309/how-to-create-a-samba-share-that-is-writable-from-windows-without-777-permission" target="_blank" rel="noopener noreferrer">https://unix.stackexchange.com/questions/206309/how-to-create-a-samba-share-that-is-writable-from-windows-without-777-permission</a></li><li><a href="https://blog.csdn.net/sinat_21011081/article/details/118404717?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-118404717-blog-108939520.235%5Ev32%5Epc_relevant_default_base3&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-118404717-blog-108939520.235%5Ev32%5Epc_relevant_default_base3&amp;utm_relevant_index=1" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/sinat_21011081/article/details/118404717?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-118404717-blog-108939520.235^v32^pc_relevant_default_base3&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-118404717-blog-108939520.235^v32^pc_relevant_default_base3&amp;utm_relevant_index=1</a></li></ul><h2 id="run-a-compiled-image-to-emulator-method1" tabindex="-1"><a class="header-anchor" href="#run-a-compiled-image-to-emulator-method1"><span>run a compiled image to emulator | method1</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#擦除已有的avd数据</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">D:\Android\sdk\emulator\emulator.exe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -avd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> biezhihua_aosp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -wipe-data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#模拟器重新加载android image</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">D:\Android\sdk\emulator\emulator.exe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -avd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> biezhihua_aosp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;your_android_path\out\target\product\generic_x86_64\system.img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;your_android_path\out\target\product\generic_x86_64\userdata.img&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> D:\Android\sdk\emulator\emulator.exe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -avd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> biezhihua_aosp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">wsl.localhost\Ubuntu-18.04\home\biezhihua\projects\aosp\out\target\product\emulator_x86_64\system.img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">wsl.localhost\Ubuntu-18.04\home\biezhihua\projects\aosp\out\target\product\emulator_x86_64\userdata.img&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://blog.csdn.net/dangelzjj/article/details/109267411" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/dangelzjj/article/details/109267411</a></li><li><a href="https://blog.csdn.net/dangelzjj/article/details/109267411" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/dangelzjj/article/details/109267411</a></li><li><a href="https://blog.csdn.net/yongwn/article/details/121009506" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/yongwn/article/details/121009506</a></li><li><a href="https://groups.google.com/g/android-building/c/O9a6Ohnb5hI?pli=1" target="_blank" rel="noopener noreferrer">https://groups.google.com/g/android-building/c/O9a6Ohnb5hI?pli=1</a></li></ul><h2 id="run-a-compiled-image-to-emulator-method2" tabindex="-1"><a class="header-anchor" href="#run-a-compiled-image-to-emulator-method2"><span>run a compiled image to emulator | method2</span></a></h2><p>拷贝产物到windows镜像目录下；</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/emulator_x86_64/VerifiedBootParams.textproto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/emulator_x86_64/advancedFeatures.ini</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/emulator_x86_64/encryptionkey.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/emulator_x86_64/kernel-ranchu</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/emulator_x86_64/ramdisk-qemu.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/ramdisk.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/emulator_x86_64/system-qemu.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/system.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/emulator_x86_64/userdata.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/emulator_x86_64/vendor-qemu.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/vendor.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/emulator_x86_64/system/build.prop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">emulator</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -avd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Pixel_3_Edited_API_30</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -writable-system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -wipe-data</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -show-kernel</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -skip-adb-auth</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -no-cache</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">emulator.exe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -avd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> biezhihua_aosp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">wsl.localhost\Ubuntu-18.04\home\biezhihua\projects\aosp\out\target\product\emulator_x86_64\system-qemu.img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">wsl.localhost\Ubuntu-18.04\home\biezhihua\projects\aosp\out\target\product\emulator_x86_64\userdata.img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -writable-system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -wipe-data</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -show-kernel</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -skip-adb-auth</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -no-cache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">emulator.exe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -avd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> biezhihua_aosp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">wsl.localhost\Ubuntu-18.04\home\biezhihua\projects\aosp\out\target\product\emulator_x86_64\system-qemu.img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">wsl.localhost\Ubuntu-18.04\home\biezhihua\projects\aosp\out\target\product\emulator_x86_64\userdata.img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -writable-system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -show-kernel</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -skip-adb-auth</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://sidneyding.cn/posts/c64b5633/" target="_blank" rel="noopener noreferrer">https://sidneyding.cn/posts/c64b5633/</a></li></ul><h2 id="run-a-compiled-image-to-emulator-method3" tabindex="-1"><a class="header-anchor" href="#run-a-compiled-image-to-emulator-method3"><span>run a compiled image to emulator | method3</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">emulator</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -avd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> biezhihua_aosp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/home/biezhihua/projects/aosp/out/target/product/emulator_x86_64/system-qemu.img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/home/biezhihua/projects/aosp/out/target/product/emulator_x86_64/userdata.img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -writable-system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -show-kernel</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -skip-adb-auth</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -wipe-data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="对于aosp-如何打包单个模块并更新system-img文件-请以framework-native为例" tabindex="-1"><a class="header-anchor" href="#对于aosp-如何打包单个模块并更新system-img文件-请以framework-native为例"><span>对于AOSP，如何打包单个模块并更新system.img文件，请以framework/native为例</span></a></h2><p>在 AOSP 源代码中，若要仅构建 framework/native 模块并更新 system.img 文件，可按照以下步骤操作：</p><p><strong>步骤 1</strong>：启动一个终端并进入 AOSP 源代码的根目录。</p><p><strong>步骤 2</strong>：启动构建环境，运行以下命令：</p><p>bash</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build/envsetup.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>步骤 3</strong>：选择要构建的目标设备。例如，如果要为 <code>sdk_phone_x86_64-eng</code> 构建模块，请运行：</p><p>bash</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lunch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sdk_phone_x86_64-eng</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>步骤 4</strong>：构建 framework/native 模块。<code>framework/native</code> 实际上包含许多模块。假设您要构建 <code>libui</code> 模块，可以执行以下命令：</p><p>bash</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mmm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nproc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> frameworks/native/libs/ui</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这将仅构建 <code>libui</code> 模块。要构建整个 <code>framework/native</code>，您需要为每个子模块重复此步骤。</p><p><strong>步骤 5</strong>：现在，已经构建了所需的模块，需要将其安装到 system.img 中。为此，请运行以下命令：</p><p>bash</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> snod</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>此命令将根据已经生成的各个分区（包括已更新的模块）重新生成 system.img 文件。</p><p>完成上述步骤后，您可以在 <code>out/target/product/&lt;device&gt;/</code> 目录下找到更新后的 system.img 文件。此时，您可以将更新后的 system.img 刷入设备或模拟器以进行测试。</p><p>注意：如果您的目标是将新生成的模块（例如 .so 文件）推送到已运行的设备或模拟器上，那么在步骤 4 之后，您可以直接使用 <code>adb push</code> 命令将新生成的模块推送到相应的目录，而无需重新生成整个 system.img。例如：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> remount</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/system/lib64/libui.so</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /system/lib64/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sync</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reboot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请将 <code>&lt;device&gt;</code> 替换为实际的设备名称。这将在重新启动设备后立即应用新的模块。</p><h2 id="对于aosp-如何打包单个模块并更新system-img文件-请以framework-native-surfaceflinger为例" tabindex="-1"><a class="header-anchor" href="#对于aosp-如何打包单个模块并更新system-img文件-请以framework-native-surfaceflinger为例"><span>对于AOSP，如何打包单个模块并更新system.img文件，请以framework/native/surfaceflinger为例</span></a></h2><p>在 AOSP 源代码中，若要仅构建 framework/native/surfaceflinger 模块并更新 system.img 文件，可按照以下步骤操作：</p><p><strong>步骤 1</strong>：启动一个终端并进入 AOSP 源代码的根目录。</p><p><strong>步骤 2</strong>：启动构建环境，运行以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build/envsetup.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>步骤 3</strong>：选择要构建的目标设备。例如，如果要为 <code>sdk_phone_x86_64-eng</code> 构建模块，请运行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lunch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sdk_phone_x86_64-eng</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>步骤 4</strong>：构建 framework/native/surfaceflinger 模块。要构建 SurfaceFlinger 模块，请执行以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mmm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nproc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> frameworks/native/services/surfaceflinger</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mmm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -j32</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> frameworks/native/services/surfaceflinger</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这将仅构建 SurfaceFlinger 模块。</p><p><strong>步骤 5</strong>：现在，已经构建了所需的模块，需要将其安装到 system.img 中。为此，请运行以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">make</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> snod</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>此命令将根据已经生成的各个分区（包括已更新的模块）重新生成 system.img 文件。</p><p>完成上述步骤后，您可以在 <code>out/target/product/&lt;device&gt;/</code> 目录下找到更新后的 system.img 文件。此时，您可以将更新后的 system.img 刷入设备或模拟器以进行测试。</p><p>注意：如果您的目标是将新生成的模块（例如 .so 文件）推送到已运行的设备或模拟器上，那么在步骤 4 之后，您可以直接使用 <code>adb push</code> 命令将新生成的模块推送到相应的目录，而无需重新生成整个 system.img。例如：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> remount</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> out/target/product/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">devic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/system/lib64/libsurfaceflinger.so</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /system/lib64/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">wsl.localhost</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\U</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">buntu-18.04</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ome</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">iezhihua</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rojects</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">osp</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\o</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ut</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">arget</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">roduct</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mulator_x86_64</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ystem</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\N</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ativeSFDemo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /system/bin/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sync</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reboot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请将 <code>&lt;device&gt;</code> 替换为实际的设备名称。这将在重新启动设备后立即应用新的模块。</p><h2 id="error-createramdiskwithbootconfig-can-t-open-product-emulator-x86-64-initrd-for-writing" tabindex="-1"><a class="header-anchor" href="#error-createramdiskwithbootconfig-can-t-open-product-emulator-x86-64-initrd-for-writing"><span>ERROR | createRamdiskWithBootconfig: Can&#39;t open &#39;product\emulator_x86_64\initrd&#39; for writing</span></a></h2><p>这个错误提示的是在创建 ramdisk 时出现问题，无法打开 &quot;product\emulator_x86_64\initrd&quot; 文件进行写入。这可能是由于以下原因之一导致的：</p><ol><li><p><strong>文件路径错误</strong>：请确保 &quot;product\emulator_x86_64\initrd&quot; 文件的路径正确。注意在 Windows 系统中，文件路径中的分隔符应为反斜杠（<code>\</code>），而在类 Unix 系统（如 Linux 和 macOS）中，文件路径中的分隔符应为正斜杠（<code>/</code>）。根据您使用的操作系统，检查文件路径是否正确。</p></li><li><p><strong>文件或文件夹权限问题</strong>：确保您具有足够的权限访问 &quot;product\emulator_x86_64\initrd&quot; 文件。在 Unix 类系统中，您可以使用 <code>chmod</code> 和 <code>chown</code> 命令来更改文件或文件夹的权限。在 Windows 系统中，可以右键单击文件或文件夹，然后选择 &quot;属性&quot;，在 &quot;安全&quot; 选项卡中更改权限。</p></li><li><p><strong>文件或文件夹不存在</strong>：确保 &quot;product\emulator_x86_64&quot; 文件夹存在，并且其中包含 &quot;initrd&quot; 文件。如果缺少该文件，请尝试重新构建项目以生成正确的文件。</p></li><li><p><strong>磁盘空间不足</strong>：请确保您的系统上有足够的磁盘空间可供写入 &quot;product\emulator_x86_64\initrd&quot; 文件。如果磁盘空间不足，请清理一些不需要的文件，以释放足够的空间。</p></li></ol><p>检查以上各项，并根据需要进行相应的修复操作。这应该有助于解决在运行 AOSP 自己编译的镜像时出现的错误。</p><h2 id="aosp中打印函数调用栈-在surfaceflinger" tabindex="-1"><a class="header-anchor" href="#aosp中打印函数调用栈-在surfaceflinger"><span>AOSP中打印函数调用栈，在surfaceflinger</span></a></h2><p>不可以使用下面的命令构建单个模块，因为无法指定工程构建架构，会产生编译错误：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mmm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> frameworks/native/services/surfaceflinger</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>ld.lld: error: undefined symbol: android::CallStack::CallStack()</span></span>
<span class="line"><span>ld.lld: error: undefined symbol: android::CallStack::update(int, int)</span></span>
<span class="line"><span>ld.lld: error: undefined symbol: android::CallStack::log(char const*, android_LogPriority, char const*) const</span></span>
<span class="line"><span>ld.lld: error: undefined symbol: android::CallStack::~CallStack()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://www.cnblogs.com/roger-yu/p/15596840.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/roger-yu/p/15596840.html</a></li><li><a href="https://utzcoz.github.io/2020/04/29/Print-call-stack-in-AOSP-native-code.html" target="_blank" rel="noopener noreferrer">https://utzcoz.github.io/2020/04/29/Print-call-stack-in-AOSP-native-code.html</a></li><li><a href="https://blog.csdn.net/zhaojia92/article/details/97827285" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/zhaojia92/article/details/97827285</a></li></ul><h2 id="aosp-过滤调用栈日志" tabindex="-1"><a class="header-anchor" href="#aosp-过滤调用栈日志"><span>AOSP 过滤调用栈日志</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">emulator.exe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -avd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> biezhihua_aosp</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">wsl.localhost\Ubuntu-18.04\home\biezhihua\projects\aosp\out\target\product\emulator_x86_64\system-qemu.img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">wsl.localhost\Ubuntu-18.04\home\biezhihua\projects\aosp\out\target\product\emulator_x86_64\userdata.img&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -writable-system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -show-kernel</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -skip-adb-auth</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -wipe-data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>onComposerHalHotplug</code>的调用栈：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span> # adb logcat | findstr &quot;bzh&quot;</span></span>
<span class="line"><span>05-03 23:34:47.773   443   443 D bzh     : #00 pc 00000000001ec91c  /system/bin/surfaceflinger (android::SurfaceFlinger::onComposerHalHotplug(unsigned long, android::hardware::graphics::composer::V2_1::IComposerCallback::Connection)+524)</span></span>
<span class="line"><span>05-03 23:34:47.773   443   443 D bzh     : #01 pc 000000000017bd71  /system/bin/surfaceflinger (android::Hwc2::(anonymous namespace)::ComposerCallbackBridge::onHotplug(unsigned long, android::hardware::graphics::composer::V2_1::IComposerCallback::Connection)+17)</span></span>
<span class="line"><span>05-03 23:34:47.773   443   443 D bzh     : #02 pc 00000000000293ef  /system/lib64/android.hardware.graphics.composer@2.1.so (android::hardware::graphics::composer::V2_1::BnHwComposerCallback::_hidl_onHotplug(android::hidl::base::V1_0::BnHwBase*, android::hardware::Parcel const&amp;, android::hardware::Parcel*, std::__1::function&lt;void (android::hardware::Parcel&amp;)&gt;)+239)</span></span>
<span class="line"><span>05-03 23:34:47.773   443   443 D bzh     : #03 pc 000000000003859b  /system/lib64/android.hardware.graphics.composer@2.4.so (android::hardware::graphics::composer::V2_4::BnHwComposerCallback::onTransact(unsigned int, android::hardware::Parcel const&amp;, android::hardware::Parcel*, unsigned int, std::__1::function&lt;void (android::hardware::Parcel&amp;)&gt;)+603)</span></span>
<span class="line"><span>05-03 23:34:47.773   443   443 D bzh     : #04 pc 000000000009ad49  /system/lib64/libhidlbase.so (android::hardware::BHwBinder::transact(unsigned int, android::hardware::Parcel const&amp;, android::hardware::Parcel*, unsigned int, std::__1::function&lt;void (android::hardware::Parcel&amp;)&gt;)+137)</span></span>
<span class="line"><span>05-03 23:34:47.773   443   443 D bzh     : #05 pc 00000000000a035a  /system/lib64/libhidlbase.so (android::hardware::IPCThreadState::executeCommand(int)+3770)</span></span>
<span class="line"><span>05-03 23:34:47.773   443   443 D bzh     : #06 pc 00000000000a11a7  /system/lib64/libhidlbase.so (android::hardware::IPCThreadState::waitForResponse(android::hardware::Parcel*, int*)+103)</span></span>
<span class="line"><span>05-03 23:34:47.774   443   443 D bzh     : #07 pc 00000000000a0ceb  /system/lib64/libhidlbase.so (android::hardware::IPCThreadState::transact(int, unsigned int, android::hardware::Parcel const&amp;, android::hardware::Parcel*, unsigned int)+171)</span></span>
<span class="line"><span>05-03 23:34:47.774   443   443 D bzh     : #08 pc 000000000009bc95  /system/lib64/libhidlbase.so (android::hardware::BpHwBinder::transact(unsigned int, android::hardware::Parcel const&amp;, android::hardware::Parcel*, unsigned int, std::__1::function&lt;void (android::hardware::Parcel&amp;)&gt;)+69)</span></span>
<span class="line"><span>05-03 23:34:47.774   443   443 D bzh     : #09 pc 000000000003eb72  /system/lib64/android.hardware.graphics.composer@2.4.so (android::hardware::graphics::composer::V2_4::BpHwComposerClient::_hidl_registerCallback_2_4(android::hardware::IInterface*, android::hardware::details::HidlInstrumentor*, android::sp&lt;android::hardware::graphics::composer::V2_4::IComposerCallback&gt; const&amp;)+514)</span></span>
<span class="line"><span>05-03 23:34:47.774   443   443 D bzh     : #10 pc 0000000000043298  /system/lib64/android.hardware.graphics.composer@2.4.so (android::hardware::graphics::composer::V2_4::BpHwComposerClient::registerCallback_2_4(android::sp&lt;android::hardware::graphics::composer::V2_4::IComposerCallback&gt; const&amp;)+40)</span></span>
<span class="line"><span>05-03 23:34:47.774   443   443 D bzh     : #11 pc 0000000000175be5  /system/bin/surfaceflinger (android::Hwc2::HidlComposer::registerCallback(android::HWC2::ComposerCallback&amp;)+229)</span></span>
<span class="line"><span>05-03 23:34:47.774   443   443 D bzh     : #12 pc 0000000000183c24  /system/bin/surfaceflinger (android::impl::HWComposer::setCallback(android::HWC2::ComposerCallback&amp;)+4004)</span></span>
<span class="line"><span>05-03 23:34:47.774   443   443 D bzh     : #13 pc 00000000001e4ded  /system/bin/surfaceflinger (android::SurfaceFlinger::init()+877)</span></span>
<span class="line"><span>05-03 23:34:47.774   443   443 D bzh     : #14 pc 0000000000237994  /system/bin/surfaceflinger (main+1220)</span></span>
<span class="line"><span>05-03 23:34:47.774   443   443 D bzh     : #15 pc 0000000000050cc9  /apex/com.android.runtime/lib64/bionic/libc.so (__libc_init+89)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="aidegen-ide导入aosp源码" tabindex="-1"><a class="header-anchor" href="#aidegen-ide导入aosp源码"><span>AIDEGen IDE导入AOSP源码</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">aidegen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> frameworks/native/services/surfaceflinger</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> c</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">aidegen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> frameworks/native/services/surfaceflinger</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> c</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://zhuanlan.zhihu.com/p/272522594" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/272522594</a></li><li><a href="https://www.youtube.com/watch?v=XJ0dI2SYHIE" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=XJ0dI2SYHIE</a></li><li><a href="https://juejin.cn/post/7166061140298956836" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7166061140298956836</a></li><li><a href="https://android.googlesource.com/platform/tools/asuite/+/refs/heads/master/aidegen/README.md" target="_blank" rel="noopener noreferrer">https://android.googlesource.com/platform/tools/asuite/+/refs/heads/master/aidegen/README.md</a></li></ul><h2 id="clion-debug-android-native-code" tabindex="-1"><a class="header-anchor" href="#clion-debug-android-native-code"><span>CLion debug android native code</span></a></h2><h3 id="安装lldb" tabindex="-1"><a class="header-anchor" href="#安装lldb"><span>安装LLDB</span></a></h3><ul><li><a href="https://blog.csdn.net/iamdy/article/details/111272854" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/iamdy/article/details/111272854</a></li><li><a href="https://source.android.google.cn/docs/core/tests/debug/gdb?hl=zh-cn" target="_blank" rel="noopener noreferrer">https://source.android.google.cn/docs/core/tests/debug/gdb?hl=zh-cn</a></li><li><a href="https://lldb.llvm.org/" target="_blank" rel="noopener noreferrer">https://lldb.llvm.org/</a></li><li><a href="https://www.jetbrains.com/help/clion/remote-debug.html" target="_blank" rel="noopener noreferrer">https://www.jetbrains.com/help/clion/remote-debug.html</a></li><li><a href="https://www.jianshu.com/p/76ae75688079" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/76ae75688079</a></li><li><a href="https://blog.csdn.net/qq_23542165/article/details/121275404" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_23542165/article/details/121275404</a></li></ul><h3 id="lldb-for-android" tabindex="-1"><a class="header-anchor" href="#lldb-for-android"><span>LLDB FOR Android</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/root/Android/Sdk/ndk/25.2.9519653/toolchains/llvm/prebuilt/linux-x86_64/lib64/clang/14.0.7/lib/linux/x86_64/lldb-server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lldb-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/local/tmp</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">emulator_x86_64:/data/local/tmp</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # chmod 775 ./lldb-server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">emulator_x86_64:/data/local/tmp</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # ./lldb-server platform --listen &quot;*:1234&quot; --server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lldb-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/local/tmp/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /data/local/tmp</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 755</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lldb-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./lldb-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> p</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --listen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> unix-abstract:///data/local/tmp/debug.sock</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lldb-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;version&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">platform</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 查看lldb可以连接的平台</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">platform</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> select</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> remote-android</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">platform</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 查看平台状态</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">platform</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> unix-abstract-connect:///data/local/tmp/debug.sock</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./lldb-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> platform</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --listen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;*:1234&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">platform</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connect</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connect://emulator-5554:1234</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><a href="https://stackoverflow.com/questions/53733781/how-do-i-use-lldb-to-debug-c-code-on-android-on-command-line" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/53733781/how-do-i-use-lldb-to-debug-c-code-on-android-on-command-line</a></li><li><a href="https://youtrack.jetbrains.com/issue/CPP-26922" target="_blank" rel="noopener noreferrer">https://youtrack.jetbrains.com/issue/CPP-26922</a></li><li><a href="https://www.lili.kim/2019/01/28/android/Debug%20Android%20Native%20with%20LLDB/" target="_blank" rel="noopener noreferrer">https://www.lili.kim/2019/01/28/android/Debug Android Native with LLDB/</a></li></ul><h3 id="lldb-vs-code-debug-android-native-code" tabindex="-1"><a class="header-anchor" href="#lldb-vs-code-debug-android-native-code"><span>LLDB VS Code debug android native code</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">aidegen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> frameworks/native/services</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> v</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /mnt/d/App/Microsoft</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">VS</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Code/bin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><a href="https://github.com/xxr0ss/vscode_lldb_remote_android" target="_blank" rel="noopener noreferrer">https://github.com/xxr0ss/vscode_lldb_remote_android</a></li></ul><h2 id="gdb-clion-debug-android-native-code" tabindex="-1"><a class="header-anchor" href="#gdb-clion-debug-android-native-code"><span>GDB Clion debug android native code</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pidof</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> surfaceflinger</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./gdbserver</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :12345</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --attach</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 460</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://www.jetbrains.com/help/clion/remote-debug.html" target="_blank" rel="noopener noreferrer">https://www.jetbrains.com/help/clion/remote-debug.html</a></li></ul><h3 id="android-emulator-怎么开启-gdbserver" tabindex="-1"><a class="header-anchor" href="#android-emulator-怎么开启-gdbserver"><span>android emulator 怎么开启 gdbserver</span></a></h3><p>您可以通过以下步骤在 Android 模拟器上启动 gdbserver：</p><ol><li>在模拟器中安装 gdbserver</li></ol><p>首先，您需要在模拟器中安装 gdbserver。您可以使用以下 adb 命令安装：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>adb push gdbserver /data/local/tmp/</span></span>
<span class="line"><span>adb shell chmod 755 /data/local/tmp/gdbserver</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>在模拟器中启动 gdbserver</li></ol><p>接下来，您需要在模拟器中启动 gdbserver，以便可以通过 GDB 连接到它。您可以使用以下 adb 命令启动 gdbserver：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>adb shell /data/local/tmp/gdbserver :&lt;port&gt; &lt;process-id&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中 <code>&lt;port&gt;</code> 是您要使用的调试端口号，<code>&lt;process-id&gt;</code> 是您要调试的进程 ID。例如，以下命令将启动 gdbserver 并将其绑定到端口号 1234，以调试进程 ID 12345：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>adb shell /data/local/tmp/gdbserver :1234 12345</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>在主机上连接到 gdbserver</li></ol><p>最后，您需要在主机上运行 GDB，并使用以下命令连接到模拟器中的 gdbserver：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>gdb &lt;executable&gt; -ex &#39;target remote &lt;ip-address&gt;:&lt;port&gt;&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中 <code>&lt;executable&gt;</code> 是您要调试的可执行文件，<code>&lt;ip-address&gt;</code> 是您的模拟器 IP 地址，<code>&lt;port&gt;</code> 是您在第 2 步中指定的端口号。例如，以下命令将使用 GDB 连接到 IP 地址为 192.168.0.2，端口号为 1234 的模拟器：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>gdb my_app -ex &#39;target remote 192.168.0.2:1234&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>请注意，在连接到模拟器之前，您需要确保模拟器和主机在同一网络中，并且可以相互通信。</p><p>希望这可以帮助您启动 gdbserver 并连接到 Android 模拟器进行调试。</p><h3 id="android可用的gdbserver在哪里可以找到" tabindex="-1"><a class="header-anchor" href="#android可用的gdbserver在哪里可以找到"><span>android可用的gdbserver在哪里可以找到</span></a></h3><p>可以在 Android NDK 中找到可用的 gdbserver。可以从以下位置下载 Android NDK：<a href="https://developer.android.com/ndk/downloads%E3%80%82" target="_blank" rel="noopener noreferrer">https://developer.android.com/ndk/downloads。</a></p><p>在下载并解压缩 Android NDK 后，您可以在 <code>&lt;ndk_root&gt;/prebuilt/android-x86/gdbserver</code>（或其他 CPU 架构的相应目录）找到 gdbserver 可执行文件。</p><p>将此可执行文件复制到 Android 设备上，并在设备上运行它以启动 gdbserver。例如，如果您的 Android 设备的 IP 地址为 <code>192.168.1.100</code>，则可以使用以下命令启动 gdbserver：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>adb shell /data/local/tmp/gdbserver :9999 --attach &lt;pid&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这将在 Android 设备上的 <code>9999</code> 端口上启动 gdbserver，并将其附加到 <code>&lt;pid&gt;</code> 指定的进程。然后，您可以在本地主机上使用 gdb 来连接 gdbserver 并进行调试：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>gdb</span></span>
<span class="line"><span>(gdb) target remote 192.168.1.100:9999</span></span>
<span class="line"><span>(gdb) ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意，如果您的 Android 设备已经 root，并且已经安装了 SuperSU 或 Magisk 等 root 管理应用程序，则可以直接将 gdbserver 安装到设备上，而不需要每次都复制它。</p><h2 id="clion预览代码-lldb调试代码" tabindex="-1"><a class="header-anchor" href="#clion预览代码-lldb调试代码"><span>CLion预览代码，LLDB调试代码</span></a></h2><p>预览代码</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">aidegen</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> frameworks</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> c</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>启动模拟器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>emulator -avd biezhihua_aosp  -system &quot;/home/biezhihua/projects/aosp/out/target/product/emulator_x86_64/system-qemu.img&quot; -data &quot;/home/biezhihua/projects/aosp/out/target/product/emulator_x86_64/userdata.img&quot; -writable-system -show-kernel -skip-adb-auth -wipe-data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>获取目标进程PID</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>adb shell pidof surfaceflinger</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>调试代码</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">//</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 进入调试模式</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lldbclient.py</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 446</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">//</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 首次进入后，所有线程会因为stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reason</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> signal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SIGSTOP挂起</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">continue</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 让进程继续执行</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>增加断点：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">breakpoint</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SurfaceFlinger::onComposerHalVsync</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>打印调用栈</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><a href="https://source.android.com/docs/core/tests/debug/gdb?hl=zh-cn" target="_blank" rel="noopener noreferrer">https://source.android.com/docs/core/tests/debug/gdb?hl=zh-cn</a></li><li><a href="https://lldb.llvm.org/" target="_blank" rel="noopener noreferrer">https://lldb.llvm.org/</a></li></ul><h2 id="init-got-an-unexpected-keyword-argument-text" tabindex="-1"><a class="header-anchor" href="#init-got-an-unexpected-keyword-argument-text"><span><strong>init</strong>() got an unexpected keyword argument &#39;text&#39;</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>➜  aosp lldbclient.py -p 3696  --setup-forwarding vscode-lldb</span></span>
<span class="line"><span>Traceback (most recent call last):</span></span>
<span class="line"><span>  File &quot;/home/biezhihua/projects/aosp/development/scripts/lldbclient.py&quot;, line 426, in &lt;module&gt;</span></span>
<span class="line"><span>    main()</span></span>
<span class="line"><span>  File &quot;/home/biezhihua/projects/aosp/development/scripts/lldbclient.py&quot;, line 418, in main</span></span>
<span class="line"><span>    do_main()</span></span>
<span class="line"><span>  File &quot;/home/biezhihua/projects/aosp/development/scripts/lldbclient.py&quot;, line 352, in do_main</span></span>
<span class="line"><span>    clang_version = read_toolchain_config(root)</span></span>
<span class="line"><span>  File &quot;/home/biezhihua/projects/aosp/development/scripts/lldbclient.py&quot;, line 41, in read_toolchain_config</span></span>
<span class="line"><span>    text=True)</span></span>
<span class="line"><span>  File &quot;/usr/lib/python3.6/subprocess.py&quot;, line 356, in check_output</span></span>
<span class="line"><span>    **kwargs).stdout</span></span>
<span class="line"><span>  File &quot;/usr/lib/python3.6/subprocess.py&quot;, line 423, in run</span></span>
<span class="line"><span>    with Popen(*popenargs, **kwargs) as process:</span></span>
<span class="line"><span>TypeError: **init**() got an unexpected keyword argument &#39;text&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个错误发生在运行 <code>lldbclient.py</code> 脚本时。原因是在您使用的 Python 版本（3.6）中，<code>subprocess</code> 模块的 <code>Popen</code> 类的 <code>__init__()</code> 方法不支持 <code>text</code> 关键字参数。<code>text</code> 参数在 Python 3.7 及更高版本的 <code>subprocess</code> 模块中引入，用于替代过时的 <code>universal_newlines</code> 参数。</p><p>为了解决这个问题，您可以执行以下操作：</p><ol><li><p>更新 Python 版本。建议安装 Python 3.7 或更高版本。这可以通过使用您的包管理器或从 <a href="https://www.python.org/downloads/" target="_blank" rel="noopener noreferrer">Python 官方网站</a> 下载并安装新版本来完成。</p></li><li><p>如果您不希望或不能更新 Python，可以尝试修改 <code>lldbclient.py</code> 脚本。在脚本的第 41 行，将以下代码：</p></li></ol><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">text</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>替换为：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">universal_newlines</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">True</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这会在旧版本的 <code>subprocess</code> 模块中使用 <code>universal_newlines</code> 参数，实现与 <code>text</code> 参数相同的功能。</p><p>保存更改后，再次运行 <code>lldbclient.py</code> 脚本，问题应该得到解决。</p><h2 id="other" tabindex="-1"><a class="header-anchor" href="#other"><span>other</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> surfaceflinger</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/3/8 14:25:34</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: biezhihua@gmail.com">biezhihua</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><!----><div class="vp-copyright">Copyright © 2025 别志华 </div></footer></div><!--]--><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-D4ZtVCQo.js" defer></script>
  </body>
</html>
