<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <title>Android | AOSP | build aosp and run image to emulator in windows11 | biezhihua的日常</title><meta name="description" content=" ">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-4e824e77.css" as="style"><link rel="stylesheet" href="/assets/style-4e824e77.css">
    <link rel="modulepreload" href="/assets/app-c18e92cb.js"><link rel="modulepreload" href="/assets/framework-301d0703.js"><link rel="modulepreload" href="/assets/build-aosp-in-wls.html-98b84570.js"><link rel="modulepreload" href="/assets/build-aosp-in-wls.html-8079a0a9.js"><link rel="prefetch" href="/assets/index.html-8f7d46d2.js" as="script"><link rel="prefetch" href="/assets/about-me.html-0aba838f.js" as="script"><link rel="prefetch" href="/assets/index.html-61f5d4e5.js" as="script"><link rel="prefetch" href="/assets/index.html-14645dd8.js" as="script"><link rel="prefetch" href="/assets/index.html-a0547254.js" as="script"><link rel="prefetch" href="/assets/difficult-sentence.html-06283e2e.js" as="script"><link rel="prefetch" href="/assets/Algorithms-analysis.html-b66fb5de.js" as="script"><link rel="prefetch" href="/assets/Algorithms-apply.html-4650ed25.js" as="script"><link rel="prefetch" href="/assets/Algorithms-math-base.html-3a3a7fe9.js" as="script"><link rel="prefetch" href="/assets/Algorithms-thinking.html-0d744ef0.js" as="script"><link rel="prefetch" href="/assets/Algorithms.html-0a7f8461.js" as="script"><link rel="prefetch" href="/assets/Data-structure.html-f38ebd02.js" as="script"><link rel="prefetch" href="/assets/index.html-1f3aeb3c.js" as="script"><link rel="prefetch" href="/assets/algorithms-graph.html-bb7bc117.js" as="script"><link rel="prefetch" href="/assets/android-逆向学习.html-9176ba32.js" as="script"><link rel="prefetch" href="/assets/滴水三期.html-3cf4b633.js" as="script"><link rel="prefetch" href="/assets/计算机组成原理.html-0cdc9ea0.js" as="script"><link rel="prefetch" href="/assets/逆向工程核心原理.html-ccc509d1.js" as="script"><link rel="prefetch" href="/assets/Assembly-Language-4th-Edition-Wang-Shuang.html-41f3c22c.js" as="script"><link rel="prefetch" href="/assets/Learn-Reverse-Engineering.html-4895b5c7.js" as="script"><link rel="prefetch" href="/assets/SELinux.html-97322150.js" as="script"><link rel="prefetch" href="/assets/The-Self-cultivation-of-Programmers-Linking-Loading-and-Libraries.html-36224a19.js" as="script"><link rel="prefetch" href="/assets/andorid-kernel.html-7d044ce7.js" as="script"><link rel="prefetch" href="/assets/android-aar-maven.html-9c4bcf54.js" as="script"><link rel="prefetch" href="/assets/android-immersive.html-565b26d0.js" as="script"><link rel="prefetch" href="/assets/android-ndk-r18b-toolchains.html-d90c3742.js" as="script"><link rel="prefetch" href="/assets/android-notification-listener-service.html-66b79e32.js" as="script"><link rel="prefetch" href="/assets/android-scrcpy.html-9c1e6687.js" as="script"><link rel="prefetch" href="/assets/binary-and-hexadecimal-conversion-rules.html-8c3a2f49.js" as="script"><link rel="prefetch" href="/assets/color-difference-calculation.html-e8de2679.js" as="script"><link rel="prefetch" href="/assets/color.html-094cca02.js" as="script"><link rel="prefetch" href="/assets/gradle-commonh-command.html-f5eb03fc.js" as="script"><link rel="prefetch" href="/assets/how-to-call-rust-function-from-harmony.html-585a93a8.js" as="script"><link rel="prefetch" href="/assets/how-to-extension-method-for-option-in-rust.html-e9a29c8b.js" as="script"><link rel="prefetch" href="/assets/how-to-fix-waiting-for-file-lock-on-package-cache.html-a2c279bc.js" as="script"><link rel="prefetch" href="/assets/how-to-get-multi-option-value.html-1e1ad627.js" as="script"><link rel="prefetch" href="/assets/how-to-ignore-warning-info-in-rust.html-67a71aca.js" as="script"><link rel="prefetch" href="/assets/how-to-mount-remote-disk-to-local.html-dffe8408.js" as="script"><link rel="prefetch" href="/assets/how-to-process-common-error.html-98711890.js" as="script"><link rel="prefetch" href="/assets/how-to-read-config-file-of-lib-project-in-rust.html-48b93fdd.js" as="script"><link rel="prefetch" href="/assets/how-to-use-result-process-option-in-rust.html-7aaf9c34.js" as="script"><link rel="prefetch" href="/assets/hypervisor.html-06d080ef.js" as="script"><link rel="prefetch" href="/assets/learn-compilers.html-251eff98.js" as="script"><link rel="prefetch" href="/assets/learn-ida.html-d810f66c.js" as="script"><link rel="prefetch" href="/assets/learn-rust.html-84e8fa8c.js" as="script"><link rel="prefetch" href="/assets/learn-stable-diffusion.html-364ef775.js" as="script"><link rel="prefetch" href="/assets/learn-ui-design-UI设计必修课-交互-架构-视觉UI设计教程.html-380d9555.js" as="script"><link rel="prefetch" href="/assets/learn-windows-linux.html-e252b841.js" as="script"><link rel="prefetch" href="/assets/lr1-detail.html-35ac5da7.js" as="script"><link rel="prefetch" href="/assets/lr1-detail2.html-aa0e893f.js" as="script"><link rel="prefetch" href="/assets/lr1-detail3.html-113cf2cf.js" as="script"><link rel="prefetch" href="/assets/lr1-detail4.html-a735ca64.js" as="script"><link rel="prefetch" href="/assets/lr1-产生式是如何定义的.html-526dc03a.js" as="script"><link rel="prefetch" href="/assets/lr1.html-364345dd.js" as="script"><link rel="prefetch" href="/assets/math-lerp.html-b1ef274c.js" as="script"><link rel="prefetch" href="/assets/mhxy-navgiate-mode.html-91c4dc9e.js" as="script"><link rel="prefetch" href="/assets/mhxy-script.html-fe7ed3b9.js" as="script"><link rel="prefetch" href="/assets/pc-platform-arch-info.html-c3574df9.js" as="script"><link rel="prefetch" href="/assets/pyhont-callable.html-39bbd9bb.js" as="script"><link rel="prefetch" href="/assets/python-async-await-threading.html-ffb680c2.js" as="script"><link rel="prefetch" href="/assets/python-async-await.html-b2b061d8.js" as="script"><link rel="prefetch" href="/assets/python-async-block-unblock.html-ab407dac.js" as="script"><link rel="prefetch" href="/assets/python-async.html-10699147.js" as="script"><link rel="prefetch" href="/assets/python-dict.html-cdb13758.js" as="script"><link rel="prefetch" href="/assets/python-singleton-decorator.html-b51f1c55.js" as="script"><link rel="prefetch" href="/assets/python-singleton.html-1f801303.js" as="script"><link rel="prefetch" href="/assets/pythopn-opencv-hist.html-d75a61ec.js" as="script"><link rel="prefetch" href="/assets/quickjs-eval-flags.html-5bde64b6.js" as="script"><link rel="prefetch" href="/assets/quickjs-eval.html-d6ab30f6.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-1.html-1d91304b.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-2.html-c8d3419c.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-3.html-5081bb0c.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-windows-1.html-acbeb70a.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-windows-2.html-cad0b6b2.js" as="script"><link rel="prefetch" href="/assets/root-magisk-xposed-lsposed.html-b42b753a.js" as="script"><link rel="prefetch" href="/assets/solution-rust-diesel-install-in-windows.html-c2a6dc5b.js" as="script"><link rel="prefetch" href="/assets/using-opencv-4-surf-algorithm-feature-detection-quoc-bao-nguyen.html-faa42c18.js" as="script"><link rel="prefetch" href="/assets/vm1.html-06885d29.js" as="script"><link rel="prefetch" href="/assets/vm2.html-ac483d1c.js" as="script"><link rel="prefetch" href="/assets/vm3.html-407db03d.js" as="script"><link rel="prefetch" href="/assets/vm4.html-b1ef248c.js" as="script"><link rel="prefetch" href="/assets/vmx.html-e90dc338.js" as="script"><link rel="prefetch" href="/assets/what-is-the-COM-in-windows.html-4aa437c6.js" as="script"><link rel="prefetch" href="/assets/what-is-the-epoll.html-b8c78cd0.js" as="script"><link rel="prefetch" href="/assets/what-is-the-file-descriptor.html-5990db6c.js" as="script"><link rel="prefetch" href="/assets/what-is-the-meaning-of-__no_mangle_.html-86d7236d.js" as="script"><link rel="prefetch" href="/assets/what-is-the-meaning-of-__repr(C)_.html-87a96084.js" as="script"><link rel="prefetch" href="/assets/what-is-the-varargs-in-python.html-57ede2d2.js" as="script"><link rel="prefetch" href="/assets/what-the-different-self-and-Self-in-Rust.html-7ce6e072.js" as="script"><link rel="prefetch" href="/assets/windows-SystemFirmwareTable.html-f334b3e4.js" as="script"><link rel="prefetch" href="/assets/windows-dev.html-3bf89842.js" as="script"><link rel="prefetch" href="/assets/index.html-7ce6bbe1.js" as="script"><link rel="prefetch" href="/assets/product-research.html-3e49a926.js" as="script"><link rel="prefetch" href="/assets/google-android-atrace.html-d605d9e3.js" as="script"><link rel="prefetch" href="/assets/google-android-graphics.html-ffd17aab.js" as="script"><link rel="prefetch" href="/assets/google-android-performance-overview.html-9206936e.js" as="script"><link rel="prefetch" href="/assets/google-android-profiler.html-65fc7a14.js" as="script"><link rel="prefetch" href="/assets/google-android-system.html-d2106ddf.js" as="script"><link rel="prefetch" href="/assets/app-launch.html-e96170d2.js" as="script"><link rel="prefetch" href="/assets/extend.html-8bbfb8bd.js" as="script"><link rel="prefetch" href="/assets/surfaceflinger-init.html-305c933f.js" as="script"><link rel="prefetch" href="/assets/surfaceflinger-vsync.html-975894fc.js" as="script"><link rel="prefetch" href="/assets/zygote.html-8ece84c0.js" as="script"><link rel="prefetch" href="/assets/perfetto-00-outline.html-7a994722.js" as="script"><link rel="prefetch" href="/assets/perfetto-01-overview.html-e09cb048.js" as="script"><link rel="prefetch" href="/assets/perfetto-02-tracing-101.html-d131e16c.js" as="script"><link rel="prefetch" href="/assets/perfetto-03-quickstart-record-traces-on-android.html-104c3993.js" as="script"><link rel="prefetch" href="/assets/perfetto-06-quickstart-sql-analysis-and-metrics copy.html-cc34107a.js" as="script"><link rel="prefetch" href="/assets/perfetto-07-quickstart-trace-conversion copy.html-c2b6d5e1.js" as="script"><link rel="prefetch" href="/assets/perfetto-08-quickstart-heap-profiling copy.html-992c7e6b.js" as="script"><link rel="prefetch" href="/assets/perfetto-09-quickstart-callstack-sampling-on-android copy.html-dcf55c80.js" as="script"><link rel="prefetch" href="/assets/perfetto-10-faq.html-d0acc432.js" as="script"><link rel="prefetch" href="/assets/perfetto-11-case-stuides-android-boot-tracing.html-0b0c53ba.js" as="script"><link rel="prefetch" href="/assets/perfetto-12-data-sources-debugging-memory-usage.html-8d7f8fff.js" as="script"><link rel="prefetch" href="/assets/perfetto-13-data-sources-memory-counter-and-events.html-98bc5291.js" as="script"><link rel="prefetch" href="/assets/perfetto-14-data-sources-memory-heap-profiler.html-c1ea4af0.js" as="script"><link rel="prefetch" href="/assets/perfetto-15-data-sources-java-heap-dumps.html-c7dd09aa.js" as="script"><link rel="prefetch" href="/assets/perfetto-16-data-sources-cpu-scheduling-events.html-cee793b2.js" as="script"><link rel="prefetch" href="/assets/perfetto-17-data-sources-system-calls.html-ba097393.js" as="script"><link rel="prefetch" href="/assets/perfetto-18-data-sources-cpu-frequency-scaling.html-9562909b.js" as="script"><link rel="prefetch" href="/assets/perfetto-21-android-system-android-game-intervention-list.html-15c3e7b7.js" as="script"><link rel="prefetch" href="/assets/perfetto-22-data-sources-android-system-atrace-instrumentation.html-298378fc.js" as="script"><link rel="prefetch" href="/assets/perfetto-23-data-sources-android-system-android-log.html-02d49f35.js" as="script"><link rel="prefetch" href="/assets/perfetto-24-data-sources-android-system-android-jank.html-78b58d3e.js" as="script"><link rel="prefetch" href="/assets/perfetto-25-app-instrumentation-tracing-sdk.html-e174fe67.js" as="script"><link rel="prefetch" href="/assets/perfetto-28-trace-analysis-trace-processor.html-b0f0de5d.js" as="script"><link rel="prefetch" href="/assets/perfetto-41-core-concepts-trace-configuration.html-949e1731.js" as="script"><link rel="prefetch" href="/assets/perfetto-42-core-concepts-buffers-and-dataflow.html-9671fc34.js" as="script"><link rel="prefetch" href="/assets/perfetto-43-core-concepts-service-model.html-3ed70a35.js" as="script"><link rel="prefetch" href="/assets/fluency-00-outline.html-9a5396ee.js" as="script"><link rel="prefetch" href="/assets/fluency-01-overview.html-1f63a601.js" as="script"><link rel="prefetch" href="/assets/fluency-02-fps.html-4274a850.js" as="script"><link rel="prefetch" href="/assets/fluency-03-observability-technology.html-32127ae6.js" as="script"><link rel="prefetch" href="/assets/fluency-04-tracing.html-b62923ce.js" as="script"><link rel="prefetch" href="/assets/fluency-05-tools-perfetto.html-7fca108c.js" as="script"><link rel="prefetch" href="/assets/fluency-06-tools-android-profiler.html-1fc33e0a.js" as="script"><link rel="prefetch" href="/assets/fluency-07-perfetto-android-overview.html-a6d41586.js" as="script"><link rel="prefetch" href="/assets/fluency-08-perfetto-android-graphics-vsync.html-2013508f.js" as="script"><link rel="prefetch" href="/assets/index.html-262710bf.js" as="script"><link rel="prefetch" href="/assets/native-crash.html-5fff769c.js" as="script"><link rel="prefetch" href="/assets/overview.html-e2abb5ef.js" as="script"><link rel="prefetch" href="/assets/index.html-af346e67.js" as="script"><link rel="prefetch" href="/assets/6.006 Introduction To Algorithms.html-977ea701.js" as="script"><link rel="prefetch" href="/assets/6.042J Undergraduate Mathematics For Computer Science.html-68885d69.js" as="script"><link rel="prefetch" href="/assets/6.046J Design And Analysis Of Algorithms.html-92a0b7a1.js" as="script"><link rel="prefetch" href="/assets/6.828 Operating System Engineering.html-c0df9303.js" as="script"><link rel="prefetch" href="/assets/6.851 Advanced Data Structures.html-77bf2ed1.js" as="script"><link rel="prefetch" href="/assets/6.854J Advanced Alorithms.html-66f54f68.js" as="script"><link rel="prefetch" href="/assets/Lesson-01-A-private-conversation.html-79e404a8.js" as="script"><link rel="prefetch" href="/assets/Lesson-02-Breakfast-or-lunch.html-55530288.js" as="script"><link rel="prefetch" href="/assets/Lesson-03-Please-send-me-a-card.html-9bf43ce2.js" as="script"><link rel="prefetch" href="/assets/Lesson-04-An-exciting-trip.html-738dcce4.js" as="script"><link rel="prefetch" href="/assets/Lesson-05-No-Wrong-Numbers.html-261d758d.js" as="script"><link rel="prefetch" href="/assets/Lesson-06-Percy-Buttons.html-68a40839.js" as="script"><link rel="prefetch" href="/assets/Lesson-07-Too-late.html-8c4c5c4a.js" as="script"><link rel="prefetch" href="/assets/Lesson-08-The-best-and-the-worst.html-c8faa7ef.js" as="script"><link rel="prefetch" href="/assets/Lesson-09-A-cold-welcome.html-ba9d6e48.js" as="script"><link rel="prefetch" href="/assets/Lesson-10-Not-For-Jazz.html-74cacfe2.js" as="script"><link rel="prefetch" href="/assets/Lesson-11-One-good-turn-deserves-another.html-6f0d8177.js" as="script"><link rel="prefetch" href="/assets/Lesson-12-Goodbye-and-good-luck.html-8ec9412a.js" as="script"><link rel="prefetch" href="/assets/Lesson-13-The-Greenwood-Boys.html-6f80fee8.js" as="script"><link rel="prefetch" href="/assets/Lesson-14-Do-you-speak-English.html-5018e3d8.js" as="script"><link rel="prefetch" href="/assets/Lesson-15-Good-news.html-423b918a.js" as="script"><link rel="prefetch" href="/assets/Lesson-16-A-polite-request.html-56de9ad7.js" as="script"><link rel="prefetch" href="/assets/Lesson-17-Always-young.html-ec862a93.js" as="script"><link rel="prefetch" href="/assets/Lesson-18-He-often-does-this.html-39b1c890.js" as="script"><link rel="prefetch" href="/assets/Lesson-19-Sold-out.html-e487ba62.js" as="script"><link rel="prefetch" href="/assets/Lesson-20-One-man-in-a-boat.html-ecc5a2d7.js" as="script"><link rel="prefetch" href="/assets/Lesson-21-Mad-or-not.html-5c6492f4.js" as="script"><link rel="prefetch" href="/assets/Lesson-22-A-glass-envelope.html-bb0b25a8.js" as="script"><link rel="prefetch" href="/assets/Lesson-23-A-new-house.html-c01ff769.js" as="script"><link rel="prefetch" href="/assets/Lesson-24-If-could-be-worse.html-b7f7d7a2.js" as="script"><link rel="prefetch" href="/assets/Lesson-25-Do-the-English-speak-English.html-a97169ea.js" as="script"><link rel="prefetch" href="/assets/Lesson-26-The-best-art-critics.html-32a80fe9.js" as="script"><link rel="prefetch" href="/assets/Lesson-27-A-wet-night.html-3952a0dc.js" as="script"><link rel="prefetch" href="/assets/Lesson-28-No-parking.html-8c271b7d.js" as="script"><link rel="prefetch" href="/assets/Lesson-29-Taxi.html-16fb53dd.js" as="script"><link rel="prefetch" href="/assets/Lesson-30-Football-or-polo.html-ff361419.js" as="script"><link rel="prefetch" href="/assets/Lesson-31-Success-story.html-64c6defe.js" as="script"><link rel="prefetch" href="/assets/Lesson-32-Shopping-make-easy.html-08e081e0.js" as="script"><link rel="prefetch" href="/assets/Lesson-33-Out-of-the-darkness.html-1e0a2016.js" as="script"><link rel="prefetch" href="/assets/Lesson-34-Quick-work.html-a4f04c30.js" as="script"><link rel="prefetch" href="/assets/Lesson-35-Stop-thief.html-995b31b3.js" as="script"><link rel="prefetch" href="/assets/Lesson-36-Across-the-Channel.html-fc0101ee.js" as="script"><link rel="prefetch" href="/assets/Lesson-37-The-Olympic-Games.html-e5b98d0b.js" as="script"><link rel="prefetch" href="/assets/Lesson-38-Everything-except-the-weather.html-69c28223.js" as="script"><link rel="prefetch" href="/assets/Lesson-39-Am-I-all-right.html-5ef1c91a.js" as="script"><link rel="prefetch" href="/assets/Lesson-40-Food-and-talk.html-0614b48e.js" as="script"><link rel="prefetch" href="/assets/Lesson-41-Do-you-call-that-a-hat.html-73249c55.js" as="script"><link rel="prefetch" href="/assets/Lesson-42-Not-very-musical.html-88fcdc8f.js" as="script"><link rel="prefetch" href="/assets/Lesson-43-Over-the-South-Pole.html-92312dd7.js" as="script"><link rel="prefetch" href="/assets/Lesson-44-Through-the-forest.html-766f3816.js" as="script"><link rel="prefetch" href="/assets/Lesson-45-A-clear-conscience.html-55850137.js" as="script"><link rel="prefetch" href="/assets/Lesson-46-Expensive-and-uncomfortable.html-2d715693.js" as="script"><link rel="prefetch" href="/assets/Lesson-47-A-thirsty-ghost.html-67abb7d0.js" as="script"><link rel="prefetch" href="/assets/Lesson-48-Did-you-want-to-tell-me-something.html-86d37f80.js" as="script"><link rel="prefetch" href="/assets/Lesson-49-The-end-of-a-dream.html-6c782465.js" as="script"><link rel="prefetch" href="/assets/Lesson-50-Taken-for-a-ride.html-560cd4d3.js" as="script"><link rel="prefetch" href="/assets/Lesson-51-Reward-for-virtue.html-f0c4eb6d.js" as="script"><link rel="prefetch" href="/assets/Lesson-52-A-pretty-carpet.html-eed5dcf6.js" as="script"><link rel="prefetch" href="/assets/Lesson-53-Hot-snake.html-0e228ee5.js" as="script"><link rel="prefetch" href="/assets/Lesson-54-Sticky-fingers.html-bea67146.js" as="script"><link rel="prefetch" href="/assets/Lesson-55-Not-a-gold-mine.html-054c48ed.js" as="script"><link rel="prefetch" href="/assets/Lesson-56-Faster-than-sound.html-18a2daf1.js" as="script"><link rel="prefetch" href="/assets/Lesson-57-Can-I-help-you_-madam.html-e3bd9975.js" as="script"><link rel="prefetch" href="/assets/Lesson-58-A-blessing-in-disguise.html-6d457927.js" as="script"><link rel="prefetch" href="/assets/Lesson-59-In-or-out.html-ed6f20aa.js" as="script"><link rel="prefetch" href="/assets/Lesson-60-The-future.html-e75740c4.js" as="script"><link rel="prefetch" href="/assets/Lesson-61-Trouble-with-the-Hubble.html-c658cd33.js" as="script"><link rel="prefetch" href="/assets/Lesson-62-After-the-fire.html-37b335c2.js" as="script"><link rel="prefetch" href="/assets/Lesson-63-She-was-not-amused.html-f024b379.js" as="script"><link rel="prefetch" href="/assets/Lesson-64-The-Channel-Tunnel.html-ba414ab5.js" as="script"><link rel="prefetch" href="/assets/Lesson-65-Jumbo-versus-the-police.html-9856e739.js" as="script"><link rel="prefetch" href="/assets/Lesson-66-Sweet-as-honey.html-55892d9a.js" as="script"><link rel="prefetch" href="/assets/Lesson-67-Volcanoes.html-f5c5f3b0.js" as="script"><link rel="prefetch" href="/assets/Lesson-68-Persistent.html-2c003e98.js" as="script"><link rel="prefetch" href="/assets/Lesson-69-But-not-murder.html-01435c21.js" as="script"><link rel="prefetch" href="/assets/Lesson-70-Red-for-danger.html-54e463c3.js" as="script"><link rel="prefetch" href="/assets/Lesson-71-A-famous-clock.html-4036ba3d.js" as="script"><link rel="prefetch" href="/assets/Lesson-72-A-car-called-bluebird.html-1f8d77ca.js" as="script"><link rel="prefetch" href="/assets/Lesson-73-The-record-holder.html-743d08ff.js" as="script"><link rel="prefetch" href="/assets/Lesson-74-Out-of-the-limelight.html-2b63e865.js" as="script"><link rel="prefetch" href="/assets/Lesson-75-SOS.html-c899ee58.js" as="script"><link rel="prefetch" href="/assets/Lesson-76-April-Fools-Day.html-23d15298.js" as="script"><link rel="prefetch" href="/assets/Lesson-77-Successful-operation.html-d7b03b7d.js" as="script"><link rel="prefetch" href="/assets/Lesson-78-The-last-one.html-7751646e.js" as="script"><link rel="prefetch" href="/assets/Lesson-79-By-air.html-7132b415.js" as="script"><link rel="prefetch" href="/assets/Lesson-80-The-Crystal-Palace.html-9b0122a3.js" as="script"><link rel="prefetch" href="/assets/Lesson-81-Escape.html-0916100b.js" as="script"><link rel="prefetch" href="/assets/Lesson-82-Monster-or-fish.html-2e8d76ae.js" as="script"><link rel="prefetch" href="/assets/Lesson-83-After-the-elections.html-8cc5e592.js" as="script"><link rel="prefetch" href="/assets/Lesson-84-On-strike.html-c5569c72.js" as="script"><link rel="prefetch" href="/assets/Lesson-85-Never-too-old-to-learn.html-09fb2aa9.js" as="script"><link rel="prefetch" href="/assets/Lesson-86-Out-of-control.html-f2d09777.js" as="script"><link rel="prefetch" href="/assets/Lesson-87-A-perfect-alibi.html-0bdd577e.js" as="script"><link rel="prefetch" href="/assets/Lesson-88-Trapped-in-a-mine.html-04f0b504.js" as="script"><link rel="prefetch" href="/assets/Lesson-89-A-slip-of-the-tongue.html-8194d74d.js" as="script"><link rel="prefetch" href="/assets/Lesson-90-What-is-for-supper.html-b3be097a.js" as="script"><link rel="prefetch" href="/assets/Lesson-91-Three-men-in-a-basket.html-1d929167.js" as="script"><link rel="prefetch" href="/assets/Lesson-92-Asking-for-trouble.html-178ae445.js" as="script"><link rel="prefetch" href="/assets/Lesson-93-A-noble-gift.html-40cbe0c1.js" as="script"><link rel="prefetch" href="/assets/Lesson-94-Future-champions.html-cded8b28.js" as="script"><link rel="prefetch" href="/assets/Lesson-95-A-fantasy.html-1e2793d5.js" as="script"><link rel="prefetch" href="/assets/Lesson-96-The-dead-return.html-653cbfd2.js" as="script"><link rel="prefetch" href="/assets/404.html-f04ced3e.js" as="script"><link rel="prefetch" href="/assets/index.html-c2327f66.js" as="script"><link rel="prefetch" href="/assets/index.html-6156e226.js" as="script"><link rel="prefetch" href="/assets/index.html-1ac4198b.js" as="script"><link rel="prefetch" href="/assets/index.html-5395f306.js" as="script"><link rel="prefetch" href="/assets/index.html-6ac68638.js" as="script"><link rel="prefetch" href="/assets/index.html-f773b72f.js" as="script"><link rel="prefetch" href="/assets/index.html-d76751ea.js" as="script"><link rel="prefetch" href="/assets/index.html-c351a08b.js" as="script"><link rel="prefetch" href="/assets/index.html-220b13fe.js" as="script"><link rel="prefetch" href="/assets/index.html-234bc9da.js" as="script"><link rel="prefetch" href="/assets/index.html-b092c319.js" as="script"><link rel="prefetch" href="/assets/index.html-f8c1c176.js" as="script"><link rel="prefetch" href="/assets/index.html-17632ffc.js" as="script"><link rel="prefetch" href="/assets/index.html-e609b71c.js" as="script"><link rel="prefetch" href="/assets/index.html-04a11369.js" as="script"><link rel="prefetch" href="/assets/index.html-d1922e1a.js" as="script"><link rel="prefetch" href="/assets/index.html-c43655ce.js" as="script"><link rel="prefetch" href="/assets/index.html-b67245ca.js" as="script"><link rel="prefetch" href="/assets/index.html-6141f480.js" as="script"><link rel="prefetch" href="/assets/index.html-7352899a.js" as="script"><link rel="prefetch" href="/assets/index.html-2236f7a2.js" as="script"><link rel="prefetch" href="/assets/index.html-23a135a4.js" as="script"><link rel="prefetch" href="/assets/index.html-839b2da8.js" as="script"><link rel="prefetch" href="/assets/index.html-99e9b40e.js" as="script"><link rel="prefetch" href="/assets/index.html-779cad05.js" as="script"><link rel="prefetch" href="/assets/about-me.html-b2509657.js" as="script"><link rel="prefetch" href="/assets/index.html-416fff7b.js" as="script"><link rel="prefetch" href="/assets/index.html-fff833d2.js" as="script"><link rel="prefetch" href="/assets/index.html-3b6779cc.js" as="script"><link rel="prefetch" href="/assets/difficult-sentence.html-154d203f.js" as="script"><link rel="prefetch" href="/assets/Algorithms-analysis.html-fc399a46.js" as="script"><link rel="prefetch" href="/assets/Algorithms-apply.html-ae299256.js" as="script"><link rel="prefetch" href="/assets/Algorithms-math-base.html-5de2a27c.js" as="script"><link rel="prefetch" href="/assets/Algorithms-thinking.html-ddbf1079.js" as="script"><link rel="prefetch" href="/assets/Algorithms.html-afdf5c2f.js" as="script"><link rel="prefetch" href="/assets/Data-structure.html-35cb5021.js" as="script"><link rel="prefetch" href="/assets/index.html-f5f961fb.js" as="script"><link rel="prefetch" href="/assets/algorithms-graph.html-fab41a91.js" as="script"><link rel="prefetch" href="/assets/android-逆向学习.html-4d4324c7.js" as="script"><link rel="prefetch" href="/assets/滴水三期.html-d9ea5c82.js" as="script"><link rel="prefetch" href="/assets/计算机组成原理.html-2e92fc5b.js" as="script"><link rel="prefetch" href="/assets/逆向工程核心原理.html-90f0bdd0.js" as="script"><link rel="prefetch" href="/assets/Assembly-Language-4th-Edition-Wang-Shuang.html-13de2ff4.js" as="script"><link rel="prefetch" href="/assets/Learn-Reverse-Engineering.html-aca5c4d9.js" as="script"><link rel="prefetch" href="/assets/SELinux.html-661958b3.js" as="script"><link rel="prefetch" href="/assets/The-Self-cultivation-of-Programmers-Linking-Loading-and-Libraries.html-c66e8651.js" as="script"><link rel="prefetch" href="/assets/andorid-kernel.html-cc51ccff.js" as="script"><link rel="prefetch" href="/assets/android-aar-maven.html-2b7f0575.js" as="script"><link rel="prefetch" href="/assets/android-immersive.html-81324aa1.js" as="script"><link rel="prefetch" href="/assets/android-ndk-r18b-toolchains.html-31b2b001.js" as="script"><link rel="prefetch" href="/assets/android-notification-listener-service.html-969fea7a.js" as="script"><link rel="prefetch" href="/assets/android-scrcpy.html-0f54f03f.js" as="script"><link rel="prefetch" href="/assets/binary-and-hexadecimal-conversion-rules.html-b466d2b5.js" as="script"><link rel="prefetch" href="/assets/color-difference-calculation.html-0979aaf6.js" as="script"><link rel="prefetch" href="/assets/color.html-e805103a.js" as="script"><link rel="prefetch" href="/assets/gradle-commonh-command.html-e27a1f40.js" as="script"><link rel="prefetch" href="/assets/how-to-call-rust-function-from-harmony.html-e25a719e.js" as="script"><link rel="prefetch" href="/assets/how-to-extension-method-for-option-in-rust.html-ec2a1b0c.js" as="script"><link rel="prefetch" href="/assets/how-to-fix-waiting-for-file-lock-on-package-cache.html-d37bf4b4.js" as="script"><link rel="prefetch" href="/assets/how-to-get-multi-option-value.html-0316a1d4.js" as="script"><link rel="prefetch" href="/assets/how-to-ignore-warning-info-in-rust.html-6e467990.js" as="script"><link rel="prefetch" href="/assets/how-to-mount-remote-disk-to-local.html-dfbd64c6.js" as="script"><link rel="prefetch" href="/assets/how-to-process-common-error.html-c965dcde.js" as="script"><link rel="prefetch" href="/assets/how-to-read-config-file-of-lib-project-in-rust.html-df4114ba.js" as="script"><link rel="prefetch" href="/assets/how-to-use-result-process-option-in-rust.html-00e5c654.js" as="script"><link rel="prefetch" href="/assets/hypervisor.html-830b21e6.js" as="script"><link rel="prefetch" href="/assets/learn-compilers.html-8e2880db.js" as="script"><link rel="prefetch" href="/assets/learn-ida.html-a8b50139.js" as="script"><link rel="prefetch" href="/assets/learn-rust.html-31331679.js" as="script"><link rel="prefetch" href="/assets/learn-stable-diffusion.html-2a72d9f3.js" as="script"><link rel="prefetch" href="/assets/learn-ui-design-UI设计必修课-交互-架构-视觉UI设计教程.html-561c329e.js" as="script"><link rel="prefetch" href="/assets/learn-windows-linux.html-43b375e1.js" as="script"><link rel="prefetch" href="/assets/lr1-detail.html-b6b9de71.js" as="script"><link rel="prefetch" href="/assets/lr1-detail2.html-bbd723cb.js" as="script"><link rel="prefetch" href="/assets/lr1-detail3.html-d506608e.js" as="script"><link rel="prefetch" href="/assets/lr1-detail4.html-c9f6630b.js" as="script"><link rel="prefetch" href="/assets/lr1-产生式是如何定义的.html-dd7ee12d.js" as="script"><link rel="prefetch" href="/assets/lr1.html-20780627.js" as="script"><link rel="prefetch" href="/assets/math-lerp.html-a0cfb9e6.js" as="script"><link rel="prefetch" href="/assets/mhxy-navgiate-mode.html-0682a172.js" as="script"><link rel="prefetch" href="/assets/mhxy-script.html-94b8dcf3.js" as="script"><link rel="prefetch" href="/assets/pc-platform-arch-info.html-8c35a059.js" as="script"><link rel="prefetch" href="/assets/pyhont-callable.html-47430193.js" as="script"><link rel="prefetch" href="/assets/python-async-await-threading.html-3d6ed150.js" as="script"><link rel="prefetch" href="/assets/python-async-await.html-d97329ba.js" as="script"><link rel="prefetch" href="/assets/python-async-block-unblock.html-95d93485.js" as="script"><link rel="prefetch" href="/assets/python-async.html-e9f26562.js" as="script"><link rel="prefetch" href="/assets/python-dict.html-5b9ba634.js" as="script"><link rel="prefetch" href="/assets/python-singleton-decorator.html-015a2be2.js" as="script"><link rel="prefetch" href="/assets/python-singleton.html-ea2e6c27.js" as="script"><link rel="prefetch" href="/assets/pythopn-opencv-hist.html-93a08212.js" as="script"><link rel="prefetch" href="/assets/quickjs-eval-flags.html-c8359917.js" as="script"><link rel="prefetch" href="/assets/quickjs-eval.html-b7b84ae1.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-1.html-392b478f.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-2.html-b1514673.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-3.html-56418c3d.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-windows-1.html-eaeb611f.js" as="script"><link rel="prefetch" href="/assets/reverse-engineering-windows-2.html-a2a5d5b2.js" as="script"><link rel="prefetch" href="/assets/root-magisk-xposed-lsposed.html-e8a277c3.js" as="script"><link rel="prefetch" href="/assets/solution-rust-diesel-install-in-windows.html-8beaa932.js" as="script"><link rel="prefetch" href="/assets/using-opencv-4-surf-algorithm-feature-detection-quoc-bao-nguyen.html-6cc3b73f.js" as="script"><link rel="prefetch" href="/assets/vm1.html-726ea1f4.js" as="script"><link rel="prefetch" href="/assets/vm2.html-63eb2bc0.js" as="script"><link rel="prefetch" href="/assets/vm3.html-b5be2ce5.js" as="script"><link rel="prefetch" href="/assets/vm4.html-5da814d7.js" as="script"><link rel="prefetch" href="/assets/vmx.html-5624dd0d.js" as="script"><link rel="prefetch" href="/assets/what-is-the-COM-in-windows.html-c27cd365.js" as="script"><link rel="prefetch" href="/assets/what-is-the-epoll.html-401dab53.js" as="script"><link rel="prefetch" href="/assets/what-is-the-file-descriptor.html-d3f24efa.js" as="script"><link rel="prefetch" href="/assets/what-is-the-meaning-of-__no_mangle_.html-224c6499.js" as="script"><link rel="prefetch" href="/assets/what-is-the-meaning-of-__repr(C)_.html-beae7365.js" as="script"><link rel="prefetch" href="/assets/what-is-the-varargs-in-python.html-315949ad.js" as="script"><link rel="prefetch" href="/assets/what-the-different-self-and-Self-in-Rust.html-1d6c7339.js" as="script"><link rel="prefetch" href="/assets/windows-SystemFirmwareTable.html-46b5bdea.js" as="script"><link rel="prefetch" href="/assets/windows-dev.html-b4bd6cdc.js" as="script"><link rel="prefetch" href="/assets/index.html-0032b030.js" as="script"><link rel="prefetch" href="/assets/product-research.html-2a210755.js" as="script"><link rel="prefetch" href="/assets/google-android-atrace.html-21301b1b.js" as="script"><link rel="prefetch" href="/assets/google-android-graphics.html-1867f860.js" as="script"><link rel="prefetch" href="/assets/google-android-performance-overview.html-28ca92f8.js" as="script"><link rel="prefetch" href="/assets/google-android-profiler.html-25293b32.js" as="script"><link rel="prefetch" href="/assets/google-android-system.html-59b7bfdc.js" as="script"><link rel="prefetch" href="/assets/app-launch.html-3c7b606d.js" as="script"><link rel="prefetch" href="/assets/extend.html-0a654d75.js" as="script"><link rel="prefetch" href="/assets/surfaceflinger-init.html-899de574.js" as="script"><link rel="prefetch" href="/assets/surfaceflinger-vsync.html-4e947102.js" as="script"><link rel="prefetch" href="/assets/zygote.html-9bbb8e62.js" as="script"><link rel="prefetch" href="/assets/perfetto-00-outline.html-bbf75ddb.js" as="script"><link rel="prefetch" href="/assets/perfetto-01-overview.html-79819234.js" as="script"><link rel="prefetch" href="/assets/perfetto-02-tracing-101.html-dc0f492b.js" as="script"><link rel="prefetch" href="/assets/perfetto-03-quickstart-record-traces-on-android.html-52594d7e.js" as="script"><link rel="prefetch" href="/assets/perfetto-06-quickstart-sql-analysis-and-metrics copy.html-b56f5d13.js" as="script"><link rel="prefetch" href="/assets/perfetto-07-quickstart-trace-conversion copy.html-75aad3d6.js" as="script"><link rel="prefetch" href="/assets/perfetto-08-quickstart-heap-profiling copy.html-54691a11.js" as="script"><link rel="prefetch" href="/assets/perfetto-09-quickstart-callstack-sampling-on-android copy.html-02623a4b.js" as="script"><link rel="prefetch" href="/assets/perfetto-10-faq.html-baa0f253.js" as="script"><link rel="prefetch" href="/assets/perfetto-11-case-stuides-android-boot-tracing.html-e50e4e3c.js" as="script"><link rel="prefetch" href="/assets/perfetto-12-data-sources-debugging-memory-usage.html-daa959e8.js" as="script"><link rel="prefetch" href="/assets/perfetto-13-data-sources-memory-counter-and-events.html-5b5bb1fe.js" as="script"><link rel="prefetch" href="/assets/perfetto-14-data-sources-memory-heap-profiler.html-40ee3b4d.js" as="script"><link rel="prefetch" href="/assets/perfetto-15-data-sources-java-heap-dumps.html-e3705eaa.js" as="script"><link rel="prefetch" href="/assets/perfetto-16-data-sources-cpu-scheduling-events.html-3bcd95f8.js" as="script"><link rel="prefetch" href="/assets/perfetto-17-data-sources-system-calls.html-5577a87d.js" as="script"><link rel="prefetch" href="/assets/perfetto-18-data-sources-cpu-frequency-scaling.html-e8fa6630.js" as="script"><link rel="prefetch" href="/assets/perfetto-21-android-system-android-game-intervention-list.html-97646560.js" as="script"><link rel="prefetch" href="/assets/perfetto-22-data-sources-android-system-atrace-instrumentation.html-488be835.js" as="script"><link rel="prefetch" href="/assets/perfetto-23-data-sources-android-system-android-log.html-ffa51730.js" as="script"><link rel="prefetch" href="/assets/perfetto-24-data-sources-android-system-android-jank.html-8c6ee1ba.js" as="script"><link rel="prefetch" href="/assets/perfetto-25-app-instrumentation-tracing-sdk.html-92489357.js" as="script"><link rel="prefetch" href="/assets/perfetto-28-trace-analysis-trace-processor.html-57d97f08.js" as="script"><link rel="prefetch" href="/assets/perfetto-41-core-concepts-trace-configuration.html-6beb054c.js" as="script"><link rel="prefetch" href="/assets/perfetto-42-core-concepts-buffers-and-dataflow.html-48f22bd4.js" as="script"><link rel="prefetch" href="/assets/perfetto-43-core-concepts-service-model.html-e3a2a664.js" as="script"><link rel="prefetch" href="/assets/fluency-00-outline.html-e0e8bb55.js" as="script"><link rel="prefetch" href="/assets/fluency-01-overview.html-490c0251.js" as="script"><link rel="prefetch" href="/assets/fluency-02-fps.html-cd04c839.js" as="script"><link rel="prefetch" href="/assets/fluency-03-observability-technology.html-375a88ee.js" as="script"><link rel="prefetch" href="/assets/fluency-04-tracing.html-51163c03.js" as="script"><link rel="prefetch" href="/assets/fluency-05-tools-perfetto.html-63a09f67.js" as="script"><link rel="prefetch" href="/assets/fluency-06-tools-android-profiler.html-fd209699.js" as="script"><link rel="prefetch" href="/assets/fluency-07-perfetto-android-overview.html-7c6f44d9.js" as="script"><link rel="prefetch" href="/assets/fluency-08-perfetto-android-graphics-vsync.html-33ca54f2.js" as="script"><link rel="prefetch" href="/assets/index.html-4c1a2191.js" as="script"><link rel="prefetch" href="/assets/native-crash.html-97d208ac.js" as="script"><link rel="prefetch" href="/assets/overview.html-20096d10.js" as="script"><link rel="prefetch" href="/assets/index.html-7f4ac153.js" as="script"><link rel="prefetch" href="/assets/6.006 Introduction To Algorithms.html-b6926431.js" as="script"><link rel="prefetch" href="/assets/6.042J Undergraduate Mathematics For Computer Science.html-4619e1f6.js" as="script"><link rel="prefetch" href="/assets/6.046J Design And Analysis Of Algorithms.html-939c22e5.js" as="script"><link rel="prefetch" href="/assets/6.828 Operating System Engineering.html-5fd979ad.js" as="script"><link rel="prefetch" href="/assets/6.851 Advanced Data Structures.html-96130fb4.js" as="script"><link rel="prefetch" href="/assets/6.854J Advanced Alorithms.html-8a7bd38b.js" as="script"><link rel="prefetch" href="/assets/Lesson-01-A-private-conversation.html-4fabde22.js" as="script"><link rel="prefetch" href="/assets/Lesson-02-Breakfast-or-lunch.html-d3985045.js" as="script"><link rel="prefetch" href="/assets/Lesson-03-Please-send-me-a-card.html-cc4932b1.js" as="script"><link rel="prefetch" href="/assets/Lesson-04-An-exciting-trip.html-6f582222.js" as="script"><link rel="prefetch" href="/assets/Lesson-05-No-Wrong-Numbers.html-29318358.js" as="script"><link rel="prefetch" href="/assets/Lesson-06-Percy-Buttons.html-6a96c684.js" as="script"><link rel="prefetch" href="/assets/Lesson-07-Too-late.html-0c5b2dcb.js" as="script"><link rel="prefetch" href="/assets/Lesson-08-The-best-and-the-worst.html-466c9feb.js" as="script"><link rel="prefetch" href="/assets/Lesson-09-A-cold-welcome.html-372ea3f1.js" as="script"><link rel="prefetch" href="/assets/Lesson-10-Not-For-Jazz.html-77e2369b.js" as="script"><link rel="prefetch" href="/assets/Lesson-11-One-good-turn-deserves-another.html-559a8d1e.js" as="script"><link rel="prefetch" href="/assets/Lesson-12-Goodbye-and-good-luck.html-bbecb5be.js" as="script"><link rel="prefetch" href="/assets/Lesson-13-The-Greenwood-Boys.html-d6b1bbf3.js" as="script"><link rel="prefetch" href="/assets/Lesson-14-Do-you-speak-English.html-8b824f0c.js" as="script"><link rel="prefetch" href="/assets/Lesson-15-Good-news.html-caf22365.js" as="script"><link rel="prefetch" href="/assets/Lesson-16-A-polite-request.html-8bb78e83.js" as="script"><link rel="prefetch" href="/assets/Lesson-17-Always-young.html-15f69b66.js" as="script"><link rel="prefetch" href="/assets/Lesson-18-He-often-does-this.html-ff028797.js" as="script"><link rel="prefetch" href="/assets/Lesson-19-Sold-out.html-348fd40c.js" as="script"><link rel="prefetch" href="/assets/Lesson-20-One-man-in-a-boat.html-db64d74f.js" as="script"><link rel="prefetch" href="/assets/Lesson-21-Mad-or-not.html-069c49d2.js" as="script"><link rel="prefetch" href="/assets/Lesson-22-A-glass-envelope.html-f8b51b7d.js" as="script"><link rel="prefetch" href="/assets/Lesson-23-A-new-house.html-e26e8fc9.js" as="script"><link rel="prefetch" href="/assets/Lesson-24-If-could-be-worse.html-8f9ee0fb.js" as="script"><link rel="prefetch" href="/assets/Lesson-25-Do-the-English-speak-English.html-b70951af.js" as="script"><link rel="prefetch" href="/assets/Lesson-26-The-best-art-critics.html-a39caf41.js" as="script"><link rel="prefetch" href="/assets/Lesson-27-A-wet-night.html-e569b6f8.js" as="script"><link rel="prefetch" href="/assets/Lesson-28-No-parking.html-6f4358b3.js" as="script"><link rel="prefetch" href="/assets/Lesson-29-Taxi.html-8596b1f2.js" as="script"><link rel="prefetch" href="/assets/Lesson-30-Football-or-polo.html-0a915f35.js" as="script"><link rel="prefetch" href="/assets/Lesson-31-Success-story.html-78361cc8.js" as="script"><link rel="prefetch" href="/assets/Lesson-32-Shopping-make-easy.html-ce3bc8ef.js" as="script"><link rel="prefetch" href="/assets/Lesson-33-Out-of-the-darkness.html-a68962f1.js" as="script"><link rel="prefetch" href="/assets/Lesson-34-Quick-work.html-028fafd5.js" as="script"><link rel="prefetch" href="/assets/Lesson-35-Stop-thief.html-3979756d.js" as="script"><link rel="prefetch" href="/assets/Lesson-36-Across-the-Channel.html-7bad183b.js" as="script"><link rel="prefetch" href="/assets/Lesson-37-The-Olympic-Games.html-e75cb258.js" as="script"><link rel="prefetch" href="/assets/Lesson-38-Everything-except-the-weather.html-6ee48d08.js" as="script"><link rel="prefetch" href="/assets/Lesson-39-Am-I-all-right.html-e0c2064d.js" as="script"><link rel="prefetch" href="/assets/Lesson-40-Food-and-talk.html-742a8822.js" as="script"><link rel="prefetch" href="/assets/Lesson-41-Do-you-call-that-a-hat.html-91ead914.js" as="script"><link rel="prefetch" href="/assets/Lesson-42-Not-very-musical.html-88d4fd25.js" as="script"><link rel="prefetch" href="/assets/Lesson-43-Over-the-South-Pole.html-b926c111.js" as="script"><link rel="prefetch" href="/assets/Lesson-44-Through-the-forest.html-52c1a0c9.js" as="script"><link rel="prefetch" href="/assets/Lesson-45-A-clear-conscience.html-0f101d0f.js" as="script"><link rel="prefetch" href="/assets/Lesson-46-Expensive-and-uncomfortable.html-c38b3d04.js" as="script"><link rel="prefetch" href="/assets/Lesson-47-A-thirsty-ghost.html-5f86e940.js" as="script"><link rel="prefetch" href="/assets/Lesson-48-Did-you-want-to-tell-me-something.html-8106d86d.js" as="script"><link rel="prefetch" href="/assets/Lesson-49-The-end-of-a-dream.html-be5f64e8.js" as="script"><link rel="prefetch" href="/assets/Lesson-50-Taken-for-a-ride.html-d83fc6b3.js" as="script"><link rel="prefetch" href="/assets/Lesson-51-Reward-for-virtue.html-a75c4110.js" as="script"><link rel="prefetch" href="/assets/Lesson-52-A-pretty-carpet.html-2a2c98bd.js" as="script"><link rel="prefetch" href="/assets/Lesson-53-Hot-snake.html-df96f98d.js" as="script"><link rel="prefetch" href="/assets/Lesson-54-Sticky-fingers.html-3b8c36ea.js" as="script"><link rel="prefetch" href="/assets/Lesson-55-Not-a-gold-mine.html-9f6a30ee.js" as="script"><link rel="prefetch" href="/assets/Lesson-56-Faster-than-sound.html-b5a1bd79.js" as="script"><link rel="prefetch" href="/assets/Lesson-57-Can-I-help-you_-madam.html-7fd93e15.js" as="script"><link rel="prefetch" href="/assets/Lesson-58-A-blessing-in-disguise.html-772a0dc7.js" as="script"><link rel="prefetch" href="/assets/Lesson-59-In-or-out.html-48f7c0c5.js" as="script"><link rel="prefetch" href="/assets/Lesson-60-The-future.html-e3986962.js" as="script"><link rel="prefetch" href="/assets/Lesson-61-Trouble-with-the-Hubble.html-821a39dc.js" as="script"><link rel="prefetch" href="/assets/Lesson-62-After-the-fire.html-48efcdb6.js" as="script"><link rel="prefetch" href="/assets/Lesson-63-She-was-not-amused.html-51f447aa.js" as="script"><link rel="prefetch" href="/assets/Lesson-64-The-Channel-Tunnel.html-e68e0696.js" as="script"><link rel="prefetch" href="/assets/Lesson-65-Jumbo-versus-the-police.html-081139cf.js" as="script"><link rel="prefetch" href="/assets/Lesson-66-Sweet-as-honey.html-9539c1c8.js" as="script"><link rel="prefetch" href="/assets/Lesson-67-Volcanoes.html-c9d058b4.js" as="script"><link rel="prefetch" href="/assets/Lesson-68-Persistent.html-faa88a38.js" as="script"><link rel="prefetch" href="/assets/Lesson-69-But-not-murder.html-14d850a2.js" as="script"><link rel="prefetch" href="/assets/Lesson-70-Red-for-danger.html-cfccadc0.js" as="script"><link rel="prefetch" href="/assets/Lesson-71-A-famous-clock.html-042dd287.js" as="script"><link rel="prefetch" href="/assets/Lesson-72-A-car-called-bluebird.html-877649b4.js" as="script"><link rel="prefetch" href="/assets/Lesson-73-The-record-holder.html-c9d59762.js" as="script"><link rel="prefetch" href="/assets/Lesson-74-Out-of-the-limelight.html-fd3c62e2.js" as="script"><link rel="prefetch" href="/assets/Lesson-75-SOS.html-8fa8bb7c.js" as="script"><link rel="prefetch" href="/assets/Lesson-76-April-Fools-Day.html-b509e3a3.js" as="script"><link rel="prefetch" href="/assets/Lesson-77-Successful-operation.html-390459c2.js" as="script"><link rel="prefetch" href="/assets/Lesson-78-The-last-one.html-25637688.js" as="script"><link rel="prefetch" href="/assets/Lesson-79-By-air.html-8f22dd45.js" as="script"><link rel="prefetch" href="/assets/Lesson-80-The-Crystal-Palace.html-6c1fa144.js" as="script"><link rel="prefetch" href="/assets/Lesson-81-Escape.html-82075314.js" as="script"><link rel="prefetch" href="/assets/Lesson-82-Monster-or-fish.html-22cf6f94.js" as="script"><link rel="prefetch" href="/assets/Lesson-83-After-the-elections.html-23e823f5.js" as="script"><link rel="prefetch" href="/assets/Lesson-84-On-strike.html-774654ba.js" as="script"><link rel="prefetch" href="/assets/Lesson-85-Never-too-old-to-learn.html-2c92ff10.js" as="script"><link rel="prefetch" href="/assets/Lesson-86-Out-of-control.html-9886df03.js" as="script"><link rel="prefetch" href="/assets/Lesson-87-A-perfect-alibi.html-9115e967.js" as="script"><link rel="prefetch" href="/assets/Lesson-88-Trapped-in-a-mine.html-a6b454c5.js" as="script"><link rel="prefetch" href="/assets/Lesson-89-A-slip-of-the-tongue.html-ad14b7a1.js" as="script"><link rel="prefetch" href="/assets/Lesson-90-What-is-for-supper.html-1e41b5af.js" as="script"><link rel="prefetch" href="/assets/Lesson-91-Three-men-in-a-basket.html-81ab150b.js" as="script"><link rel="prefetch" href="/assets/Lesson-92-Asking-for-trouble.html-e465ca81.js" as="script"><link rel="prefetch" href="/assets/Lesson-93-A-noble-gift.html-7214ba32.js" as="script"><link rel="prefetch" href="/assets/Lesson-94-Future-champions.html-31de55cd.js" as="script"><link rel="prefetch" href="/assets/Lesson-95-A-fantasy.html-e788c659.js" as="script"><link rel="prefetch" href="/assets/Lesson-96-The-dead-return.html-e10b1a7d.js" as="script"><link rel="prefetch" href="/assets/404.html-fcd8d78c.js" as="script"><link rel="prefetch" href="/assets/index.html-249bedd3.js" as="script"><link rel="prefetch" href="/assets/index.html-466a3f1e.js" as="script"><link rel="prefetch" href="/assets/index.html-d318f831.js" as="script"><link rel="prefetch" href="/assets/index.html-f7f858d7.js" as="script"><link rel="prefetch" href="/assets/index.html-160ed3bd.js" as="script"><link rel="prefetch" href="/assets/index.html-24a580b0.js" as="script"><link rel="prefetch" href="/assets/index.html-1fcd1520.js" as="script"><link rel="prefetch" href="/assets/index.html-77bf936d.js" as="script"><link rel="prefetch" href="/assets/index.html-64357d2d.js" as="script"><link rel="prefetch" href="/assets/index.html-13a88a83.js" as="script"><link rel="prefetch" href="/assets/index.html-1969dbf6.js" as="script"><link rel="prefetch" href="/assets/index.html-d7de265f.js" as="script"><link rel="prefetch" href="/assets/index.html-1b890be5.js" as="script"><link rel="prefetch" href="/assets/index.html-33736a30.js" as="script"><link rel="prefetch" href="/assets/index.html-58203542.js" as="script"><link rel="prefetch" href="/assets/index.html-cf4d74db.js" as="script"><link rel="prefetch" href="/assets/index.html-4e8444cd.js" as="script"><link rel="prefetch" href="/assets/index.html-d968eee7.js" as="script"><link rel="prefetch" href="/assets/index.html-3f044536.js" as="script"><link rel="prefetch" href="/assets/index.html-1328e642.js" as="script"><link rel="prefetch" href="/assets/index.html-8d91fbf8.js" as="script"><link rel="prefetch" href="/assets/index.html-0cf489c2.js" as="script"><link rel="prefetch" href="/assets/index.html-013e8049.js" as="script"><link rel="prefetch" href="/assets/index.html-edb2ef5f.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-381f4bbc.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container no-sidebar has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/images/favicon-32x32.png" alt="biezhihua的日常"><!----><span class="site-name hide-in-pad">biezhihua的日常</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="LeetCode"><span class="title"><!---->LeetCode</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/learn-leetcode/" class="nav-link" aria-label="学习大纲"><!---->学习大纲<!----></a></li><li class="dropdown-item"><a href="/learn-leetcode/Algorithms-analysis.html" class="nav-link" aria-label="算法分析"><!---->算法分析<!----></a></li><li class="dropdown-item"><a href="/learn-leetcode/Algorithms-thinking.html" class="nav-link" aria-label="算法思想"><!---->算法思想<!----></a></li><li class="dropdown-item"><a href="/learn-leetcode/Algorithms.html" class="nav-link" aria-label="算法"><!---->算法<!----></a></li><li class="dropdown-item"><a href="/learn-leetcode/Data-structure.html" class="nav-link" aria-label="数据结构"><!---->数据结构<!----></a></li><li class="dropdown-item"><a href="/learn-leetcode/Algorithms-math-base.html" class="nav-link" aria-label="数学基础"><!---->数学基础<!----></a></li><li class="dropdown-item"><a href="/learn-leetcode/Algorithms-apply.html" class="nav-link" aria-label="算法应用"><!---->算法应用<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="English"><span class="title"><!---->English</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/learn-english/" class="nav-link" aria-label="学习大纲"><!---->学习大纲<!----></a></li><li class="dropdown-item"><a href="/learn-english/NCE/" class="nav-link" aria-label="新概念"><!---->新概念<!----></a></li><li class="dropdown-item"><a href="/learn-english/difficult-sentence.html" class="nav-link" aria-label="疑难句分析"><!---->疑难句分析<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/about-me.html" class="nav-link" aria-label="AboutMe"><!---->AboutMe<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Android | AOSP | build aosp and run image to emulator in windows11</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-04-27T12:33:45.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 19 分钟</span><meta property="timeRequired" content="PT19M"></span><!----><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag3 clickable" role="navigation">android</span><span class="page-tag-item tag2 clickable" role="navigation">aosp</span><meta property="keywords" content="android,aosp"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#environment" class="router-link-active router-link-exact-active toc-link level2">environment</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#wsl2-is-migrated-to-another-hard-disk" class="router-link-active router-link-exact-active toc-link level2">wsl2 is migrated to another hard disk</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#wls2-expand-the-capacity-of-ubuntu-18-04" class="router-link-active router-link-exact-active toc-link level2">wls2 expand the capacity of ubuntu-18.04</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#如何给wls2-ubuntu18-0-4-扩充磁盘容量" class="router-link-active router-link-exact-active toc-link level2">如何给WLS2-Ubuntu18.0.4 扩充磁盘容量</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#wls2-install-android-studio-clion" class="router-link-active router-link-exact-active toc-link level2">wls2 install android-studio &amp;&amp; clion</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#aosp-install-repo" class="router-link-active router-link-exact-active toc-link level2">aosp install repo</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#aosp-simple-download-and-build" class="router-link-active router-link-exact-active toc-link level2">aosp simple download and build</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#aosp-checkout-branch" class="router-link-active router-link-exact-active toc-link level2">aosp checkout branch</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#repo-clean-all-unsaved-files" class="router-link-active router-link-exact-active toc-link level2">repo clean all unsaved files</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#replace-source" class="router-link-active router-link-exact-active toc-link level2">replace source</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#prepare-build-environment-of-wls2-ubuntu-18-04" class="router-link-active router-link-exact-active toc-link level2">prepare build environment of wls2 - Ubuntu-18.04</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#build-aosp" class="router-link-active router-link-exact-active toc-link level2">build aosp</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#wls2-set-the-fixed-ip-address-set-the-read-and-write-capability-of-the-smb-directory" class="router-link-active router-link-exact-active toc-link level2">wls2 set the fixed IP address &amp; set the read and write capability of the SMB directory</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#run-a-compiled-image-to-emulator-method1" class="router-link-active router-link-exact-active toc-link level2">run a compiled image to emulator | method1</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#run-a-compiled-image-to-emulator-method2" class="router-link-active router-link-exact-active toc-link level2">run a compiled image to emulator | method2</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#run-a-compiled-image-to-emulator-method3" class="router-link-active router-link-exact-active toc-link level2">run a compiled image to emulator | method3</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#对于aosp-如何打包单个模块并更新system-img文件-请以framework-native为例" class="router-link-active router-link-exact-active toc-link level2">对于AOSP，如何打包单个模块并更新system.img文件，请以framework/native为例</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#对于aosp-如何打包单个模块并更新system-img文件-请以framework-native-surfaceflinger为例" class="router-link-active router-link-exact-active toc-link level2">对于AOSP，如何打包单个模块并更新system.img文件，请以framework/native/surfaceflinger为例</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#error-createramdiskwithbootconfig-can-t-open-product-emulator-x86-64-initrd-for-writing" class="router-link-active router-link-exact-active toc-link level2">ERROR | createRamdiskWithBootconfig: Can&#39;t open &#39;product\emulator_x86_64\initrd&#39; for writing</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#aosp中打印函数调用栈-在surfaceflinger" class="router-link-active router-link-exact-active toc-link level2">AOSP中打印函数调用栈，在surfaceflinger</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#aosp-过滤调用栈日志" class="router-link-active router-link-exact-active toc-link level2">AOSP 过滤调用栈日志</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#aidegen-ide导入aosp源码" class="router-link-active router-link-exact-active toc-link level2">AIDEGen IDE导入AOSP源码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#clion-debug-android-native-code" class="router-link-active router-link-exact-active toc-link level2">CLion debug android native code</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#安装lldb" class="router-link-active router-link-exact-active toc-link level3">安装LLDB</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#lldb-for-android" class="router-link-active router-link-exact-active toc-link level3">LLDB FOR Android</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#lldb-vs-code-debug-android-native-code" class="router-link-active router-link-exact-active toc-link level3">LLDB VS Code debug android native code</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#gdb-clion-debug-android-native-code" class="router-link-active router-link-exact-active toc-link level2">GDB Clion debug android native code</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#android-emulator-怎么开启-gdbserver" class="router-link-active router-link-exact-active toc-link level3">android emulator 怎么开启 gdbserver</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#android可用的gdbserver在哪里可以找到" class="router-link-active router-link-exact-active toc-link level3">android可用的gdbserver在哪里可以找到</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#clion预览代码-lldb调试代码" class="router-link-active router-link-exact-active toc-link level2">CLion预览代码，LLDB调试代码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#init-got-an-unexpected-keyword-argument-text" class="router-link-active router-link-exact-active toc-link level2">init() got an unexpected keyword argument &#39;text&#39;</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/learn-android/aosp/build-aosp-in-wls.html#other" class="router-link-active router-link-exact-active toc-link level2">other</a></li><!----><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="android-aosp-build-aosp-and-run-image-to-emulator-in-windows11" tabindex="-1"><a class="header-anchor" href="#android-aosp-build-aosp-and-run-image-to-emulator-in-windows11" aria-hidden="true">#</a> Android | AOSP | build aosp and run image to emulator in windows11</h1><h2 id="environment" tabindex="-1"><a class="header-anchor" href="#environment" aria-hidden="true">#</a> environment</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 宿主系统
Windows11

// 编译aosp系统
WSL2 - Ubuntu-18.04

// aosp分支
android-13.0.0_r41
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container danger"><p class="hint-container-title">警告</p><p>注意：AOSP代码必须存放在WLS2内部，否则在Windows上会产生很多未保存文件，影响分支切换，代码更新。</p></div><h2 id="wsl2-is-migrated-to-another-hard-disk" tabindex="-1"><a class="header-anchor" href="#wsl2-is-migrated-to-another-hard-disk" aria-hidden="true">#</a> wsl2 is migrated to another hard disk</h2><p>可以通过以下步骤将 WSL2 迁移至其他硬盘：</p><ol><li>关闭 WSL2</li></ol><p>首先需要关闭正在运行的 WSL2，可以在 PowerShell 或 CMD 中输入以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">--shutdown</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>导出 WSL2 镜像</li></ol><p>使用以下命令导出 WSL2 镜像，其中 <code>&lt;distribution&gt;</code> 是要导出的发行版的名称，<code>&lt;file&gt;</code> 是导出的文件名和路径：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">--export</span> <span class="token operator">&lt;</span>distribution<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>删除旧的 WSL2 镜像</li></ol><p>在导出镜像之前，需要删除原来的 WSL2 镜像。可以通过以下命令列出已安装的 WSL2 发行版：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">--list</span> <span class="token parameter variable">--verbose</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后通过以下命令删除指定的 WSL2 发行版：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">--unregister</span> <span class="token operator">&lt;</span>distribution<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>导入 WSL2 镜像</li></ol><p>使用以下命令导入 WSL2 镜像，其中 <code>&lt;distribution&gt;</code> 是要导入的发行版的名称，<code>&lt;file&gt;</code> 是导出的文件名和路径：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">--import</span> <span class="token operator">&lt;</span>distribution<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>directory<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中 <code>&lt;directory&gt;</code> 是新的 WSL2 镜像目录的路径。</p><ol start="5"><li>启动新的 WSL2</li></ol><p>通过以下命令启动新的 WSL2：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">-d</span> <span class="token operator">&lt;</span>distribution<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中 <code>&lt;distribution&gt;</code> 是要启动的发行版的名称。</p><p>注意：在进行上述操作时，请确保备份重要数据并了解风险。</p><ul><li><a href="https://blog.csdn.net/zyb418/article/details/124114683" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/zyb418/article/details/124114683<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="wls2-expand-the-capacity-of-ubuntu-18-04" tabindex="-1"><a class="header-anchor" href="#wls2-expand-the-capacity-of-ubuntu-18-04" aria-hidden="true">#</a> wls2 expand the capacity of ubuntu-18.04</h2><ul><li><a href="https://learn.microsoft.com/zh-cn/windows/wsl/disk-space" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/windows/wsl/disk-space<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.jianshu.com/p/2348dc7e9aef" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/2348dc7e9aef<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/expand-vdisk" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/expand-vdisk<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="如何给wls2-ubuntu18-0-4-扩充磁盘容量" tabindex="-1"><a class="header-anchor" href="#如何给wls2-ubuntu18-0-4-扩充磁盘容量" aria-hidden="true">#</a> 如何给WLS2-Ubuntu18.0.4 扩充磁盘容量</h2><p>在 WSL2 (Windows Subsystem for Linux 2) 中，Ubuntu 18.04 默认会将磁盘存储为一个 VHDX 文件。要扩展 WSL2 Ubuntu 18.04 的磁盘容量，请按照以下步骤操作：</p><p><strong>步骤 1</strong>：关闭 WSL2 实例。在 Windows PowerShell 或命令提示符中运行以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl <span class="token parameter variable">--shutdown</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>步骤 2</strong>：找到 VHDX 文件。WSL2 实例的 VHDX 文件通常位于 <code>C:\Users\&lt;YourUsername&gt;\AppData\Local\Packages\</code> 目录下。然后进入一个名为 <code>CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc</code>（这个名字可能略有不同）的文件夹。接下来，进入 <code>LocalState</code> 文件夹。在此文件夹中，您应该可以找到名为 <code>ext4.vhdx</code> 的文件。</p><p><strong>步骤 3</strong>：扩展 VHDX 文件。首先，打开 Windows PowerShell 或命令提示符以管理员身份运行。然后，使用 <code>Resize-VHD</code> 命令扩展 VHDX 文件。将 <code>&lt;YourPath&gt;</code> 替换为实际的 VHDX 文件路径，并将 <code>&lt;NewSize&gt;</code> 替换为您要扩展到的新大小（以 GB 为单位）。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Resize-VHD <span class="token parameter variable">-Path</span> <span class="token operator">&lt;</span>YourPath<span class="token operator">&gt;</span><span class="token punctuation">\</span>ext4.vhdx <span class="token parameter variable">-SizeBytes</span> <span class="token operator">&lt;</span>NewSize<span class="token operator">&gt;</span>GB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>例如，如果 VHDX 文件位于 <code>C:\Users\example\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc\LocalState\ext4.vhdx</code>，并且您希望将其扩展到 50GB，则应运行以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Resize-VHD <span class="token parameter variable">-Path</span> <span class="token string">&quot;C:\Users<span class="token entity" title="\e">\e</span>xample\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc\LocalState<span class="token entity" title="\e">\e</span>xt4.vhdx&quot;</span> <span class="token parameter variable">-SizeBytes</span> 50GB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>步骤 4</strong>：启动 WSL2 实例。在 Windows PowerShell 或命令提示符中运行以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wsl
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>步骤 5</strong>：现在，您需要在 WSL2 Ubuntu 18.04 内部调整文件系统。运行以下命令，将 <code>&lt;NewSize&gt;</code> 替换为实际的新大小（以 GB 为单位）：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> resize2fs /dev/sda <span class="token operator">&lt;</span>NewSize<span class="token operator">&gt;</span>G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>例如，如果您将 VHDX 文件扩展到 50GB，则应运行以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> resize2fs /dev/sda 50G
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>完成这些步骤后，WSL2 Ubuntu 18.04 的磁盘容量应已成功扩展。您可以使用 <code>df -h</code> 命令检查新的磁盘空间。</p><h2 id="wls2-install-android-studio-clion" tabindex="-1"><a class="header-anchor" href="#wls2-install-android-studio-clion" aria-hidden="true">#</a> wls2 install android-studio &amp;&amp; clion</h2><p><a href="https://learn.microsoft.com/zh-cn/windows/wsl/tutorials/gui-apps" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/windows/wsl/tutorials/gui-apps<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="aosp-install-repo" tabindex="-1"><a class="header-anchor" href="#aosp-install-repo" aria-hidden="true">#</a> aosp install repo</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> repo
<span class="token function">sudo</span> <span class="token function">apt</span> upgrade repo
<span class="token builtin class-name">cd</span> .repo/repo/
<span class="token function">git</span> pull
<span class="token function">cp</span> /home/biezhihua/projects/aosp/.repo/repo/repo /usr/bin/repo
<span class="token function">chmod</span> a+rx /usr/bin/repo
repo <span class="token function">sync</span> <span class="token parameter variable">-c</span> <span class="token parameter variable">-j8</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://source.android.com/docs/setup/download" target="_blank" rel="noopener noreferrer">https://source.android.com/docs/setup/download<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://gerrit.googlesource.com/git-repo/+/refs/heads/master/README.md" target="_blank" rel="noopener noreferrer">https://gerrit.googlesource.com/git-repo/+/refs/heads/master/README.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="aosp-simple-download-and-build" tabindex="-1"><a class="header-anchor" href="#aosp-simple-download-and-build" aria-hidden="true">#</a> aosp simple download and build</h2><p>要下载AOSP（Android Open Source Project），请按照以下步骤操作：</p><ol><li><p>安装Git：要从AOSP代码仓库中下载源代码，您需要先在计算机上安装Git。您可以从Git官网下载安装程序并按照说明进行安装。</p></li><li><p>获取AOSP代码：打开终端或命令行窗口，在命令行中输入以下命令，以下载AOSP代码：</p></li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> aosp
<span class="token builtin class-name">cd</span> aosp
repo init <span class="token parameter variable">-u</span> https://android.googlesource.com/platform/manifest <span class="token parameter variable">-b</span> <span class="token operator">&lt;</span>branch<span class="token operator">&gt;</span>
repo <span class="token function">sync</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中，<code>&lt;branch&gt;</code> 表示您要下载的AOSP版本的分支名称。例如，要下载Android 12（代码名称为S），请使用以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>repo init <span class="token parameter variable">-u</span> https://android.googlesource.com/platform/manifest <span class="token parameter variable">-b</span> android-12.0.0_r1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>此命令将初始化repo工具，并使用指定的分支从AOSP代码仓库中获取源代码。然后，使用 <code>repo sync</code> 命令将所有源代码下载到本地计算机上。</p><ol start="3"><li>构建AOSP：下载完AOSP源代码后，可以使用以下命令构建AOSP：</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">source</span> build/envsetup.sh
lunch
<span class="token function">make</span> <span class="token parameter variable">-j4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中，<code>source build/envsetup.sh</code> 命令将设置必要的环境变量，<code>lunch</code> 命令将提示您选择要构建的目标设备类型和版本，而 <code>make -j4</code> 命令将开始构建过程。请注意，这个过程可能需要一些时间和大量的磁盘空间。</p><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/" target="_blank" rel="noopener noreferrer">https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://juejin.cn/post/7038543675109933070" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7038543675109933070<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="aosp-checkout-branch" tabindex="-1"><a class="header-anchor" href="#aosp-checkout-branch" aria-hidden="true">#</a> aosp checkout branch</h2><p>切换分支需要先进入到你本地的AOSP代码目录中，然后使用以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>repo init <span class="token parameter variable">-b</span> <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span>
repo <span class="token function">sync</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>其中<code>&lt;branch-name&gt;</code>指定你要切换到的分支名，例如切换到Android 13的分支，则可以使用以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>repo init <span class="token parameter variable">-b</span> android-13.0.0_r41
repo <span class="token function">sync</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>执行完以上命令后，AOSP代码就会被同步到对应的分支。注意，切换分支可能会导致一些代码库的版本变化，需要谨慎操作。</p><h2 id="repo-clean-all-unsaved-files" tabindex="-1"><a class="header-anchor" href="#repo-clean-all-unsaved-files" aria-hidden="true">#</a> repo clean all unsaved files</h2><p>Repo工具是Git工具的扩展，用于管理多个Git代码仓库。与Git类似，Repo也不会在本地仓库中保存未提交的更改。因此，您需要使用文本编辑器或其他适当的工具来保存您的更改。如果您已经对某些文件进行了更改，但还没有提交它们，您可以使用以下方法来清除这些更改：</p><ol><li>如果您只想清除单个Git仓库中的文件更改，请使用以下命令：</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>repo forall <span class="token operator">&lt;</span>project<span class="token operator">&gt;</span> <span class="token parameter variable">-c</span> <span class="token string">&quot;git checkout -- file-name&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中 <code>&lt;project&gt;</code> 是您要清除更改的Git仓库的名称，<code>file-name</code> 是要清除更改的文件名。该命令将覆盖本地的更改，并还原文件为最后一次提交的状态。</p><ol start="2"><li>如果您想清除所有Git仓库中的未提交更改，请使用以下命令：</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>repo forall <span class="token parameter variable">-c</span> <span class="token string">&quot;git reset --hard&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>该命令将重置所有Git仓库的本地仓库到最后一次提交的状态，并清除所有未提交的更改。请注意，这将不可逆地删除所有未提交的更改，因此请谨慎使用。</p><p>无论您使用哪种方法，都要确保在清除更改之前，将重要的更改保存到其他文件或备份中。</p><h2 id="replace-source" tabindex="-1"><a class="header-anchor" href="#replace-source" aria-hidden="true">#</a> replace source</h2><p>如果你之前已经通过某种途径获得了 AOSP 的源码(或者你只是 init 这一步完成后)， 你希望以后通过 TUNA 同步 AOSP 部分的代码，只需要修改 .repo/manifests.git/config，将</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>url = https://android.googlesource.com/platform/manifest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>更改为</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>url = https://mirrors.tuna.tsinghua.edu.cn/git/AOSP/platform/manifest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或者可以不修改文件，而执行</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>git config --global url.https://mirrors.tuna.tsinghua.edu.cn/git/AOSP/.insteadof https://android.googlesource.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><a href="https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/" target="_blank" rel="noopener noreferrer">https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="prepare-build-environment-of-wls2-ubuntu-18-04" tabindex="-1"><a class="header-anchor" href="#prepare-build-environment-of-wls2-ubuntu-18-04" aria-hidden="true">#</a> prepare build environment of wls2 - Ubuntu-18.04</h2><p><a href="https://source.android.com/docs/setup/start/initializing#installing-required-packages-ubuntu-1804" target="_blank" rel="noopener noreferrer">https://source.android.com/docs/setup/start/initializing#installing-required-packages-ubuntu-1804<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="build-aosp" tabindex="-1"><a class="header-anchor" href="#build-aosp" aria-hidden="true">#</a> build aosp</h2><p>查看CPU核心数量：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">grep</span> <span class="token string">&#39;core id&#39;</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-u</span> <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><a href="https://juejin.cn/post/7043063280704684063" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7043063280704684063<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.csdn.net/nei504293736/article/details/109628378" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/nei504293736/article/details/109628378<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://luyaoming.com/2021/06/23/wsl2%E4%B8%8B%E4%B8%8B%E8%BD%BD%E4%B8%8E%E7%BC%96%E8%AF%91AOSP/" target="_blank" rel="noopener noreferrer">https://luyaoming.com/2021/06/23/wsl2下下载与编译AOSP/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="wls2-set-the-fixed-ip-address-set-the-read-and-write-capability-of-the-smb-directory" tabindex="-1"><a class="header-anchor" href="#wls2-set-the-fixed-ip-address-set-the-read-and-write-capability-of-the-smb-directory" aria-hidden="true">#</a> wls2 set the fixed IP address &amp; set the read and write capability of the SMB directory</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>share<span class="token punctuation">]</span>
   comment <span class="token operator">=</span> share
   path <span class="token operator">=</span> /home/biezhihua/projects/aosp
   force user <span class="token operator">=</span> root
   writeable <span class="token operator">=</span> <span class="token function">yes</span>
   browseable <span class="token operator">=</span> <span class="token function">yes</span>
   public <span class="token operator">=</span> <span class="token function">yes</span>
   create mask <span class="token operator">=</span> 0644
   directory mask <span class="token operator">=</span> 0755
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> smbd restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><a href="https://zhuanlan.zhihu.com/p/380779630" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/380779630<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/MicrosoftDocs/WSL/issues/418#issuecomment-648570865" target="_blank" rel="noopener noreferrer">https://github.com/MicrosoftDocs/WSL/issues/418#issuecomment-648570865<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.csdn.net/weixin_41301508/article/details/108939520" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/weixin_41301508/article/details/108939520<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://unix.stackexchange.com/questions/206309/how-to-create-a-samba-share-that-is-writable-from-windows-without-777-permission" target="_blank" rel="noopener noreferrer">https://unix.stackexchange.com/questions/206309/how-to-create-a-samba-share-that-is-writable-from-windows-without-777-permission<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.csdn.net/sinat_21011081/article/details/118404717?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-118404717-blog-108939520.235%5Ev32%5Epc_relevant_default_base3&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-118404717-blog-108939520.235%5Ev32%5Epc_relevant_default_base3&amp;utm_relevant_index=1" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/sinat_21011081/article/details/118404717?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-118404717-blog-108939520.235^v32^pc_relevant_default_base3&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-118404717-blog-108939520.235^v32^pc_relevant_default_base3&amp;utm_relevant_index=1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="run-a-compiled-image-to-emulator-method1" tabindex="-1"><a class="header-anchor" href="#run-a-compiled-image-to-emulator-method1" aria-hidden="true">#</a> run a compiled image to emulator | method1</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>
<span class="token comment">#擦除已有的avd数据</span>
D:<span class="token punctuation">\</span>Android<span class="token punctuation">\</span>sdk<span class="token punctuation">\</span>emulator<span class="token punctuation">\</span>emulator.exe <span class="token parameter variable">-avd</span> biezhihua_aosp  -wipe-data

<span class="token comment">#模拟器重新加载android image</span>
D:<span class="token punctuation">\</span>Android<span class="token punctuation">\</span>sdk<span class="token punctuation">\</span>emulator<span class="token punctuation">\</span>emulator.exe <span class="token parameter variable">-avd</span> biezhihua_aosp  <span class="token parameter variable">-system</span> <span class="token string">&quot;your_android_path\out<span class="token entity" title="\t">\t</span>arget\product\generic_x86_64\system.img&quot;</span> <span class="token parameter variable">-data</span> <span class="token string">&quot;your_android_path\out<span class="token entity" title="\t">\t</span>arget\product\generic_x86_64\userdata.img&quot;</span>

 D:<span class="token punctuation">\</span>Android<span class="token punctuation">\</span>sdk<span class="token punctuation">\</span>emulator<span class="token punctuation">\</span>emulator.exe <span class="token parameter variable">-avd</span> biezhihua_aosp  <span class="token parameter variable">-system</span> <span class="token string">&quot;<span class="token entity" title="\\">\\</span>wsl.localhost\Ubuntu-18.04\home<span class="token entity" title="\b">\b</span>iezhihua\projects<span class="token entity" title="\a">\a</span>osp\out<span class="token entity" title="\t">\t</span>arget\product<span class="token entity" title="\e">\e</span>mulator_x86_64\system.img&quot;</span> <span class="token parameter variable">-data</span> <span class="token string">&quot;<span class="token entity" title="\\">\\</span>wsl.localhost\Ubuntu-18.04\home<span class="token entity" title="\b">\b</span>iezhihua\projects<span class="token entity" title="\a">\a</span>osp\out<span class="token entity" title="\t">\t</span>arget\product<span class="token entity" title="\e">\e</span>mulator_x86_64\userdata.img&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://blog.csdn.net/dangelzjj/article/details/109267411" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/dangelzjj/article/details/109267411<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.csdn.net/dangelzjj/article/details/109267411" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/dangelzjj/article/details/109267411<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.csdn.net/yongwn/article/details/121009506" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/yongwn/article/details/121009506<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://groups.google.com/g/android-building/c/O9a6Ohnb5hI?pli=1" target="_blank" rel="noopener noreferrer">https://groups.google.com/g/android-building/c/O9a6Ohnb5hI?pli=1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="run-a-compiled-image-to-emulator-method2" tabindex="-1"><a class="header-anchor" href="#run-a-compiled-image-to-emulator-method2" aria-hidden="true">#</a> run a compiled image to emulator | method2</h2><p>拷贝产物到windows镜像目录下；</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cp</span> out/target/product/emulator_x86_64/VerifiedBootParams.textproto /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/
<span class="token function">cp</span> out/target/product/emulator_x86_64/advancedFeatures.ini /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/
<span class="token function">cp</span> out/target/product/emulator_x86_64/encryptionkey.img /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/
<span class="token function">cp</span> out/target/product/emulator_x86_64/kernel-ranchu /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/
<span class="token function">cp</span> out/target/product/emulator_x86_64/ramdisk-qemu.img /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/ramdisk.img
<span class="token function">cp</span> out/target/product/emulator_x86_64/system-qemu.img /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/system.img
<span class="token function">cp</span> out/target/product/emulator_x86_64/userdata.img /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/
<span class="token function">cp</span> out/target/product/emulator_x86_64/vendor-qemu.img /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/vendor.img
<span class="token function">cp</span> out/target/product/emulator_x86_64/system/build.prop /mnt/d/Android/sdk/system-images/android-33/google_apis/x86_64/

emulator <span class="token parameter variable">-avd</span> Pixel_3_Edited_API_30 -writable-system -wipe-data -show-kernel -skip-adb-auth -no-cache

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>emulator.exe <span class="token parameter variable">-avd</span> biezhihua_aosp  <span class="token parameter variable">-system</span> <span class="token string">&quot;<span class="token entity" title="\\">\\</span>wsl.localhost\Ubuntu-18.04\home<span class="token entity" title="\b">\b</span>iezhihua\projects<span class="token entity" title="\a">\a</span>osp\out<span class="token entity" title="\t">\t</span>arget\product<span class="token entity" title="\e">\e</span>mulator_x86_64\system-qemu.img&quot;</span> <span class="token parameter variable">-data</span> <span class="token string">&quot;<span class="token entity" title="\\">\\</span>wsl.localhost\Ubuntu-18.04\home<span class="token entity" title="\b">\b</span>iezhihua\projects<span class="token entity" title="\a">\a</span>osp\out<span class="token entity" title="\t">\t</span>arget\product<span class="token entity" title="\e">\e</span>mulator_x86_64\userdata.img&quot;</span> -writable-system -wipe-data -show-kernel -skip-adb-auth -no-cache

emulator.exe <span class="token parameter variable">-avd</span> biezhihua_aosp  <span class="token parameter variable">-system</span> <span class="token string">&quot;<span class="token entity" title="\\">\\</span>wsl.localhost\Ubuntu-18.04\home<span class="token entity" title="\b">\b</span>iezhihua\projects<span class="token entity" title="\a">\a</span>osp\out<span class="token entity" title="\t">\t</span>arget\product<span class="token entity" title="\e">\e</span>mulator_x86_64\system-qemu.img&quot;</span> <span class="token parameter variable">-data</span> <span class="token string">&quot;<span class="token entity" title="\\">\\</span>wsl.localhost\Ubuntu-18.04\home<span class="token entity" title="\b">\b</span>iezhihua\projects<span class="token entity" title="\a">\a</span>osp\out<span class="token entity" title="\t">\t</span>arget\product<span class="token entity" title="\e">\e</span>mulator_x86_64\userdata.img&quot;</span> -writable-system -show-kernel -skip-adb-auth
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://sidneyding.cn/posts/c64b5633/" target="_blank" rel="noopener noreferrer">https://sidneyding.cn/posts/c64b5633/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="run-a-compiled-image-to-emulator-method3" tabindex="-1"><a class="header-anchor" href="#run-a-compiled-image-to-emulator-method3" aria-hidden="true">#</a> run a compiled image to emulator | method3</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>emulator <span class="token parameter variable">-avd</span> biezhihua_aosp  <span class="token parameter variable">-system</span> <span class="token string">&quot;/home/biezhihua/projects/aosp/out/target/product/emulator_x86_64/system-qemu.img&quot;</span> <span class="token parameter variable">-data</span> <span class="token string">&quot;/home/biezhihua/projects/aosp/out/target/product/emulator_x86_64/userdata.img&quot;</span> -writable-system -show-kernel -skip-adb-auth -wipe-data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="对于aosp-如何打包单个模块并更新system-img文件-请以framework-native为例" tabindex="-1"><a class="header-anchor" href="#对于aosp-如何打包单个模块并更新system-img文件-请以framework-native为例" aria-hidden="true">#</a> 对于AOSP，如何打包单个模块并更新system.img文件，请以framework/native为例</h2><p>在 AOSP 源代码中，若要仅构建 framework/native 模块并更新 system.img 文件，可按照以下步骤操作：</p><p><strong>步骤 1</strong>：启动一个终端并进入 AOSP 源代码的根目录。</p><p><strong>步骤 2</strong>：启动构建环境，运行以下命令：</p><p>bash</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">source</span> build/envsetup.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>步骤 3</strong>：选择要构建的目标设备。例如，如果要为 <code>sdk_phone_x86_64-eng</code> 构建模块，请运行：</p><p>bash</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>lunch sdk_phone_x86_64-eng
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>步骤 4</strong>：构建 framework/native 模块。<code>framework/native</code> 实际上包含许多模块。假设您要构建 <code>libui</code> 模块，可以执行以下命令：</p><p>bash</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mmm -j<span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span> frameworks/native/libs/ui
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这将仅构建 <code>libui</code> 模块。要构建整个 <code>framework/native</code>，您需要为每个子模块重复此步骤。</p><p><strong>步骤 5</strong>：现在，已经构建了所需的模块，需要将其安装到 system.img 中。为此，请运行以下命令：</p><p>bash</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">make</span> snod
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>此命令将根据已经生成的各个分区（包括已更新的模块）重新生成 system.img 文件。</p><p>完成上述步骤后，您可以在 <code>out/target/product/&lt;device&gt;/</code> 目录下找到更新后的 system.img 文件。此时，您可以将更新后的 system.img 刷入设备或模拟器以进行测试。</p><p>注意：如果您的目标是将新生成的模块（例如 .so 文件）推送到已运行的设备或模拟器上，那么在步骤 4 之后，您可以直接使用 <code>adb push</code> 命令将新生成的模块推送到相应的目录，而无需重新生成整个 system.img。例如：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb root
adb remount
adb push out/target/product/<span class="token operator">&lt;</span>device<span class="token operator">&gt;</span>/system/lib64/libui.so /system/lib64/
adb shell <span class="token function">sync</span>
adb shell <span class="token function">reboot</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请将 <code>&lt;device&gt;</code> 替换为实际的设备名称。这将在重新启动设备后立即应用新的模块。</p><h2 id="对于aosp-如何打包单个模块并更新system-img文件-请以framework-native-surfaceflinger为例" tabindex="-1"><a class="header-anchor" href="#对于aosp-如何打包单个模块并更新system-img文件-请以framework-native-surfaceflinger为例" aria-hidden="true">#</a> 对于AOSP，如何打包单个模块并更新system.img文件，请以framework/native/surfaceflinger为例</h2><p>在 AOSP 源代码中，若要仅构建 framework/native/surfaceflinger 模块并更新 system.img 文件，可按照以下步骤操作：</p><p><strong>步骤 1</strong>：启动一个终端并进入 AOSP 源代码的根目录。</p><p><strong>步骤 2</strong>：启动构建环境，运行以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">source</span> build/envsetup.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>步骤 3</strong>：选择要构建的目标设备。例如，如果要为 <code>sdk_phone_x86_64-eng</code> 构建模块，请运行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>lunch sdk_phone_x86_64-eng
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>步骤 4</strong>：构建 framework/native/surfaceflinger 模块。要构建 SurfaceFlinger 模块，请执行以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mmm -j<span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span> frameworks/native/services/surfaceflinger

mmm <span class="token parameter variable">-j32</span> frameworks/native/services/surfaceflinger
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这将仅构建 SurfaceFlinger 模块。</p><p><strong>步骤 5</strong>：现在，已经构建了所需的模块，需要将其安装到 system.img 中。为此，请运行以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">make</span> snod
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>此命令将根据已经生成的各个分区（包括已更新的模块）重新生成 system.img 文件。</p><p>完成上述步骤后，您可以在 <code>out/target/product/&lt;device&gt;/</code> 目录下找到更新后的 system.img 文件。此时，您可以将更新后的 system.img 刷入设备或模拟器以进行测试。</p><p>注意：如果您的目标是将新生成的模块（例如 .so 文件）推送到已运行的设备或模拟器上，那么在步骤 4 之后，您可以直接使用 <code>adb push</code> 命令将新生成的模块推送到相应的目录，而无需重新生成整个 system.img。例如：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb root
adb remount
adb push out/target/product/<span class="token operator">&lt;</span>device<span class="token operator">&gt;</span>/system/lib64/libsurfaceflinger.so /system/lib64/
adb push <span class="token punctuation">\</span><span class="token punctuation">\</span>wsl.localhost<span class="token punctuation">\</span>Ubuntu-18.04<span class="token punctuation">\</span>home<span class="token punctuation">\</span>biezhihua<span class="token punctuation">\</span>projects<span class="token punctuation">\</span>aosp<span class="token punctuation">\</span>out<span class="token punctuation">\</span>target<span class="token punctuation">\</span>product<span class="token punctuation">\</span>emulator_x86_64<span class="token punctuation">\</span>system<span class="token punctuation">\</span>bin<span class="token punctuation">\</span>NativeSFDemo /system/bin/
adb shell <span class="token function">sync</span>
adb shell <span class="token function">reboot</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请将 <code>&lt;device&gt;</code> 替换为实际的设备名称。这将在重新启动设备后立即应用新的模块。</p><h2 id="error-createramdiskwithbootconfig-can-t-open-product-emulator-x86-64-initrd-for-writing" tabindex="-1"><a class="header-anchor" href="#error-createramdiskwithbootconfig-can-t-open-product-emulator-x86-64-initrd-for-writing" aria-hidden="true">#</a> ERROR | createRamdiskWithBootconfig: Can&#39;t open &#39;product\emulator_x86_64\initrd&#39; for writing</h2><p>这个错误提示的是在创建 ramdisk 时出现问题，无法打开 &quot;product\emulator_x86_64\initrd&quot; 文件进行写入。这可能是由于以下原因之一导致的：</p><ol><li><p><strong>文件路径错误</strong>：请确保 &quot;product\emulator_x86_64\initrd&quot; 文件的路径正确。注意在 Windows 系统中，文件路径中的分隔符应为反斜杠（<code>\</code>），而在类 Unix 系统（如 Linux 和 macOS）中，文件路径中的分隔符应为正斜杠（<code>/</code>）。根据您使用的操作系统，检查文件路径是否正确。</p></li><li><p><strong>文件或文件夹权限问题</strong>：确保您具有足够的权限访问 &quot;product\emulator_x86_64\initrd&quot; 文件。在 Unix 类系统中，您可以使用 <code>chmod</code> 和 <code>chown</code> 命令来更改文件或文件夹的权限。在 Windows 系统中，可以右键单击文件或文件夹，然后选择 &quot;属性&quot;，在 &quot;安全&quot; 选项卡中更改权限。</p></li><li><p><strong>文件或文件夹不存在</strong>：确保 &quot;product\emulator_x86_64&quot; 文件夹存在，并且其中包含 &quot;initrd&quot; 文件。如果缺少该文件，请尝试重新构建项目以生成正确的文件。</p></li><li><p><strong>磁盘空间不足</strong>：请确保您的系统上有足够的磁盘空间可供写入 &quot;product\emulator_x86_64\initrd&quot; 文件。如果磁盘空间不足，请清理一些不需要的文件，以释放足够的空间。</p></li></ol><p>检查以上各项，并根据需要进行相应的修复操作。这应该有助于解决在运行 AOSP 自己编译的镜像时出现的错误。</p><h2 id="aosp中打印函数调用栈-在surfaceflinger" tabindex="-1"><a class="header-anchor" href="#aosp中打印函数调用栈-在surfaceflinger" aria-hidden="true">#</a> AOSP中打印函数调用栈，在surfaceflinger</h2><p>不可以使用下面的命令构建单个模块，因为无法指定工程构建架构，会产生编译错误：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mmm frameworks/native/services/surfaceflinger
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ld.lld: error: undefined symbol: android::CallStack::CallStack()
ld.lld: error: undefined symbol: android::CallStack::update(int, int)
ld.lld: error: undefined symbol: android::CallStack::log(char const*, android_LogPriority, char const*) const
ld.lld: error: undefined symbol: android::CallStack::~CallStack()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://www.cnblogs.com/roger-yu/p/15596840.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/roger-yu/p/15596840.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://utzcoz.github.io/2020/04/29/Print-call-stack-in-AOSP-native-code.html" target="_blank" rel="noopener noreferrer">https://utzcoz.github.io/2020/04/29/Print-call-stack-in-AOSP-native-code.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.csdn.net/zhaojia92/article/details/97827285" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/zhaojia92/article/details/97827285<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="aosp-过滤调用栈日志" tabindex="-1"><a class="header-anchor" href="#aosp-过滤调用栈日志" aria-hidden="true">#</a> AOSP 过滤调用栈日志</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>emulator.exe <span class="token parameter variable">-avd</span> biezhihua_aosp  <span class="token parameter variable">-system</span> <span class="token string">&quot;<span class="token entity" title="\\">\\</span>wsl.localhost\Ubuntu-18.04\home<span class="token entity" title="\b">\b</span>iezhihua\projects<span class="token entity" title="\a">\a</span>osp\out<span class="token entity" title="\t">\t</span>arget\product<span class="token entity" title="\e">\e</span>mulator_x86_64\system-qemu.img&quot;</span> <span class="token parameter variable">-data</span> <span class="token string">&quot;<span class="token entity" title="\\">\\</span>wsl.localhost\Ubuntu-18.04\home<span class="token entity" title="\b">\b</span>iezhihua\projects<span class="token entity" title="\a">\a</span>osp\out<span class="token entity" title="\t">\t</span>arget\product<span class="token entity" title="\e">\e</span>mulator_x86_64\userdata.img&quot;</span> -writable-system -show-kernel -skip-adb-auth -wipe-data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>onComposerHalHotplug</code>的调用栈：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> # adb logcat | findstr &quot;bzh&quot;
05-03 23:34:47.773   443   443 D bzh     : #00 pc 00000000001ec91c  /system/bin/surfaceflinger (android::SurfaceFlinger::onComposerHalHotplug(unsigned long, android::hardware::graphics::composer::V2_1::IComposerCallback::Connection)+524)
05-03 23:34:47.773   443   443 D bzh     : #01 pc 000000000017bd71  /system/bin/surfaceflinger (android::Hwc2::(anonymous namespace)::ComposerCallbackBridge::onHotplug(unsigned long, android::hardware::graphics::composer::V2_1::IComposerCallback::Connection)+17)
05-03 23:34:47.773   443   443 D bzh     : #02 pc 00000000000293ef  /system/lib64/android.hardware.graphics.composer@2.1.so (android::hardware::graphics::composer::V2_1::BnHwComposerCallback::_hidl_onHotplug(android::hidl::base::V1_0::BnHwBase*, android::hardware::Parcel const&amp;, android::hardware::Parcel*, std::__1::function&lt;void (android::hardware::Parcel&amp;)&gt;)+239)
05-03 23:34:47.773   443   443 D bzh     : #03 pc 000000000003859b  /system/lib64/android.hardware.graphics.composer@2.4.so (android::hardware::graphics::composer::V2_4::BnHwComposerCallback::onTransact(unsigned int, android::hardware::Parcel const&amp;, android::hardware::Parcel*, unsigned int, std::__1::function&lt;void (android::hardware::Parcel&amp;)&gt;)+603)
05-03 23:34:47.773   443   443 D bzh     : #04 pc 000000000009ad49  /system/lib64/libhidlbase.so (android::hardware::BHwBinder::transact(unsigned int, android::hardware::Parcel const&amp;, android::hardware::Parcel*, unsigned int, std::__1::function&lt;void (android::hardware::Parcel&amp;)&gt;)+137)
05-03 23:34:47.773   443   443 D bzh     : #05 pc 00000000000a035a  /system/lib64/libhidlbase.so (android::hardware::IPCThreadState::executeCommand(int)+3770)
05-03 23:34:47.773   443   443 D bzh     : #06 pc 00000000000a11a7  /system/lib64/libhidlbase.so (android::hardware::IPCThreadState::waitForResponse(android::hardware::Parcel*, int*)+103)
05-03 23:34:47.774   443   443 D bzh     : #07 pc 00000000000a0ceb  /system/lib64/libhidlbase.so (android::hardware::IPCThreadState::transact(int, unsigned int, android::hardware::Parcel const&amp;, android::hardware::Parcel*, unsigned int)+171)
05-03 23:34:47.774   443   443 D bzh     : #08 pc 000000000009bc95  /system/lib64/libhidlbase.so (android::hardware::BpHwBinder::transact(unsigned int, android::hardware::Parcel const&amp;, android::hardware::Parcel*, unsigned int, std::__1::function&lt;void (android::hardware::Parcel&amp;)&gt;)+69)
05-03 23:34:47.774   443   443 D bzh     : #09 pc 000000000003eb72  /system/lib64/android.hardware.graphics.composer@2.4.so (android::hardware::graphics::composer::V2_4::BpHwComposerClient::_hidl_registerCallback_2_4(android::hardware::IInterface*, android::hardware::details::HidlInstrumentor*, android::sp&lt;android::hardware::graphics::composer::V2_4::IComposerCallback&gt; const&amp;)+514)
05-03 23:34:47.774   443   443 D bzh     : #10 pc 0000000000043298  /system/lib64/android.hardware.graphics.composer@2.4.so (android::hardware::graphics::composer::V2_4::BpHwComposerClient::registerCallback_2_4(android::sp&lt;android::hardware::graphics::composer::V2_4::IComposerCallback&gt; const&amp;)+40)
05-03 23:34:47.774   443   443 D bzh     : #11 pc 0000000000175be5  /system/bin/surfaceflinger (android::Hwc2::HidlComposer::registerCallback(android::HWC2::ComposerCallback&amp;)+229)
05-03 23:34:47.774   443   443 D bzh     : #12 pc 0000000000183c24  /system/bin/surfaceflinger (android::impl::HWComposer::setCallback(android::HWC2::ComposerCallback&amp;)+4004)
05-03 23:34:47.774   443   443 D bzh     : #13 pc 00000000001e4ded  /system/bin/surfaceflinger (android::SurfaceFlinger::init()+877)
05-03 23:34:47.774   443   443 D bzh     : #14 pc 0000000000237994  /system/bin/surfaceflinger (main+1220)
05-03 23:34:47.774   443   443 D bzh     : #15 pc 0000000000050cc9  /apex/com.android.runtime/lib64/bionic/libc.so (__libc_init+89)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="aidegen-ide导入aosp源码" tabindex="-1"><a class="header-anchor" href="#aidegen-ide导入aosp源码" aria-hidden="true">#</a> AIDEGen IDE导入AOSP源码</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>aidegen frameworks/native/services/surfaceflinger <span class="token parameter variable">-i</span> c <span class="token parameter variable">-s</span>
aidegen frameworks/native/services/surfaceflinger <span class="token parameter variable">-i</span> c <span class="token parameter variable">-s</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://zhuanlan.zhihu.com/p/272522594" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/272522594<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.youtube.com/watch?v=XJ0dI2SYHIE" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=XJ0dI2SYHIE<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://juejin.cn/post/7166061140298956836" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7166061140298956836<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://android.googlesource.com/platform/tools/asuite/+/refs/heads/master/aidegen/README.md" target="_blank" rel="noopener noreferrer">https://android.googlesource.com/platform/tools/asuite/+/refs/heads/master/aidegen/README.md<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="clion-debug-android-native-code" tabindex="-1"><a class="header-anchor" href="#clion-debug-android-native-code" aria-hidden="true">#</a> CLion debug android native code</h2><h3 id="安装lldb" tabindex="-1"><a class="header-anchor" href="#安装lldb" aria-hidden="true">#</a> 安装LLDB</h3><ul><li><a href="https://blog.csdn.net/iamdy/article/details/111272854" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/iamdy/article/details/111272854<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://source.android.google.cn/docs/core/tests/debug/gdb?hl=zh-cn" target="_blank" rel="noopener noreferrer">https://source.android.google.cn/docs/core/tests/debug/gdb?hl=zh-cn<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://lldb.llvm.org/" target="_blank" rel="noopener noreferrer">https://lldb.llvm.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.jetbrains.com/help/clion/remote-debug.html" target="_blank" rel="noopener noreferrer">https://www.jetbrains.com/help/clion/remote-debug.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.jianshu.com/p/76ae75688079" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/76ae75688079<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://blog.csdn.net/qq_23542165/article/details/121275404" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_23542165/article/details/121275404<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="lldb-for-android" tabindex="-1"><a class="header-anchor" href="#lldb-for-android" aria-hidden="true">#</a> LLDB FOR Android</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/root/Android/Sdk/ndk/25.2.9519653/toolchains/llvm/prebuilt/linux-x86_64/lib64/clang/14.0.7/lib/linux/x86_64/lldb-server

adb push lldb-server /data/local/tmp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>emulator_x86_64:/data/local/tmp <span class="token comment"># chmod 775 ./lldb-server</span>

emulator_x86_64:/data/local/tmp <span class="token comment"># ./lldb-server platform --listen &quot;*:1234&quot; --server</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb push lldb-server /data/local/tmp/
adb shell 
<span class="token builtin class-name">cd</span> /data/local/tmp
<span class="token function">chmod</span> <span class="token number">755</span> lldb-server
./lldb-server p <span class="token parameter variable">--server</span> <span class="token parameter variable">--listen</span> unix-abstract:///data/local/tmp/debug.sock
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>lldb-<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
platform list  <span class="token comment"># 查看lldb可以连接的平台</span>
platform <span class="token keyword">select</span> remote-android
platform status <span class="token comment"># 查看平台状态</span>
platform connect unix-abstract-connect:///data/local/tmp/debug.sock

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./lldb-server platform <span class="token parameter variable">--listen</span> <span class="token string">&quot;*:1234&quot;</span> <span class="token parameter variable">--server</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>platform connect connect://emulator-5554:1234
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><a href="https://stackoverflow.com/questions/53733781/how-do-i-use-lldb-to-debug-c-code-on-android-on-command-line" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/53733781/how-do-i-use-lldb-to-debug-c-code-on-android-on-command-line<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://youtrack.jetbrains.com/issue/CPP-26922" target="_blank" rel="noopener noreferrer">https://youtrack.jetbrains.com/issue/CPP-26922<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.lili.kim/2019/01/28/android/Debug%20Android%20Native%20with%20LLDB/" target="_blank" rel="noopener noreferrer">https://www.lili.kim/2019/01/28/android/Debug Android Native with LLDB/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="lldb-vs-code-debug-android-native-code" tabindex="-1"><a class="header-anchor" href="#lldb-vs-code-debug-android-native-code" aria-hidden="true">#</a> LLDB VS Code debug android native code</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>aidegen frameworks/native/services <span class="token parameter variable">-i</span> <span class="token function">v</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-p</span> /mnt/d/App/Microsoft<span class="token punctuation">\</span> VS<span class="token punctuation">\</span> Code/bin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><a href="https://github.com/xxr0ss/vscode_lldb_remote_android" target="_blank" rel="noopener noreferrer">https://github.com/xxr0ss/vscode_lldb_remote_android<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="gdb-clion-debug-android-native-code" tabindex="-1"><a class="header-anchor" href="#gdb-clion-debug-android-native-code" aria-hidden="true">#</a> GDB Clion debug android native code</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell pidof surfaceflinger

./gdbserver :12345 <span class="token parameter variable">--attach</span> <span class="token number">460</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><a href="https://www.jetbrains.com/help/clion/remote-debug.html" target="_blank" rel="noopener noreferrer">https://www.jetbrains.com/help/clion/remote-debug.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="android-emulator-怎么开启-gdbserver" tabindex="-1"><a class="header-anchor" href="#android-emulator-怎么开启-gdbserver" aria-hidden="true">#</a> android emulator 怎么开启 gdbserver</h3><p>您可以通过以下步骤在 Android 模拟器上启动 gdbserver：</p><ol><li>在模拟器中安装 gdbserver</li></ol><p>首先，您需要在模拟器中安装 gdbserver。您可以使用以下 adb 命令安装：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>adb push gdbserver /data/local/tmp/
adb shell chmod 755 /data/local/tmp/gdbserver
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>在模拟器中启动 gdbserver</li></ol><p>接下来，您需要在模拟器中启动 gdbserver，以便可以通过 GDB 连接到它。您可以使用以下 adb 命令启动 gdbserver：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>adb shell /data/local/tmp/gdbserver :&lt;port&gt; &lt;process-id&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中 <code>&lt;port&gt;</code> 是您要使用的调试端口号，<code>&lt;process-id&gt;</code> 是您要调试的进程 ID。例如，以下命令将启动 gdbserver 并将其绑定到端口号 1234，以调试进程 ID 12345：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>adb shell /data/local/tmp/gdbserver :1234 12345
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>在主机上连接到 gdbserver</li></ol><p>最后，您需要在主机上运行 GDB，并使用以下命令连接到模拟器中的 gdbserver：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>gdb &lt;executable&gt; -ex &#39;target remote &lt;ip-address&gt;:&lt;port&gt;&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中 <code>&lt;executable&gt;</code> 是您要调试的可执行文件，<code>&lt;ip-address&gt;</code> 是您的模拟器 IP 地址，<code>&lt;port&gt;</code> 是您在第 2 步中指定的端口号。例如，以下命令将使用 GDB 连接到 IP 地址为 192.168.0.2，端口号为 1234 的模拟器：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>gdb my_app -ex &#39;target remote 192.168.0.2:1234&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>请注意，在连接到模拟器之前，您需要确保模拟器和主机在同一网络中，并且可以相互通信。</p><p>希望这可以帮助您启动 gdbserver 并连接到 Android 模拟器进行调试。</p><h3 id="android可用的gdbserver在哪里可以找到" tabindex="-1"><a class="header-anchor" href="#android可用的gdbserver在哪里可以找到" aria-hidden="true">#</a> android可用的gdbserver在哪里可以找到</h3><p>可以在 Android NDK 中找到可用的 gdbserver。可以从以下位置下载 Android NDK：<a href="https://developer.android.com/ndk/downloads%E3%80%82" target="_blank" rel="noopener noreferrer">https://developer.android.com/ndk/downloads。<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>在下载并解压缩 Android NDK 后，您可以在 <code>&lt;ndk_root&gt;/prebuilt/android-x86/gdbserver</code>（或其他 CPU 架构的相应目录）找到 gdbserver 可执行文件。</p><p>将此可执行文件复制到 Android 设备上，并在设备上运行它以启动 gdbserver。例如，如果您的 Android 设备的 IP 地址为 <code>192.168.1.100</code>，则可以使用以下命令启动 gdbserver：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>adb shell /data/local/tmp/gdbserver :9999 --attach &lt;pid&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这将在 Android 设备上的 <code>9999</code> 端口上启动 gdbserver，并将其附加到 <code>&lt;pid&gt;</code> 指定的进程。然后，您可以在本地主机上使用 gdb 来连接 gdbserver 并进行调试：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>gdb
(gdb) target remote 192.168.1.100:9999
(gdb) ...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意，如果您的 Android 设备已经 root，并且已经安装了 SuperSU 或 Magisk 等 root 管理应用程序，则可以直接将 gdbserver 安装到设备上，而不需要每次都复制它。</p><h2 id="clion预览代码-lldb调试代码" tabindex="-1"><a class="header-anchor" href="#clion预览代码-lldb调试代码" aria-hidden="true">#</a> CLion预览代码，LLDB调试代码</h2><p>预览代码</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>aidegen frameworks <span class="token parameter variable">-i</span> c <span class="token parameter variable">-s</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>启动模拟器</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>emulator -avd biezhihua_aosp  -system &quot;/home/biezhihua/projects/aosp/out/target/product/emulator_x86_64/system-qemu.img&quot; -data &quot;/home/biezhihua/projects/aosp/out/target/product/emulator_x86_64/userdata.img&quot; -writable-system -show-kernel -skip-adb-auth -wipe-data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>获取目标进程PID</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>adb shell pidof surfaceflinger
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>调试代码</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>
// 进入调试模式
lldbclient.py <span class="token parameter variable">-p</span> <span class="token number">446</span>

// 首次进入后，所有线程会因为stop reason <span class="token operator">=</span> signal SIGSTOP挂起
<span class="token builtin class-name">continue</span> 让进程继续执行
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>增加断点：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>breakpoint <span class="token builtin class-name">set</span> <span class="token parameter variable">-M</span> SurfaceFlinger::onComposerHalVsync
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>打印调用栈</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>bt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><a href="https://source.android.com/docs/core/tests/debug/gdb?hl=zh-cn" target="_blank" rel="noopener noreferrer">https://source.android.com/docs/core/tests/debug/gdb?hl=zh-cn<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://lldb.llvm.org/" target="_blank" rel="noopener noreferrer">https://lldb.llvm.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="init-got-an-unexpected-keyword-argument-text" tabindex="-1"><a class="header-anchor" href="#init-got-an-unexpected-keyword-argument-text" aria-hidden="true">#</a> <strong>init</strong>() got an unexpected keyword argument &#39;text&#39;</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>➜  aosp lldbclient.py -p 3696  --setup-forwarding vscode-lldb
Traceback (most recent call last):
  File &quot;/home/biezhihua/projects/aosp/development/scripts/lldbclient.py&quot;, line 426, in &lt;module&gt;
    main()
  File &quot;/home/biezhihua/projects/aosp/development/scripts/lldbclient.py&quot;, line 418, in main
    do_main()
  File &quot;/home/biezhihua/projects/aosp/development/scripts/lldbclient.py&quot;, line 352, in do_main
    clang_version = read_toolchain_config(root)
  File &quot;/home/biezhihua/projects/aosp/development/scripts/lldbclient.py&quot;, line 41, in read_toolchain_config
    text=True)
  File &quot;/usr/lib/python3.6/subprocess.py&quot;, line 356, in check_output
    **kwargs).stdout
  File &quot;/usr/lib/python3.6/subprocess.py&quot;, line 423, in run
    with Popen(*popenargs, **kwargs) as process:
TypeError: **init**() got an unexpected keyword argument &#39;text&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个错误发生在运行 <code>lldbclient.py</code> 脚本时。原因是在您使用的 Python 版本（3.6）中，<code>subprocess</code> 模块的 <code>Popen</code> 类的 <code>__init__()</code> 方法不支持 <code>text</code> 关键字参数。<code>text</code> 参数在 Python 3.7 及更高版本的 <code>subprocess</code> 模块中引入，用于替代过时的 <code>universal_newlines</code> 参数。</p><p>为了解决这个问题，您可以执行以下操作：</p><ol><li><p>更新 Python 版本。建议安装 Python 3.7 或更高版本。这可以通过使用您的包管理器或从 <a href="https://www.python.org/downloads/" target="_blank" rel="noopener noreferrer">Python 官方网站<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 下载并安装新版本来完成。</p></li><li><p>如果您不希望或不能更新 Python，可以尝试修改 <code>lldbclient.py</code> 脚本。在脚本的第 41 行，将以下代码：</p></li></ol><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>text<span class="token operator">=</span><span class="token boolean">True</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>替换为：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>universal_newlines<span class="token operator">=</span><span class="token boolean">True</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这会在旧版本的 <code>subprocess</code> 模块中使用 <code>universal_newlines</code> 参数，实现与 <code>text</code> 参数相同的功能。</p><p>保存更改后，再次运行 <code>lldbclient.py</code> 脚本，问题应该得到解决。</p><h2 id="other" tabindex="-1"><a class="header-anchor" href="#other" aria-hidden="true">#</a> other</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>adb shell <span class="token function">ps</span> <span class="token parameter variable">-A</span> <span class="token operator">|</span> <span class="token function">grep</span> surfaceflinger
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: biezhihua@gmail.com">biezhihua</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-c18e92cb.js" defer></script>
  </body>
</html>
