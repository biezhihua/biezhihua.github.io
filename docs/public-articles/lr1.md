#  LR(1) 
## LR(1)文法 介绍和理解。


LR(1) 文法是一种用于语法分析的上下文无关文法 (CFG)，主要用于编译器设计中。它是一种自底向上的语法分析方法，能够处理较为复杂的语法。LR(1) 文法可以处理更多类型的语言结构，与 LL(1) 文法相比，拥有更强的分析能力。

### LR(1) 文法基本概念
LR(1) 是由三个部分构成的：
- **L** 代表从左向右读取输入串（Left to Right）。
- **R** 代表使用最右推导 (Rightmost Derivation) 进行还原。
- **1** 表示在进行语法分析时，向前查看一个符号 (Lookahead 1)。

### LR(1) 语法分析器的工作原理
LR(1) 分析器构建了一个**分析表**（通常是 Action 表和 Goto 表），通过状态转换实现对输入串的分析。这些表基于文法生成的**项目集规范族**（LR(1) 项目集）来构建。语法分析器会使用一个栈来保存分析状态和语法符号，并根据输入串和状态表进行移入（Shift）和规约（Reduce）操作。

1. **移入操作 (Shift)**：将当前输入符号移入栈中，并更新状态。
2. **规约操作 (Reduce)**：当发现某个产生式右侧的符号已经匹配时，进行规约操作，将其替换为该产生式的左侧符号。
3. **接受 (Accept)**：当输入符号被成功处理，并且达到了文法的结束符时，分析器接受该输入串。
4. **错误 (Error)**：当输入符号无法与当前状态匹配时，报告语法错误。

### LR(1) 分析表的构建
- **项目 (Item)**：一个 LR(1) 项目是形如 `[A → α•β, a]` 的形式，表示文法规则 `A → αβ`，其中 `•` 表示当前项目的进度，`a` 是向前看符号。
- **项目集 (Item Set)**：多个 LR(1) 项目组成项目集，表示分析过程中的某种状态。
- **项目集规范族 (Canonical LR(1) Collection)**：从初始状态开始，通过状态间的转移构建整个项目集规范族。

### LR(1) 的优缺点
#### 优点：
- **强大的分析能力**：LR(1) 分析器能够处理比 LL(1) 和 SLR 文法更复杂的语法结构，如左递归。
- **确定性强**：通过向前查看符号（Lookahead），LR(1) 可以避免某些语法冲突，从而进行精确的语法分析。

#### 缺点：
- **分析表较大**：由于 LR(1) 项目集引入了向前看符号，导致其项目集规范族更大，生成的分析表也更大，增加了存储和处理的开销。
- **构建复杂**：LR(1) 分析表的构建比 SLR 或 LALR 文法复杂得多。

### LR(1) 文法的变种
为了克服 LR(1) 文法分析表过大的问题，人们提出了改进的变种，如：
- **SLR 文法**：简单 LR 文法（Simple LR），通过简化 LR 项目的构造，减小分析表的规模，但降低了一部分的分析能力。
- **LALR 文法**：Look-Ahead LR 文法，保留了 LR(1) 的分析能力，同时减少了分析表的规模，是 LR(1) 文法的一种常见简化。

### 总结
LR(1) 文法是一种非常强大的语法分析技术，适用于处理复杂的上下文无关文法，主要用于编译器的语法分析阶段。虽然构造复杂且占用的内存较多，但其分析能力非常强，是编译器实现中的一个重要部分。

## LR(1） 非终结符标识符是什么意思

在 LR(1) 文法中，**非终结符 (Non-terminal)** 是一种重要的语法符号，用来表示文法中的某些结构或模式。非终结符在文法规则中作为左部符号，能够进一步推导出由终结符或其他非终结符组成的序列。

### 非终结符的作用
1. **语法规则中的变量**：非终结符类似于编程语言中的变量，用于定义更复杂的语法结构。例如，如果你有一个规则 `S → AB`，其中 `S`、`A` 和 `B` 都是非终结符，它们可以进一步推导出其他符号。
   
2. **表达抽象的语法结构**：非终结符往往用于表达语法的抽象层次。比如，在编译器中，`expr` 可以代表一个表达式，`stmt` 可以代表一个语句。终结符则是实际的语言符号，比如 `+`、`-`、`if` 等。

### 非终结符标识符的含义
在 LR(1) 文法中，**非终结符标识符** 是指文法中用于表示非终结符的符号，它们用于定义文法规则。例如，在文法规则 `S → A B` 中，`S`、`A` 和 `B` 都是非终结符的标识符。标识符的具体含义如下：

- **非终结符标识符**：文法中的符号（通常是大写字母或描述性字符串）用来表示某一类可推导的结构。例如 `S`、`A`、`expr`、`stmt` 等都是非终结符标识符。
- **终结符标识符**：与非终结符相对，终结符标识符代表实际的语言符号，如 `+`、`if`、`a` 等，它们不能被进一步推导。

### 举例说明
假设你有以下 LR(1) 文法：
```
S → A B
A → 'a'
B → 'b'
```

在这个例子中：
- `S`、`A` 和 `B` 都是**非终结符标识符**，它们可以通过推导规则替换为终结符或其他非终结符。
- `'a'` 和 `'b'` 是**终结符**，它们代表实际的输入符号。

LR(1) 分析器根据这些非终结符和终结符的规则构建**语法分析表**，并用来匹配输入串是否符合文法。

### 非终结符标识符在 LR(1) 文法中的使用
在 LR(1) 文法中，非终结符标识符与终结符一起定义了文法的产生式规则。分析器通过这些规则来决定如何处理输入的符号序列，并利用非终结符标识符在状态转换表中进行状态切换或规约操作。

总结来说，**非终结符标识符**是 LR(1) 文法中的核心符号，用来表示可以继续展开或推导的语法结构。